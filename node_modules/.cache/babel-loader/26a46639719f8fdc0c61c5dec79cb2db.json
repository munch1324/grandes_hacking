{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n * \n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n * \n */\n!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define([], t) : \"object\" == typeof exports ? exports.OktaAuth = t() : e.OktaAuth = t();\n}(\"undefined\" != typeof self ? self : this, function () {\n  return function (e) {\n    function t(r) {\n      if (n[r]) return n[r].exports;\n      var o = n[r] = {\n        i: r,\n        l: !1,\n        exports: {}\n      };\n      return e[r].call(o.exports, o, o.exports, t), o.l = !0, o.exports;\n    }\n\n    var n = {};\n    return t.m = e, t.c = n, t.d = function (e, n, r) {\n      t.o(e, n) || Object.defineProperty(e, n, {\n        configurable: !1,\n        enumerable: !0,\n        get: r\n      });\n    }, t.n = function (e) {\n      var n = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return t.d(n, \"a\", n), n;\n    }, t.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, t.p = \"\", t(t.s = 11);\n  }([function (e, t) {\n    var n = e.exports;\n    n.stringToBase64Url = function (e) {\n      var t = btoa(e);\n      return n.base64ToBase64Url(t);\n    }, n.base64ToBase64Url = function (e) {\n      return e.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n    }, n.base64UrlToBase64 = function (e) {\n      return e.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    }, n.base64UrlToString = function (e) {\n      var t = n.base64UrlToBase64(e);\n\n      switch (t.length % 4) {\n        case 0:\n          break;\n\n        case 2:\n          t += \"==\";\n          break;\n\n        case 3:\n          t += \"=\";\n          break;\n\n        default:\n          throw \"Not a valid Base64Url\";\n      }\n\n      var r = atob(t);\n\n      try {\n        return decodeURIComponent(escape(r));\n      } catch (e) {\n        return r;\n      }\n    }, n.stringToBuffer = function (e) {\n      for (var t = new Uint8Array(e.length), n = 0; n < e.length; n++) t[n] = e.charCodeAt(n);\n\n      return t;\n    }, n.base64UrlDecode = function (e) {\n      return atob(n.base64UrlToBase64(e));\n    }, n.bind = function (e, t) {\n      var n = Array.prototype.slice.call(arguments, 2);\n      return function () {\n        var r = Array.prototype.slice.call(arguments);\n        return r = n.concat(r), e.apply(t, r);\n      };\n    }, n.isAbsoluteUrl = function (e) {\n      return /^(?:[a-z]+:)?\\/\\//i.test(e);\n    }, n.isString = function (e) {\n      return \"[object String]\" === Object.prototype.toString.call(e);\n    }, n.isObject = function (e) {\n      return \"[object Object]\" === Object.prototype.toString.call(e);\n    }, n.isNumber = function (e) {\n      return \"[object Number]\" === Object.prototype.toString.call(e);\n    }, n.isArray = function (e) {\n      return \"[object Array]\" === Object.prototype.toString.call(e);\n    }, n.isoToUTCString = function (e) {\n      var t = e.match(/\\d+/g),\n          n = Date.UTC(t[0], t[1] - 1, t[2], t[3], t[4], t[5]);\n      return new Date(n).toUTCString();\n    }, n.toQueryParams = function (e) {\n      var t = [];\n      if (null !== e) for (var n in e) e.hasOwnProperty(n) && void 0 !== e[n] && null !== e[n] && t.push(n + \"=\" + encodeURIComponent(e[n]));\n      return t.length ? \"?\" + t.join(\"&\") : \"\";\n    }, n.genRandomString = function (e) {\n      for (var t = \"abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\", n = \"\", r = 0, o = t.length; r < e; ++r) n += t[Math.floor(Math.random() * o)];\n\n      return n;\n    }, n.extend = function () {\n      var e = arguments[0];\n      return [].slice.call(arguments, 1).forEach(function (t) {\n        for (var n in t) t.hasOwnProperty(n) && void 0 !== t[n] && (e[n] = t[n]);\n      }), e;\n    }, n.removeNils = function (e) {\n      var t = {};\n\n      for (var n in e) if (e.hasOwnProperty(n)) {\n        var r = e[n];\n        null !== r && void 0 !== r && (t[n] = r);\n      }\n\n      return t;\n    }, n.clone = function (e) {\n      if (e) {\n        var t = JSON.stringify(e);\n        if (t) return JSON.parse(t);\n      }\n\n      return e;\n    }, n.omit = function (e) {\n      var t = Array.prototype.slice.call(arguments, 1),\n          r = {};\n\n      for (var o in e) e.hasOwnProperty(o) && -1 == t.indexOf(o) && (r[o] = e[o]);\n\n      return n.clone(r);\n    }, n.find = function (e, t) {\n      for (var n = e.length; n--;) {\n        var r = e[n],\n            o = !0;\n\n        for (var i in t) if (t.hasOwnProperty(i) && r[i] !== t[i]) {\n          o = !1;\n          break;\n        }\n\n        if (o) return r;\n      }\n    }, n.getLink = function (e, t, r) {\n      if (e && e._links) {\n        var o = n.clone(e._links[t]);\n        return o && o.name && r ? o.name === r ? o : void 0 : o;\n      }\n    }, n.getNativeConsole = function () {\n      return \"undefined\" != typeof window ? window.console : \"undefined\" != typeof console ? console : void 0;\n    }, n.getConsole = function () {\n      var e = n.getNativeConsole();\n      return e && e.log ? e : {\n        log: function () {}\n      };\n    }, n.warn = function (e) {\n      n.getConsole().log(\"[okta-auth-sdk] WARN: \" + e);\n    }, n.deprecate = function (e) {\n      n.getConsole().log(\"[okta-auth-sdk] DEPRECATION: \" + e);\n    }, n.deprecateWrap = function (e, t) {\n      return function () {\n        return n.deprecate(e), t.apply(null, arguments);\n      };\n    }, n.removeTrailingSlash = function (e) {\n      if (e) {\n        var t = e.replace(/^\\s+|\\s+$/gm, \"\");\n        return t = t.replace(/\\/+$/, \"\");\n      }\n    }, n.isIE11OrLess = function () {\n      return !!document.documentMode && document.documentMode <= 11;\n    }, n.isFunction = function (e) {\n      return !!e && \"[object Function]\" === {}.toString.call(e);\n    };\n  }, function (e, t) {\n    function n(e, t) {\n      this.name = \"AuthSdkError\", this.message = e, this.errorCode = \"INTERNAL\", this.errorSummary = e, this.errorLink = \"INTERNAL\", this.errorId = \"INTERNAL\", this.errorCauses = [], t && (this.xhr = t);\n    }\n\n    n.prototype = new Error(), e.exports = n;\n  }, function (e, t) {\n    e.exports = {\n      STATE_TOKEN_KEY_NAME: \"oktaStateToken\",\n      DEFAULT_POLLING_DELAY: 500,\n      DEFAULT_MAX_CLOCK_SKEW: 300,\n      DEFAULT_CACHE_DURATION: 86400,\n      REDIRECT_OAUTH_PARAMS_COOKIE_NAME: \"okta-oauth-redirect-params\",\n      REDIRECT_STATE_COOKIE_NAME: \"okta-oauth-state\",\n      REDIRECT_NONCE_COOKIE_NAME: \"okta-oauth-nonce\",\n      TOKEN_STORAGE_NAME: \"okta-token-storage\",\n      CACHE_STORAGE_NAME: \"okta-cache-storage\",\n      PKCE_STORAGE_NAME: \"okta-pkce-storage\"\n    };\n  }, function (e, t, n) {\n    function r(e, t) {\n      t = t || {};\n      var n = t.url,\n          r = t.method,\n          o = t.args,\n          i = t.saveAuthnState,\n          f = t.accessToken,\n          p = !1 !== t.withCredentials,\n          l = e.options.storageUtil,\n          d = l.storage,\n          h = l.getHttpCache();\n\n      if (t.cacheResponse) {\n        var y = h.getStorage(),\n            g = y[n];\n        if (g && Date.now() / 1e3 < g.expiresAt) return a.resolve(g.response);\n      }\n\n      var m = {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"X-Okta-User-Agent-Extended\": e.userAgent\n      };\n      s.extend(m, e.options.headers, t.headers), f && s.isString(f) && (m.Authorization = \"Bearer \" + f);\n      var v,\n          w,\n          T = {\n        headers: m,\n        data: o || void 0,\n        withCredentials: p\n      };\n      return new a(e.options.httpRequestClient(r, n, T)).then(function (e) {\n        return w = e.responseText, w && s.isString(w) && (w = JSON.parse(w)), i && (w.stateToken || d.delete(c.STATE_TOKEN_KEY_NAME)), w && w.stateToken && w.expiresAt && d.set(c.STATE_TOKEN_KEY_NAME, w.stateToken, w.expiresAt), w && t.cacheResponse && h.updateStorage(n, {\n          expiresAt: Math.floor(Date.now() / 1e3) + c.DEFAULT_CACHE_DURATION,\n          response: w\n        }), w;\n      }).fail(function (t) {\n        var n = t.responseText || {};\n        if (s.isString(n)) try {\n          n = JSON.parse(n);\n        } catch (e) {\n          n = {\n            errorSummary: \"Unknown error\"\n          };\n        }\n        throw t.status >= 500 && (n.errorSummary = \"Unknown error\"), e.options.transformErrorXHR && (t = e.options.transformErrorXHR(s.clone(t))), v = new u(n, t), \"E0000011\" === v.errorCode && d.delete(c.STATE_TOKEN_KEY_NAME), v;\n      });\n    }\n\n    function o(e, t, n) {\n      t = s.isAbsoluteUrl(t) ? t : e.options.url + t;\n      var o = {\n        url: t,\n        method: \"GET\"\n      };\n      return s.extend(o, n), r(e, o);\n    }\n\n    function i(e, t, n, o) {\n      t = s.isAbsoluteUrl(t) ? t : e.options.url + t;\n      var i = {\n        url: t,\n        method: \"POST\",\n        args: n,\n        saveAuthnState: !0\n      };\n      return s.extend(i, o), r(e, i);\n    }\n\n    var s = n(0),\n        a = n(5),\n        u = n(22),\n        c = n(2);\n    e.exports = {\n      get: o,\n      post: i,\n      httpRequest: r\n    };\n  }, function (e, t, n) {\n    var r = n(14),\n        o = n(6),\n        i = n(2),\n        s = {};\n    s.browserHasLocalStorage = function () {\n      try {\n        var e = s.getLocalStorage();\n        return s.testStorage(e);\n      } catch (e) {\n        return !1;\n      }\n    }, s.browserHasSessionStorage = function () {\n      try {\n        var e = s.getSessionStorage();\n        return s.testStorage(e);\n      } catch (e) {\n        return !1;\n      }\n    }, s.getPKCEStorage = function () {\n      return s.browserHasLocalStorage() ? o(s.getLocalStorage(), i.PKCE_STORAGE_NAME) : s.browserHasSessionStorage() ? o(s.getSessionStorage(), i.PKCE_STORAGE_NAME) : o(s.getCookieStorage({\n        secure: \"https:\" === window.location.protocol\n      }), i.PKCE_STORAGE_NAME);\n    }, s.getHttpCache = function () {\n      return s.browserHasLocalStorage() ? o(s.getLocalStorage(), i.CACHE_STORAGE_NAME) : s.browserHasSessionStorage() ? o(s.getSessionStorage(), i.CACHE_STORAGE_NAME) : o(s.getCookieStorage({\n        secure: \"https:\" === window.location.protocol\n      }), i.CACHE_STORAGE_NAME);\n    }, s.getLocalStorage = function () {\n      return localStorage;\n    }, s.getSessionStorage = function () {\n      return sessionStorage;\n    }, s.getCookieStorage = function (e) {\n      e = e || {};\n      var t = e.secure || !1,\n          n = e.sameSite || (t ? \"none\" : \"lax\");\n      return {\n        getItem: s.storage.get,\n        setItem: function (e, r) {\n          s.storage.set(e, r, \"2200-01-01T00:00:00.000Z\", {\n            secure: t,\n            sameSite: n\n          });\n        }\n      };\n    }, s.getInMemoryStorage = function () {\n      var e = {};\n      return {\n        getItem: function (t) {\n          return e[t];\n        },\n        setItem: function (t, n) {\n          e[t] = n;\n        }\n      };\n    }, s.testStorage = function (e) {\n      var t = \"okta-test-storage\";\n\n      try {\n        return e.setItem(t, t), e.removeItem(t), !0;\n      } catch (e) {\n        return !1;\n      }\n    }, s.storage = {\n      set: function (e, t, n, o) {\n        o = o || {};\n        var i = {\n          path: o.path || \"/\",\n          secure: o.secure,\n          sameSite: o.sameSite\n        };\n        return Date.parse(n) && (i.expires = new Date(n)), r.set(e, t, i), s.storage.get(e);\n      },\n      get: function (e) {\n        return r.get(e);\n      },\n      delete: function (e) {\n        return r.remove(e, {\n          path: \"/\"\n        });\n      }\n    }, e.exports = s;\n  }, function (e, t, n) {\n    (function (t, n) {\n      /*!\n      *\n      * Copyright 2009-2012 Kris Kowal under the terms of the MIT\n      * license found at http://github.com/kriskowal/q/raw/master/LICENSE\n      *\n      * With parts by Tyler Close\n      * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n      * at http://www.opensource.org/licenses/mit-license.html\n      * Forked at ref_send.js version: 2009-05-11\n      *\n      * With parts by Mark Miller\n      * Copyright (C) 2011 Google Inc.\n      *\n      * Licensed under the Apache License, Version 2.0 (the \"License\");\n      * you may not use this file except in compliance with the License.\n      * You may obtain a copy of the License at\n      *\n      * http://www.apache.org/licenses/LICENSE-2.0\n      *\n      * Unless required by applicable law or agreed to in writing, software\n      * distributed under the License is distributed on an \"AS IS\" BASIS,\n      * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n      * See the License for the specific language governing permissions and\n      * limitations under the License.\n      *\n      */\n      !function (t) {\n        \"use strict\";\n\n        if (\"function\" == typeof bootstrap) bootstrap(\"promise\", t);else {\n          e.exports = t();\n        }\n      }(function () {\n        \"use strict\";\n\n        function e(e) {\n          return function () {\n            return J.apply(e, arguments);\n          };\n        }\n\n        function r(e) {\n          return e === Object(e);\n        }\n\n        function o(e) {\n          return \"[object StopIteration]\" === ne(e) || e instanceof z;\n        }\n\n        function i(e, t) {\n          if (K && t.stack && \"object\" == typeof e && null !== e && e.stack && -1 === e.stack.indexOf(re)) {\n            for (var n = [], r = t; r; r = r.source) r.stack && n.unshift(r.stack);\n\n            n.unshift(e.stack);\n            var o = n.join(\"\\n\" + re + \"\\n\");\n            e.stack = s(o);\n          }\n        }\n\n        function s(e) {\n          for (var t = e.split(\"\\n\"), n = [], r = 0; r < t.length; ++r) {\n            var o = t[r];\n            c(o) || a(o) || !o || n.push(o);\n          }\n\n          return n.join(\"\\n\");\n        }\n\n        function a(e) {\n          return -1 !== e.indexOf(\"(module.js:\") || -1 !== e.indexOf(\"(node.js:\");\n        }\n\n        function u(e) {\n          var t = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(e);\n          if (t) return [t[1], Number(t[2])];\n          var n = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(e);\n          if (n) return [n[1], Number(n[2])];\n          var r = /.*@(.+):(\\d+)$/.exec(e);\n          return r ? [r[1], Number(r[2])] : void 0;\n        }\n\n        function c(e) {\n          var t = u(e);\n          if (!t) return !1;\n          var n = t[0],\n              r = t[1];\n          return n === q && r >= W && r <= ue;\n        }\n\n        function f() {\n          if (K) try {\n            throw new Error();\n          } catch (r) {\n            var e = r.stack.split(\"\\n\"),\n                t = e[0].indexOf(\"@\") > 0 ? e[1] : e[2],\n                n = u(t);\n            if (!n) return;\n            return q = n[0], n[1];\n          }\n        }\n\n        function p(e) {\n          return e instanceof y ? e : w(e) ? O(e) : _(e);\n        }\n\n        function l() {\n          function e(e) {\n            t = e, i.source = e, Y(n, function (t, n) {\n              p.nextTick(function () {\n                e.promiseDispatch.apply(e, n);\n              });\n            }, void 0), n = void 0, r = void 0;\n          }\n\n          var t,\n              n = [],\n              r = [],\n              o = Z(l.prototype),\n              i = Z(y.prototype);\n          if (i.promiseDispatch = function (e, o, i) {\n            var s = Q(arguments);\n            n ? (n.push(s), \"when\" === o && i[1] && r.push(i[1])) : p.nextTick(function () {\n              t.promiseDispatch.apply(t, s);\n            });\n          }, i.valueOf = function () {\n            if (n) return i;\n            var e = m(t);\n            return v(e) && (t = e), e;\n          }, i.inspect = function () {\n            return t ? t.inspect() : {\n              state: \"pending\"\n            };\n          }, p.longStackSupport && K) try {\n            throw new Error();\n          } catch (e) {\n            i.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\n          }\n          return o.promise = i, o.resolve = function (n) {\n            t || e(p(n));\n          }, o.fulfill = function (n) {\n            t || e(_(n));\n          }, o.reject = function (n) {\n            t || e(x(n));\n          }, o.notify = function (e) {\n            t || Y(r, function (t, n) {\n              p.nextTick(function () {\n                n(e);\n              });\n            }, void 0);\n          }, o;\n        }\n\n        function d(e) {\n          if (\"function\" != typeof e) throw new TypeError(\"resolver must be a function.\");\n          var t = l();\n\n          try {\n            e(t.resolve, t.reject, t.notify);\n          } catch (e) {\n            t.reject(e);\n          }\n\n          return t.promise;\n        }\n\n        function h(e) {\n          return d(function (t, n) {\n            for (var r = 0, o = e.length; r < o; r++) p(e[r]).then(t, n);\n          });\n        }\n\n        function y(e, t, n) {\n          void 0 === t && (t = function (e) {\n            return x(new Error(\"Promise does not support operation: \" + e));\n          }), void 0 === n && (n = function () {\n            return {\n              state: \"unknown\"\n            };\n          });\n          var r = Z(y.prototype);\n\n          if (r.promiseDispatch = function (n, o, i) {\n            var s;\n\n            try {\n              s = e[o] ? e[o].apply(r, i) : t.call(r, o, i);\n            } catch (e) {\n              s = x(e);\n            }\n\n            n && n(s);\n          }, r.inspect = n, n) {\n            var o = n();\n            \"rejected\" === o.state && (r.exception = o.reason), r.valueOf = function () {\n              var e = n();\n              return \"pending\" === e.state || \"rejected\" === e.state ? r : e.value;\n            };\n          }\n\n          return r;\n        }\n\n        function g(e, t, n, r) {\n          return p(e).then(t, n, r);\n        }\n\n        function m(e) {\n          if (v(e)) {\n            var t = e.inspect();\n            if (\"fulfilled\" === t.state) return t.value;\n          }\n\n          return e;\n        }\n\n        function v(e) {\n          return e instanceof y;\n        }\n\n        function w(e) {\n          return r(e) && \"function\" == typeof e.then;\n        }\n\n        function T(e) {\n          return v(e) && \"pending\" === e.inspect().state;\n        }\n\n        function k(e) {\n          return !v(e) || \"fulfilled\" === e.inspect().state;\n        }\n\n        function b(e) {\n          return v(e) && \"rejected\" === e.inspect().state;\n        }\n\n        function E() {\n          oe.length = 0, ie.length = 0, ae || (ae = !0);\n        }\n\n        function S(e, n) {\n          ae && (\"object\" == typeof t && \"function\" == typeof t.emit && p.nextTick.runAfter(function () {\n            -1 !== X(ie, e) && (t.emit(\"unhandledRejection\", n, e), se.push(e));\n          }), ie.push(e), n && void 0 !== n.stack ? oe.push(n.stack) : oe.push(\"(no stack) \" + n));\n        }\n\n        function A(e) {\n          if (ae) {\n            var n = X(ie, e);\n            -1 !== n && (\"object\" == typeof t && \"function\" == typeof t.emit && p.nextTick.runAfter(function () {\n              var r = X(se, e);\n              -1 !== r && (t.emit(\"rejectionHandled\", oe[n], e), se.splice(r, 1));\n            }), ie.splice(n, 1), oe.splice(n, 1));\n          }\n        }\n\n        function x(e) {\n          var t = y({\n            when: function (t) {\n              return t && A(this), t ? t(e) : this;\n            }\n          }, function () {\n            return this;\n          }, function () {\n            return {\n              state: \"rejected\",\n              reason: e\n            };\n          });\n          return S(t, e), t;\n        }\n\n        function _(e) {\n          return y({\n            when: function () {\n              return e;\n            },\n            get: function (t) {\n              return e[t];\n            },\n            set: function (t, n) {\n              e[t] = n;\n            },\n            delete: function (t) {\n              delete e[t];\n            },\n            post: function (t, n) {\n              return null === t || void 0 === t ? e.apply(void 0, n) : e[t].apply(e, n);\n            },\n            apply: function (t, n) {\n              return e.apply(t, n);\n            },\n            keys: function () {\n              return te(e);\n            }\n          }, void 0, function () {\n            return {\n              state: \"fulfilled\",\n              value: e\n            };\n          });\n        }\n\n        function O(e) {\n          var t = l();\n          return p.nextTick(function () {\n            try {\n              e.then(t.resolve, t.reject, t.notify);\n            } catch (e) {\n              t.reject(e);\n            }\n          }), t.promise;\n        }\n\n        function U(e) {\n          return y({\n            isDef: function () {}\n          }, function (t, n) {\n            return M(e, t, n);\n          }, function () {\n            return p(e).inspect();\n          });\n        }\n\n        function C(e, t, n) {\n          return p(e).spread(t, n);\n        }\n\n        function R(e) {\n          return function () {\n            function t(e, t) {\n              var s;\n\n              if (\"undefined\" == typeof StopIteration) {\n                try {\n                  s = n[e](t);\n                } catch (e) {\n                  return x(e);\n                }\n\n                return s.done ? p(s.value) : g(s.value, r, i);\n              }\n\n              try {\n                s = n[e](t);\n              } catch (e) {\n                return o(e) ? p(e.value) : x(e);\n              }\n\n              return g(s, r, i);\n            }\n\n            var n = e.apply(this, arguments),\n                r = t.bind(t, \"next\"),\n                i = t.bind(t, \"throw\");\n            return r();\n          };\n        }\n\n        function j(e) {\n          p.done(p.async(e)());\n        }\n\n        function P(e) {\n          throw new z(e);\n        }\n\n        function I(e) {\n          return function () {\n            return C([this, N(arguments)], function (t, n) {\n              return e.apply(t, n);\n            });\n          };\n        }\n\n        function M(e, t, n) {\n          return p(e).dispatch(t, n);\n        }\n\n        function N(e) {\n          return g(e, function (e) {\n            var t = 0,\n                n = l();\n            return Y(e, function (r, o, i) {\n              var s;\n              v(o) && \"fulfilled\" === (s = o.inspect()).state ? e[i] = s.value : (++t, g(o, function (r) {\n                e[i] = r, 0 == --t && n.resolve(e);\n              }, n.reject, function (e) {\n                n.notify({\n                  index: i,\n                  value: e\n                });\n              }));\n            }, void 0), 0 === t && n.resolve(e), n.promise;\n          });\n        }\n\n        function D(e) {\n          if (0 === e.length) return p.resolve();\n          var t = p.defer(),\n              n = 0;\n          return Y(e, function (r, o, i) {\n            function s(e) {\n              t.resolve(e);\n            }\n\n            function a() {\n              0 === --n && t.reject(new Error(\"Can't get fulfillment value from any promise, all promises were rejected.\"));\n            }\n\n            function u(e) {\n              t.notify({\n                index: i,\n                value: e\n              });\n            }\n\n            var c = e[i];\n            n++, g(c, s, a, u);\n          }, void 0), t.promise;\n        }\n\n        function L(e) {\n          return g(e, function (e) {\n            return e = $(e, p), g(N($(e, function (e) {\n              return g(e, G, G);\n            })), function () {\n              return e;\n            });\n          });\n        }\n\n        function F(e) {\n          return p(e).allSettled();\n        }\n\n        function B(e, t) {\n          return p(e).then(void 0, void 0, t);\n        }\n\n        function H(e, t) {\n          return p(e).nodeify(t);\n        }\n\n        var K = !1;\n\n        try {\n          throw new Error();\n        } catch (e) {\n          K = !!e.stack;\n        }\n\n        var q,\n            z,\n            W = f(),\n            G = function () {},\n            V = function () {\n          function e() {\n            for (var e, t; o.next;) o = o.next, e = o.task, o.task = void 0, t = o.domain, t && (o.domain = void 0, t.enter()), r(e, t);\n\n            for (; c.length;) e = c.pop(), r(e);\n\n            s = !1;\n          }\n\n          function r(t, n) {\n            try {\n              t();\n            } catch (t) {\n              if (u) throw n && n.exit(), setTimeout(e, 0), n && n.enter(), t;\n              setTimeout(function () {\n                throw t;\n              }, 0);\n            }\n\n            n && n.exit();\n          }\n\n          var o = {\n            task: void 0,\n            next: null\n          },\n              i = o,\n              s = !1,\n              a = void 0,\n              u = !1,\n              c = [];\n          if (V = function (e) {\n            i = i.next = {\n              task: e,\n              domain: u && t.domain,\n              next: null\n            }, s || (s = !0, a());\n          }, \"object\" == typeof t && \"[object process]\" === t.toString() && t.nextTick) u = !0, a = function () {\n            t.nextTick(e);\n          };else if (\"function\" == typeof n) a = \"undefined\" != typeof window ? n.bind(window, e) : function () {\n            n(e);\n          };else if (\"undefined\" != typeof MessageChannel) {\n            var f = new MessageChannel();\n\n            f.port1.onmessage = function () {\n              a = p, f.port1.onmessage = e, e();\n            };\n\n            var p = function () {\n              f.port2.postMessage(0);\n            };\n\n            a = function () {\n              setTimeout(e, 0), p();\n            };\n          } else a = function () {\n            setTimeout(e, 0);\n          };\n          return V.runAfter = function (e) {\n            c.push(e), s || (s = !0, a());\n          }, V;\n        }(),\n            J = Function.call,\n            Q = e(Array.prototype.slice),\n            Y = e(Array.prototype.reduce || function (e, t) {\n          var n = 0,\n              r = this.length;\n          if (1 === arguments.length) for (;;) {\n            if (n in this) {\n              t = this[n++];\n              break;\n            }\n\n            if (++n >= r) throw new TypeError();\n          }\n\n          for (; n < r; n++) n in this && (t = e(t, this[n], n));\n\n          return t;\n        }),\n            X = e(Array.prototype.indexOf || function (e) {\n          for (var t = 0; t < this.length; t++) if (this[t] === e) return t;\n\n          return -1;\n        }),\n            $ = e(Array.prototype.map || function (e, t) {\n          var n = this,\n              r = [];\n          return Y(n, function (o, i, s) {\n            r.push(e.call(t, i, s, n));\n          }, void 0), r;\n        }),\n            Z = Object.create || function (e) {\n          function t() {}\n\n          return t.prototype = e, new t();\n        },\n            ee = e(Object.prototype.hasOwnProperty),\n            te = Object.keys || function (e) {\n          var t = [];\n\n          for (var n in e) ee(e, n) && t.push(n);\n\n          return t;\n        },\n            ne = e(Object.prototype.toString);\n\n        z = \"undefined\" != typeof ReturnValue ? ReturnValue : function (e) {\n          this.value = e;\n        };\n        var re = \"From previous event:\";\n        p.resolve = p, p.nextTick = V, p.longStackSupport = !1, \"object\" == typeof t && t && t.env && t.env.Q_DEBUG && (p.longStackSupport = !0), p.defer = l, l.prototype.makeNodeResolver = function () {\n          var e = this;\n          return function (t, n) {\n            t ? e.reject(t) : arguments.length > 2 ? e.resolve(Q(arguments, 1)) : e.resolve(n);\n          };\n        }, p.Promise = d, p.promise = d, d.race = h, d.all = N, d.reject = x, d.resolve = p, p.passByCopy = function (e) {\n          return e;\n        }, y.prototype.passByCopy = function () {\n          return this;\n        }, p.join = function (e, t) {\n          return p(e).join(t);\n        }, y.prototype.join = function (e) {\n          return p([this, e]).spread(function (e, t) {\n            if (e === t) return e;\n            throw new Error(\"Can't join: not the same: \" + e + \" \" + t);\n          });\n        }, p.race = h, y.prototype.race = function () {\n          return this.then(p.race);\n        }, p.makePromise = y, y.prototype.toString = function () {\n          return \"[object Promise]\";\n        }, y.prototype.then = function (e, t, n) {\n          function r(t) {\n            try {\n              return \"function\" == typeof e ? e(t) : t;\n            } catch (e) {\n              return x(e);\n            }\n          }\n\n          function o(e) {\n            if (\"function\" == typeof t) {\n              i(e, a);\n\n              try {\n                return t(e);\n              } catch (e) {\n                return x(e);\n              }\n            }\n\n            return x(e);\n          }\n\n          function s(e) {\n            return \"function\" == typeof n ? n(e) : e;\n          }\n\n          var a = this,\n              u = l(),\n              c = !1;\n          return p.nextTick(function () {\n            a.promiseDispatch(function (e) {\n              c || (c = !0, u.resolve(r(e)));\n            }, \"when\", [function (e) {\n              c || (c = !0, u.resolve(o(e)));\n            }]);\n          }), a.promiseDispatch(void 0, \"when\", [void 0, function (e) {\n            var t,\n                n = !1;\n\n            try {\n              t = s(e);\n            } catch (e) {\n              if (n = !0, !p.onerror) throw e;\n              p.onerror(e);\n            }\n\n            n || u.notify(t);\n          }]), u.promise;\n        }, p.tap = function (e, t) {\n          return p(e).tap(t);\n        }, y.prototype.tap = function (e) {\n          return e = p(e), this.then(function (t) {\n            return e.fcall(t).thenResolve(t);\n          });\n        }, p.when = g, y.prototype.thenResolve = function (e) {\n          return this.then(function () {\n            return e;\n          });\n        }, p.thenResolve = function (e, t) {\n          return p(e).thenResolve(t);\n        }, y.prototype.thenReject = function (e) {\n          return this.then(function () {\n            throw e;\n          });\n        }, p.thenReject = function (e, t) {\n          return p(e).thenReject(t);\n        }, p.nearer = m, p.isPromise = v, p.isPromiseAlike = w, p.isPending = T, y.prototype.isPending = function () {\n          return \"pending\" === this.inspect().state;\n        }, p.isFulfilled = k, y.prototype.isFulfilled = function () {\n          return \"fulfilled\" === this.inspect().state;\n        }, p.isRejected = b, y.prototype.isRejected = function () {\n          return \"rejected\" === this.inspect().state;\n        };\n        var oe = [],\n            ie = [],\n            se = [],\n            ae = !0;\n        p.resetUnhandledRejections = E, p.getUnhandledReasons = function () {\n          return oe.slice();\n        }, p.stopUnhandledRejectionTracking = function () {\n          E(), ae = !1;\n        }, E(), p.reject = x, p.fulfill = _, p.master = U, p.spread = C, y.prototype.spread = function (e, t) {\n          return this.all().then(function (t) {\n            return e.apply(void 0, t);\n          }, t);\n        }, p.async = R, p.spawn = j, p.return = P, p.promised = I, p.dispatch = M, y.prototype.dispatch = function (e, t) {\n          var n = this,\n              r = l();\n          return p.nextTick(function () {\n            n.promiseDispatch(r.resolve, e, t);\n          }), r.promise;\n        }, p.get = function (e, t) {\n          return p(e).dispatch(\"get\", [t]);\n        }, y.prototype.get = function (e) {\n          return this.dispatch(\"get\", [e]);\n        }, p.set = function (e, t, n) {\n          return p(e).dispatch(\"set\", [t, n]);\n        }, y.prototype.set = function (e, t) {\n          return this.dispatch(\"set\", [e, t]);\n        }, p.del = p.delete = function (e, t) {\n          return p(e).dispatch(\"delete\", [t]);\n        }, y.prototype.del = y.prototype.delete = function (e) {\n          return this.dispatch(\"delete\", [e]);\n        }, p.mapply = p.post = function (e, t, n) {\n          return p(e).dispatch(\"post\", [t, n]);\n        }, y.prototype.mapply = y.prototype.post = function (e, t) {\n          return this.dispatch(\"post\", [e, t]);\n        }, p.send = p.mcall = p.invoke = function (e, t) {\n          return p(e).dispatch(\"post\", [t, Q(arguments, 2)]);\n        }, y.prototype.send = y.prototype.mcall = y.prototype.invoke = function (e) {\n          return this.dispatch(\"post\", [e, Q(arguments, 1)]);\n        }, p.fapply = function (e, t) {\n          return p(e).dispatch(\"apply\", [void 0, t]);\n        }, y.prototype.fapply = function (e) {\n          return this.dispatch(\"apply\", [void 0, e]);\n        }, p.try = p.fcall = function (e) {\n          return p(e).dispatch(\"apply\", [void 0, Q(arguments, 1)]);\n        }, y.prototype.fcall = function () {\n          return this.dispatch(\"apply\", [void 0, Q(arguments)]);\n        }, p.fbind = function (e) {\n          var t = p(e),\n              n = Q(arguments, 1);\n          return function () {\n            return t.dispatch(\"apply\", [this, n.concat(Q(arguments))]);\n          };\n        }, y.prototype.fbind = function () {\n          var e = this,\n              t = Q(arguments);\n          return function () {\n            return e.dispatch(\"apply\", [this, t.concat(Q(arguments))]);\n          };\n        }, p.keys = function (e) {\n          return p(e).dispatch(\"keys\", []);\n        }, y.prototype.keys = function () {\n          return this.dispatch(\"keys\", []);\n        }, p.all = N, y.prototype.all = function () {\n          return N(this);\n        }, p.any = D, y.prototype.any = function () {\n          return D(this);\n        }, p.allResolved = function (e, t, n) {\n          return function () {\n            return \"undefined\" != typeof console && \"function\" == typeof console.warn && console.warn(t + \" is deprecated, use \" + n + \" instead.\", new Error(\"\").stack), e.apply(e, arguments);\n          };\n        }(L, \"allResolved\", \"allSettled\"), y.prototype.allResolved = function () {\n          return L(this);\n        }, p.allSettled = F, y.prototype.allSettled = function () {\n          return this.then(function (e) {\n            return N($(e, function (e) {\n              function t() {\n                return e.inspect();\n              }\n\n              return e = p(e), e.then(t, t);\n            }));\n          });\n        }, p.fail = p.catch = function (e, t) {\n          return p(e).then(void 0, t);\n        }, y.prototype.fail = y.prototype.catch = function (e) {\n          return this.then(void 0, e);\n        }, p.progress = B, y.prototype.progress = function (e) {\n          return this.then(void 0, void 0, e);\n        }, p.fin = p.finally = function (e, t) {\n          return p(e).finally(t);\n        }, y.prototype.fin = y.prototype.finally = function (e) {\n          return e = p(e), this.then(function (t) {\n            return e.fcall().then(function () {\n              return t;\n            });\n          }, function (t) {\n            return e.fcall().then(function () {\n              throw t;\n            });\n          });\n        }, p.done = function (e, t, n, r) {\n          return p(e).done(t, n, r);\n        }, y.prototype.done = function (e, n, r) {\n          var o = function (e) {\n            p.nextTick(function () {\n              if (i(e, s), !p.onerror) throw e;\n              p.onerror(e);\n            });\n          },\n              s = e || n || r ? this.then(e, n, r) : this;\n\n          \"object\" == typeof t && t && t.domain && (o = t.domain.bind(o)), s.then(void 0, o);\n        }, p.timeout = function (e, t, n) {\n          return p(e).timeout(t, n);\n        }, y.prototype.timeout = function (e, t) {\n          var n = l(),\n              r = setTimeout(function () {\n            t && \"string\" != typeof t || (t = new Error(t || \"Timed out after \" + e + \" ms\"), t.code = \"ETIMEDOUT\"), n.reject(t);\n          }, e);\n          return this.then(function (e) {\n            clearTimeout(r), n.resolve(e);\n          }, function (e) {\n            clearTimeout(r), n.reject(e);\n          }, n.notify), n.promise;\n        }, p.delay = function (e, t) {\n          return void 0 === t && (t = e, e = void 0), p(e).delay(t);\n        }, y.prototype.delay = function (e) {\n          return this.then(function (t) {\n            var n = l();\n            return setTimeout(function () {\n              n.resolve(t);\n            }, e), n.promise;\n          });\n        }, p.nfapply = function (e, t) {\n          return p(e).nfapply(t);\n        }, y.prototype.nfapply = function (e) {\n          var t = l(),\n              n = Q(e);\n          return n.push(t.makeNodeResolver()), this.fapply(n).fail(t.reject), t.promise;\n        }, p.nfcall = function (e) {\n          var t = Q(arguments, 1);\n          return p(e).nfapply(t);\n        }, y.prototype.nfcall = function () {\n          var e = Q(arguments),\n              t = l();\n          return e.push(t.makeNodeResolver()), this.fapply(e).fail(t.reject), t.promise;\n        }, p.nfbind = p.denodeify = function (e) {\n          var t = Q(arguments, 1);\n          return function () {\n            var n = t.concat(Q(arguments)),\n                r = l();\n            return n.push(r.makeNodeResolver()), p(e).fapply(n).fail(r.reject), r.promise;\n          };\n        }, y.prototype.nfbind = y.prototype.denodeify = function () {\n          var e = Q(arguments);\n          return e.unshift(this), p.denodeify.apply(void 0, e);\n        }, p.nbind = function (e, t) {\n          var n = Q(arguments, 2);\n          return function () {\n            function r() {\n              return e.apply(t, arguments);\n            }\n\n            var o = n.concat(Q(arguments)),\n                i = l();\n            return o.push(i.makeNodeResolver()), p(r).fapply(o).fail(i.reject), i.promise;\n          };\n        }, y.prototype.nbind = function () {\n          var e = Q(arguments, 0);\n          return e.unshift(this), p.nbind.apply(void 0, e);\n        }, p.nmapply = p.npost = function (e, t, n) {\n          return p(e).npost(t, n);\n        }, y.prototype.nmapply = y.prototype.npost = function (e, t) {\n          var n = Q(t || []),\n              r = l();\n          return n.push(r.makeNodeResolver()), this.dispatch(\"post\", [e, n]).fail(r.reject), r.promise;\n        }, p.nsend = p.nmcall = p.ninvoke = function (e, t) {\n          var n = Q(arguments, 2),\n              r = l();\n          return n.push(r.makeNodeResolver()), p(e).dispatch(\"post\", [t, n]).fail(r.reject), r.promise;\n        }, y.prototype.nsend = y.prototype.nmcall = y.prototype.ninvoke = function (e) {\n          var t = Q(arguments, 1),\n              n = l();\n          return t.push(n.makeNodeResolver()), this.dispatch(\"post\", [e, t]).fail(n.reject), n.promise;\n        }, p.nodeify = H, y.prototype.nodeify = function (e) {\n          if (!e) return this;\n          this.then(function (t) {\n            p.nextTick(function () {\n              e(null, t);\n            });\n          }, function (t) {\n            p.nextTick(function () {\n              e(t);\n            });\n          });\n        }, p.noConflict = function () {\n          throw new Error(\"Q.noConflict only works when Q is used as a global\");\n        };\n        var ue = f();\n        return p;\n      });\n    }).call(t, n(8), n(20).setImmediate);\n  }, function (e, t, n) {\n    function r(e, t) {\n      function n() {\n        var n = e.getItem(t);\n        n = n || \"{}\";\n\n        try {\n          return JSON.parse(n);\n        } catch (e) {\n          throw new o(\"Unable to parse storage string: \" + t);\n        }\n      }\n\n      function r(n) {\n        try {\n          var r = JSON.stringify(n);\n          e.setItem(t, r);\n        } catch (e) {\n          throw new o(\"Unable to set storage: \" + t);\n        }\n      }\n\n      function i(e) {\n        e || r({});\n        var t = n();\n        delete t[e], r(t);\n      }\n\n      function s(e, t) {\n        var o = n();\n        o[e] = t, r(o);\n      }\n\n      if (\"string\" != typeof t || !t.length) throw new o('\"storageName\" is required');\n      return {\n        getStorage: n,\n        setStorage: r,\n        clearStorage: i,\n        updateStorage: s\n      };\n    }\n\n    var o = n(1);\n    e.exports = r;\n  }, function (e, t, n) {\n    function r(e, t) {\n      var n = {};\n      return m.extend(n, t), !n.stateToken && e.stateToken && (n.stateToken = e.stateToken), n;\n    }\n\n    function o(e) {\n      return r(e);\n    }\n\n    function i(e, t) {\n      return t = r(e, t), g.post(e, e.options.url + \"/api/v1/authn\", t);\n    }\n\n    function s(e, t) {\n      if (!t || !t.stateToken) {\n        var n = e.tx.exists._get(k.STATE_TOKEN_KEY_NAME);\n\n        if (!n) return v.reject(new w(\"No transaction to resume\"));\n        t = {\n          stateToken: n\n        };\n      }\n\n      return e.tx.status(t).then(function (t) {\n        return new y(e, t);\n      });\n    }\n\n    function a(e, t) {\n      if (!t || !t.stateToken) {\n        var n = e.tx.exists._get(k.STATE_TOKEN_KEY_NAME);\n\n        if (!n) return v.reject(new w(\"No transaction to evaluate\"));\n        t = {\n          stateToken: n\n        };\n      }\n\n      return u(e, t).then(function (t) {\n        return new y(e, t);\n      });\n    }\n\n    function u(e, t) {\n      return t = r(e, t), g.post(e, e.options.url + \"/api/v1/authn/introspect\", t);\n    }\n\n    function c(e) {\n      return !!e.tx.exists._get(k.STATE_TOKEN_KEY_NAME);\n    }\n\n    function f(e, t, n, r) {\n      return g.post(e, t, n, r).then(function (t) {\n        return new y(e, t);\n      });\n    }\n\n    function p(e, t, n) {\n      return function (r) {\n        function i() {\n          var n = {};\n          if (\"function\" == typeof u) try {\n            n.autoPush = !!u();\n          } catch (e) {\n            return v.reject(new w(\"AutoPush resulted in an error.\"));\n          } else void 0 !== u && null !== u && (n.autoPush = !!u);\n          if (\"function\" == typeof a) try {\n            n.rememberDevice = !!a();\n          } catch (e) {\n            return v.reject(new w(\"RememberDevice resulted in an error.\"));\n          } else void 0 !== a && null !== a && (n.rememberDevice = !!a);\n          var r = f.href + m.toQueryParams(n);\n          return g.post(e, r, o(t), {\n            saveAuthnState: !1\n          });\n        }\n\n        var s, a, u, c;\n        m.isNumber(r) ? s = r : m.isObject(r) && (s = r.delay, a = r.rememberDevice, u = r.autoPush, c = r.transactionCallBack), s || 0 === s || (s = k.DEFAULT_POLLING_DELAY);\n        var f = m.getLink(t, \"next\", \"poll\");\n        n.isPolling = !0;\n\n        var p = 0,\n            l = function () {\n          return n.isPolling ? i().then(function (t) {\n            if (p = 0, t.factorResult && \"WAITING\" === t.factorResult) {\n              if (!n.isPolling) throw new T();\n              return \"function\" == typeof c && c(t), v.delay(s).then(l);\n            }\n\n            return n.isPolling = !1, new y(e, t);\n          }).fail(function (e) {\n            if (e.xhr && (0 === e.xhr.status || 429 === e.xhr.status) && p <= 4) {\n              var t = 1e3 * Math.pow(2, p);\n              return p++, v.delay(t).then(l);\n            }\n\n            throw e;\n          }) : v.reject(new T());\n        };\n\n        return l().fail(function (e) {\n          throw n.isPolling = !1, e;\n        });\n      };\n    }\n\n    function l(e, t, n, o, i) {\n      if (Array.isArray(o)) return function (r, s) {\n        if (!r) throw new w(\"Must provide a link name\");\n        var a = m.find(o, {\n          name: r\n        });\n        if (!a) throw new w(\"No link found for that name\");\n        return l(e, t, n, a, i)(s);\n      };\n\n      if (o.hints && o.hints.allow && 1 === o.hints.allow.length) {\n        switch (o.hints.allow[0]) {\n          case \"GET\":\n            return function () {\n              return g.get(e, o.href);\n            };\n\n          case \"POST\":\n            return function (s) {\n              i && i.isPolling && (i.isPolling = !1);\n              var a = r(t, s);\n              \"MFA_ENROLL\" !== t.status && \"FACTOR_ENROLL\" !== t.status || m.extend(a, {\n                factorType: n.factorType,\n                provider: n.provider\n              });\n              var u = {},\n                  c = a.autoPush;\n\n              if (void 0 !== c) {\n                if (\"function\" == typeof c) try {\n                  u.autoPush = !!c();\n                } catch (e) {\n                  return v.reject(new w(\"AutoPush resulted in an error.\"));\n                } else null !== c && (u.autoPush = !!c);\n                a = m.omit(a, \"autoPush\");\n              }\n\n              var p = a.rememberDevice;\n\n              if (void 0 !== p) {\n                if (\"function\" == typeof p) try {\n                  u.rememberDevice = !!p();\n                } catch (e) {\n                  return v.reject(new w(\"RememberDevice resulted in an error.\"));\n                } else null !== p && (u.rememberDevice = !!p);\n                a = m.omit(a, \"rememberDevice\");\n              } else a.profile && void 0 !== a.profile.updatePhone && (a.profile.updatePhone && (u.updatePhone = !0), a.profile = m.omit(a.profile, \"updatePhone\"));\n\n              var l = o.href + m.toQueryParams(u);\n              return f(e, l, a);\n            };\n        }\n      }\n    }\n\n    function d(e, t, n, r) {\n      var o = {};\n\n      for (var i in n._links) if (n._links.hasOwnProperty(i)) {\n        var s = n._links[i];\n        if (\"next\" === i && (i = s.name), s.type) o[i] = s;else switch (i) {\n          case \"poll\":\n            o.poll = p(e, t, r);\n            break;\n\n          default:\n            var a = l(e, t, n, s, r);\n            a && (o[i] = a);\n        }\n      }\n\n      return o;\n    }\n\n    function h(e, t, n, r) {\n      if (n = n || t, n = m.clone(n), Array.isArray(n)) {\n        for (var o = [], i = 0, s = n.length; i < s; i++) o.push(h(e, t, n[i], r));\n\n        return o;\n      }\n\n      var a = n._embedded || {};\n\n      for (var u in a) a.hasOwnProperty(u) && (m.isObject(a[u]) || Array.isArray(a[u])) && (a[u] = h(e, t, a[u], r));\n\n      var c = d(e, t, n, r);\n      return m.extend(a, c), n = m.omit(n, \"_embedded\", \"_links\"), m.extend(n, a), n;\n    }\n\n    function y(e, t) {\n      t && (this.data = t, m.extend(this, h(e, t, t, {})), delete this.stateToken, \"RECOVERY_CHALLENGE\" !== t.status || t._links || (this.cancel = function () {\n        return new v(new y(e));\n      }));\n    }\n\n    var g = n(3),\n        m = n(0),\n        v = n(5),\n        w = n(1),\n        T = n(23),\n        k = n(2);\n    e.exports = {\n      transactionStatus: i,\n      resumeTransaction: s,\n      transactionExists: c,\n      postToTransaction: f,\n      introspect: a\n    };\n  }, function (e, t) {\n    function n() {\n      throw new Error(\"setTimeout has not been defined\");\n    }\n\n    function r() {\n      throw new Error(\"clearTimeout has not been defined\");\n    }\n\n    function o(e) {\n      if (f === setTimeout) return setTimeout(e, 0);\n      if ((f === n || !f) && setTimeout) return f = setTimeout, setTimeout(e, 0);\n\n      try {\n        return f(e, 0);\n      } catch (t) {\n        try {\n          return f.call(null, e, 0);\n        } catch (t) {\n          return f.call(this, e, 0);\n        }\n      }\n    }\n\n    function i(e) {\n      if (p === clearTimeout) return clearTimeout(e);\n      if ((p === r || !p) && clearTimeout) return p = clearTimeout, clearTimeout(e);\n\n      try {\n        return p(e);\n      } catch (t) {\n        try {\n          return p.call(null, e);\n        } catch (t) {\n          return p.call(this, e);\n        }\n      }\n    }\n\n    function s() {\n      y && d && (y = !1, d.length ? h = d.concat(h) : g = -1, h.length && a());\n    }\n\n    function a() {\n      if (!y) {\n        var e = o(s);\n        y = !0;\n\n        for (var t = h.length; t;) {\n          for (d = h, h = []; ++g < t;) d && d[g].run();\n\n          g = -1, t = h.length;\n        }\n\n        d = null, y = !1, i(e);\n      }\n    }\n\n    function u(e, t) {\n      this.fun = e, this.array = t;\n    }\n\n    function c() {}\n\n    var f,\n        p,\n        l = e.exports = {};\n    !function () {\n      try {\n        f = \"function\" == typeof setTimeout ? setTimeout : n;\n      } catch (e) {\n        f = n;\n      }\n\n      try {\n        p = \"function\" == typeof clearTimeout ? clearTimeout : r;\n      } catch (e) {\n        p = r;\n      }\n    }();\n    var d,\n        h = [],\n        y = !1,\n        g = -1;\n    l.nextTick = function (e) {\n      var t = new Array(arguments.length - 1);\n      if (arguments.length > 1) for (var n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];\n      h.push(new u(e, t)), 1 !== h.length || y || o(a);\n    }, u.prototype.run = function () {\n      this.fun.apply(null, this.array);\n    }, l.title = \"browser\", l.browser = !0, l.env = {}, l.argv = [], l.version = \"\", l.versions = {}, l.on = c, l.addListener = c, l.once = c, l.off = c, l.removeListener = c, l.removeAllListeners = c, l.emit = c, l.prependListener = c, l.prependOnceListener = c, l.listeners = function (e) {\n      return [];\n    }, l.binding = function (e) {\n      throw new Error(\"process.binding is not supported\");\n    }, l.cwd = function () {\n      return \"/\";\n    }, l.chdir = function (e) {\n      throw new Error(\"process.chdir is not supported\");\n    }, l.umask = function () {\n      return 0;\n    };\n  }, function (e, t) {\n    var n;\n\n    n = function () {\n      return this;\n    }();\n\n    try {\n      n = n || Function(\"return this\")() || (0, eval)(\"this\");\n    } catch (e) {\n      \"object\" == typeof window && (n = window);\n    }\n\n    e.exports = n;\n  }, function (e, t, n) {\n    function r() {\n      return g.genRandomString(64);\n    }\n\n    function o() {\n      return g.genRandomString(64);\n    }\n\n    function i(e) {\n      return !(!e || !e.accessToken && !e.idToken || !Array.isArray(e.scopes));\n    }\n\n    function s(e, t, n) {\n      e.addEventListener ? e.addEventListener(t, n) : e.attachEvent(\"on\" + t, n);\n    }\n\n    function a(e, t, n) {\n      e.removeEventListener ? e.removeEventListener(t, n) : e.detachEvent(\"on\" + t, n);\n    }\n\n    function u(e) {\n      var t = document.createElement(\"iframe\");\n      return t.style.display = \"none\", t.src = e, document.body.appendChild(t);\n    }\n\n    function c(e, t) {\n      var n = t.popupTitle || \"External Identity Provider User Authentication\",\n          r = \"toolbar=no, scrollbars=yes, resizable=yes, top=100, left=500, width=600, height=600\";\n\n      if (g.isIE11OrLess()) {\n        var o = window.open(\"/\", n, r);\n        return o.location.href = e, o;\n      }\n\n      return window.open(e, n, r);\n    }\n\n    function f(e, t) {\n      var n = t || e.options.issuer || e.options.url;\n      return y.get(e, n + \"/.well-known/openid-configuration\", {\n        cacheResponse: !0\n      });\n    }\n\n    function p(e, t, n) {\n      return f(e, t).then(function (t) {\n        var r = t.jwks_uri,\n            o = w.getStorage(),\n            i = o[r];\n\n        if (i && Date.now() / 1e3 < i.expiresAt) {\n          var s = g.find(i.response.keys, {\n            kid: n\n          });\n          if (s) return s;\n        }\n\n        return w.clearStorage(r), y.get(e, r, {\n          cacheResponse: !0\n        }).then(function (e) {\n          var t = g.find(e.keys, {\n            kid: n\n          });\n          if (t) return t;\n          throw new v(\"The key id, \" + n + \", was not found in the server's keys\");\n        });\n      });\n    }\n\n    function l(e, t, n) {\n      var r = n.clientId,\n          o = n.issuer,\n          i = n.nonce;\n      if (!t || !o || !r) throw new v(\"The jwt, iss, and aud arguments are all required\");\n      if (i && t.nonce !== i) throw new v(\"OAuth flow response nonce doesn't match request nonce\");\n      var s = Math.floor(Date.now() / 1e3);\n      if (t.iss !== o) throw new v(\"The issuer [\" + t.iss + \"] does not match [\" + o + \"]\");\n      if (t.aud !== r) throw new v(\"The audience [\" + t.aud + \"] does not match [\" + r + \"]\");\n      if (t.iat > t.exp) throw new v(\"The JWT expired before it was issued\");\n      if (s - e.options.maxClockSkew > t.exp) throw new v(\"The JWT expired and is no longer valid\");\n      if (t.iat > s + e.options.maxClockSkew) throw new v(\"The JWT was issued in the future\");\n    }\n\n    function d(e, t, n) {\n      n = n || {};\n      var r = g.removeTrailingSlash(n.authorizeUrl) || e.options.authorizeUrl,\n          o = g.removeTrailingSlash(n.issuer) || e.options.issuer,\n          i = g.removeTrailingSlash(n.userinfoUrl) || e.options.userinfoUrl,\n          s = g.removeTrailingSlash(n.tokenUrl) || e.options.tokenUrl,\n          a = g.removeTrailingSlash(n.logoutUrl) || e.options.logoutUrl,\n          u = g.removeTrailingSlash(n.revokeUrl) || e.options.revokeUrl;\n      if (o && !/^https?:/.test(o) && (o = e.options.url + \"/oauth2/\" + o), !o && r && -1 !== t.responseType.indexOf(\"id_token\")) throw new v(\"Cannot request idToken with an authorizeUrl without an issuer\");\n\n      if (!o && t && -1 !== t.responseType.indexOf(\"token\")) {\n        if (r && !i) throw new v(\"Cannot request accessToken with an authorizeUrl without an issuer or userinfoUrl\");\n        if (i && !r) throw new v(\"Cannot request token with an userinfoUrl without an issuer or authorizeUrl\");\n      }\n\n      o = o || e.options.url, o = g.removeTrailingSlash(o);\n      var c = o;\n      return new RegExp(\"^https?://.*?/oauth2/.+\").test(c) || c.endsWith(\"/oauth2\") || (c += \"/oauth2\"), r = r || c + \"/v1/authorize\", i = i || c + \"/v1/userinfo\", s = s || c + \"/v1/token\", u = u || c + \"/v1/revoke\", a = a || c + \"/v1/logout\", {\n        issuer: o,\n        authorizeUrl: r,\n        userinfoUrl: i,\n        tokenUrl: s,\n        revokeUrl: u,\n        logoutUrl: a\n      };\n    }\n\n    function h(e) {\n      for (var t, n = /\\+/g, r = /([^&=]+)=?([^&]*)/g, o = e.substring(1), i = {};;) {\n        if (!(t = r.exec(o))) break;\n        var s = t[1],\n            a = t[2];\n        i[s] = \"id_token\" === s || \"access_token\" === s || \"code\" === s ? a : decodeURIComponent(a.replace(n, \" \"));\n      }\n\n      return i;\n    }\n\n    var y = n(3),\n        g = n(0),\n        m = n(4),\n        v = n(1),\n        w = m.getHttpCache();\n    e.exports = {\n      generateState: r,\n      generateNonce: o,\n      getWellKnown: f,\n      getKey: p,\n      validateClaims: l,\n      getOAuthUrls: d,\n      loadFrame: u,\n      loadPopup: c,\n      urlParamsToObject: h,\n      isToken: i,\n      addListener: s,\n      removeListener: a\n    };\n  }, function (e, t, n) {\n    var r = n(12),\n        o = n(4);\n    e.exports = n(15)(o, r);\n  }, function (e, t, n) {\n    function r(e, t, n) {\n      var r = n.data,\n          i = n.headers || {};\n      return \"application/json\" === (i[\"Content-Type\"] || i[\"content-type\"] || \"\") && r && \"string\" != typeof r && (r = JSON.stringify(r)), o(t, {\n        method: e,\n        headers: n.headers,\n        body: r,\n        credentials: !1 === n.withCredentials ? \"omit\" : \"include\"\n      }).then(function (e) {\n        var t = !e.ok,\n            n = e.status,\n            r = function (e) {\n          var r = {\n            responseText: e,\n            status: n\n          };\n          if (t) throw r;\n          return r;\n        };\n\n        return e.headers.get(\"Content-Type\") && e.headers.get(\"Content-Type\").toLowerCase().indexOf(\"application/json\") >= 0 ? e.json().then(r) : e.text().then(r);\n      });\n    }\n\n    var o = n(13);\n    e.exports = r;\n  }, function (e, t) {\n    var n = function (e) {\n      function t() {\n        this.fetch = !1, this.DOMException = e.DOMException;\n      }\n\n      return t.prototype = e, new t();\n    }(\"undefined\" != typeof self ? self : this);\n\n    !function (e) {\n      !function (t) {\n        function n(e) {\n          return e && DataView.prototype.isPrototypeOf(e);\n        }\n\n        function r(e) {\n          if (\"string\" != typeof e && (e = String(e)), /[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(e)) throw new TypeError(\"Invalid character in header field name\");\n          return e.toLowerCase();\n        }\n\n        function o(e) {\n          return \"string\" != typeof e && (e = String(e)), e;\n        }\n\n        function i(e) {\n          var t = {\n            next: function () {\n              var t = e.shift();\n              return {\n                done: void 0 === t,\n                value: t\n              };\n            }\n          };\n          return T.iterable && (t[Symbol.iterator] = function () {\n            return t;\n          }), t;\n        }\n\n        function s(e) {\n          this.map = {}, e instanceof s ? e.forEach(function (e, t) {\n            this.append(t, e);\n          }, this) : Array.isArray(e) ? e.forEach(function (e) {\n            this.append(e[0], e[1]);\n          }, this) : e && Object.getOwnPropertyNames(e).forEach(function (t) {\n            this.append(t, e[t]);\n          }, this);\n        }\n\n        function a(e) {\n          if (e.bodyUsed) return Promise.reject(new TypeError(\"Already read\"));\n          e.bodyUsed = !0;\n        }\n\n        function u(e) {\n          return new Promise(function (t, n) {\n            e.onload = function () {\n              t(e.result);\n            }, e.onerror = function () {\n              n(e.error);\n            };\n          });\n        }\n\n        function c(e) {\n          var t = new FileReader(),\n              n = u(t);\n          return t.readAsArrayBuffer(e), n;\n        }\n\n        function f(e) {\n          var t = new FileReader(),\n              n = u(t);\n          return t.readAsText(e), n;\n        }\n\n        function p(e) {\n          for (var t = new Uint8Array(e), n = new Array(t.length), r = 0; r < t.length; r++) n[r] = String.fromCharCode(t[r]);\n\n          return n.join(\"\");\n        }\n\n        function l(e) {\n          if (e.slice) return e.slice(0);\n          var t = new Uint8Array(e.byteLength);\n          return t.set(new Uint8Array(e)), t.buffer;\n        }\n\n        function d() {\n          return this.bodyUsed = !1, this._initBody = function (e) {\n            this._bodyInit = e, e ? \"string\" == typeof e ? this._bodyText = e : T.blob && Blob.prototype.isPrototypeOf(e) ? this._bodyBlob = e : T.formData && FormData.prototype.isPrototypeOf(e) ? this._bodyFormData = e : T.searchParams && URLSearchParams.prototype.isPrototypeOf(e) ? this._bodyText = e.toString() : T.arrayBuffer && T.blob && n(e) ? (this._bodyArrayBuffer = l(e.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer])) : T.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(e) || b(e)) ? this._bodyArrayBuffer = l(e) : this._bodyText = e = Object.prototype.toString.call(e) : this._bodyText = \"\", this.headers.get(\"content-type\") || (\"string\" == typeof e ? this.headers.set(\"content-type\", \"text/plain;charset=UTF-8\") : this._bodyBlob && this._bodyBlob.type ? this.headers.set(\"content-type\", this._bodyBlob.type) : T.searchParams && URLSearchParams.prototype.isPrototypeOf(e) && this.headers.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\"));\n          }, T.blob && (this.blob = function () {\n            var e = a(this);\n            if (e) return e;\n            if (this._bodyBlob) return Promise.resolve(this._bodyBlob);\n            if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n            if (this._bodyFormData) throw new Error(\"could not read FormData body as blob\");\n            return Promise.resolve(new Blob([this._bodyText]));\n          }, this.arrayBuffer = function () {\n            return this._bodyArrayBuffer ? a(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(c);\n          }), this.text = function () {\n            var e = a(this);\n            if (e) return e;\n            if (this._bodyBlob) return f(this._bodyBlob);\n            if (this._bodyArrayBuffer) return Promise.resolve(p(this._bodyArrayBuffer));\n            if (this._bodyFormData) throw new Error(\"could not read FormData body as text\");\n            return Promise.resolve(this._bodyText);\n          }, T.formData && (this.formData = function () {\n            return this.text().then(g);\n          }), this.json = function () {\n            return this.text().then(JSON.parse);\n          }, this;\n        }\n\n        function h(e) {\n          var t = e.toUpperCase();\n          return E.indexOf(t) > -1 ? t : e;\n        }\n\n        function y(e, t) {\n          t = t || {};\n          var n = t.body;\n\n          if (e instanceof y) {\n            if (e.bodyUsed) throw new TypeError(\"Already read\");\n            this.url = e.url, this.credentials = e.credentials, t.headers || (this.headers = new s(e.headers)), this.method = e.method, this.mode = e.mode, this.signal = e.signal, n || null == e._bodyInit || (n = e._bodyInit, e.bodyUsed = !0);\n          } else this.url = String(e);\n\n          if (this.credentials = t.credentials || this.credentials || \"same-origin\", !t.headers && this.headers || (this.headers = new s(t.headers)), this.method = h(t.method || this.method || \"GET\"), this.mode = t.mode || this.mode || null, this.signal = t.signal || this.signal, this.referrer = null, (\"GET\" === this.method || \"HEAD\" === this.method) && n) throw new TypeError(\"Body not allowed for GET or HEAD requests\");\n\n          this._initBody(n);\n        }\n\n        function g(e) {\n          var t = new FormData();\n          return e.trim().split(\"&\").forEach(function (e) {\n            if (e) {\n              var n = e.split(\"=\"),\n                  r = n.shift().replace(/\\+/g, \" \"),\n                  o = n.join(\"=\").replace(/\\+/g, \" \");\n              t.append(decodeURIComponent(r), decodeURIComponent(o));\n            }\n          }), t;\n        }\n\n        function m(e) {\n          var t = new s();\n          return e.replace(/\\r?\\n[\\t ]+/g, \" \").split(/\\r?\\n/).forEach(function (e) {\n            var n = e.split(\":\"),\n                r = n.shift().trim();\n\n            if (r) {\n              var o = n.join(\":\").trim();\n              t.append(r, o);\n            }\n          }), t;\n        }\n\n        function v(e, t) {\n          t || (t = {}), this.type = \"default\", this.status = void 0 === t.status ? 200 : t.status, this.ok = this.status >= 200 && this.status < 300, this.statusText = \"statusText\" in t ? t.statusText : \"OK\", this.headers = new s(t.headers), this.url = t.url || \"\", this._initBody(e);\n        }\n\n        function w(e, n) {\n          return new Promise(function (r, o) {\n            function i() {\n              a.abort();\n            }\n\n            var s = new y(e, n);\n            if (s.signal && s.signal.aborted) return o(new t.DOMException(\"Aborted\", \"AbortError\"));\n            var a = new XMLHttpRequest();\n            a.onload = function () {\n              var e = {\n                status: a.status,\n                statusText: a.statusText,\n                headers: m(a.getAllResponseHeaders() || \"\")\n              };\n              e.url = \"responseURL\" in a ? a.responseURL : e.headers.get(\"X-Request-URL\");\n              var t = \"response\" in a ? a.response : a.responseText;\n              r(new v(t, e));\n            }, a.onerror = function () {\n              o(new TypeError(\"Network request failed\"));\n            }, a.ontimeout = function () {\n              o(new TypeError(\"Network request failed\"));\n            }, a.onabort = function () {\n              o(new t.DOMException(\"Aborted\", \"AbortError\"));\n            }, a.open(s.method, s.url, !0), \"include\" === s.credentials ? a.withCredentials = !0 : \"omit\" === s.credentials && (a.withCredentials = !1), \"responseType\" in a && T.blob && (a.responseType = \"blob\"), s.headers.forEach(function (e, t) {\n              a.setRequestHeader(t, e);\n            }), s.signal && (s.signal.addEventListener(\"abort\", i), a.onreadystatechange = function () {\n              4 === a.readyState && s.signal.removeEventListener(\"abort\", i);\n            }), a.send(void 0 === s._bodyInit ? null : s._bodyInit);\n          });\n        }\n\n        var T = {\n          searchParams: \"URLSearchParams\" in e,\n          iterable: \"Symbol\" in e && \"iterator\" in Symbol,\n          blob: \"FileReader\" in e && \"Blob\" in e && function () {\n            try {\n              return new Blob(), !0;\n            } catch (e) {\n              return !1;\n            }\n          }(),\n          formData: \"FormData\" in e,\n          arrayBuffer: \"ArrayBuffer\" in e\n        };\n        if (T.arrayBuffer) var k = [\"[object Int8Array]\", \"[object Uint8Array]\", \"[object Uint8ClampedArray]\", \"[object Int16Array]\", \"[object Uint16Array]\", \"[object Int32Array]\", \"[object Uint32Array]\", \"[object Float32Array]\", \"[object Float64Array]\"],\n            b = ArrayBuffer.isView || function (e) {\n          return e && k.indexOf(Object.prototype.toString.call(e)) > -1;\n        };\n        s.prototype.append = function (e, t) {\n          e = r(e), t = o(t);\n          var n = this.map[e];\n          this.map[e] = n ? n + \", \" + t : t;\n        }, s.prototype.delete = function (e) {\n          delete this.map[r(e)];\n        }, s.prototype.get = function (e) {\n          return e = r(e), this.has(e) ? this.map[e] : null;\n        }, s.prototype.has = function (e) {\n          return this.map.hasOwnProperty(r(e));\n        }, s.prototype.set = function (e, t) {\n          this.map[r(e)] = o(t);\n        }, s.prototype.forEach = function (e, t) {\n          for (var n in this.map) this.map.hasOwnProperty(n) && e.call(t, this.map[n], n, this);\n        }, s.prototype.keys = function () {\n          var e = [];\n          return this.forEach(function (t, n) {\n            e.push(n);\n          }), i(e);\n        }, s.prototype.values = function () {\n          var e = [];\n          return this.forEach(function (t) {\n            e.push(t);\n          }), i(e);\n        }, s.prototype.entries = function () {\n          var e = [];\n          return this.forEach(function (t, n) {\n            e.push([n, t]);\n          }), i(e);\n        }, T.iterable && (s.prototype[Symbol.iterator] = s.prototype.entries);\n        var E = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\"];\n        y.prototype.clone = function () {\n          return new y(this, {\n            body: this._bodyInit\n          });\n        }, d.call(y.prototype), d.call(v.prototype), v.prototype.clone = function () {\n          return new v(this._bodyInit, {\n            status: this.status,\n            statusText: this.statusText,\n            headers: new s(this.headers),\n            url: this.url\n          });\n        }, v.error = function () {\n          var e = new v(null, {\n            status: 0,\n            statusText: \"\"\n          });\n          return e.type = \"error\", e;\n        };\n        var S = [301, 302, 303, 307, 308];\n        v.redirect = function (e, t) {\n          if (-1 === S.indexOf(t)) throw new RangeError(\"Invalid status code\");\n          return new v(null, {\n            status: t,\n            headers: {\n              location: e\n            }\n          });\n        }, t.DOMException = e.DOMException;\n\n        try {\n          new t.DOMException();\n        } catch (e) {\n          t.DOMException = function (e, t) {\n            this.message = e, this.name = t;\n            var n = Error(e);\n            this.stack = n.stack;\n          }, t.DOMException.prototype = Object.create(Error.prototype), t.DOMException.prototype.constructor = t.DOMException;\n        }\n\n        w.polyfill = !0, e.fetch || (e.fetch = w, e.Headers = s, e.Request = y, e.Response = v), t.Headers = s, t.Request = y, t.Response = v, t.fetch = w;\n      }({});\n    }(n), delete n.fetch.polyfill, t = n.fetch, t.default = n.fetch, t.fetch = n.fetch, t.Headers = n.Headers, t.Request = n.Request, t.Response = n.Response, e.exports = t;\n  }, function (e, t, n) {\n    var r, o;\n    !function (i) {\n      var s = !1;\n\n      if (r = i, void 0 !== (o = \"function\" == typeof r ? r.call(t, n, t, e) : r) && (e.exports = o), s = !0, e.exports = i(), s = !0, !s) {\n        var a = window.Cookies,\n            u = window.Cookies = i();\n\n        u.noConflict = function () {\n          return window.Cookies = a, u;\n        };\n      }\n    }(function () {\n      function e() {\n        for (var e = 0, t = {}; e < arguments.length; e++) {\n          var n = arguments[e];\n\n          for (var r in n) t[r] = n[r];\n        }\n\n        return t;\n      }\n\n      function t(n) {\n        function r(t, o, i) {\n          var s;\n\n          if (\"undefined\" != typeof document) {\n            if (arguments.length > 1) {\n              if (i = e({\n                path: \"/\"\n              }, r.defaults, i), \"number\" == typeof i.expires) {\n                var a = new Date();\n                a.setMilliseconds(a.getMilliseconds() + 864e5 * i.expires), i.expires = a;\n              }\n\n              i.expires = i.expires ? i.expires.toUTCString() : \"\";\n\n              try {\n                s = JSON.stringify(o), /^[\\{\\[]/.test(s) && (o = s);\n              } catch (e) {}\n\n              o = n.write ? n.write(o, t) : encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), t = encodeURIComponent(String(t)), t = t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent), t = t.replace(/[\\(\\)]/g, escape);\n              var u = \"\";\n\n              for (var c in i) i[c] && (u += \"; \" + c, !0 !== i[c] && (u += \"=\" + i[c]));\n\n              return document.cookie = t + \"=\" + o + u;\n            }\n\n            t || (s = {});\n\n            for (var f = document.cookie ? document.cookie.split(\"; \") : [], p = /(%[0-9A-Z]{2})+/g, l = 0; l < f.length; l++) {\n              var d = f[l].split(\"=\"),\n                  h = d.slice(1).join(\"=\");\n              this.json || '\"' !== h.charAt(0) || (h = h.slice(1, -1));\n\n              try {\n                var y = d[0].replace(p, decodeURIComponent);\n                if (h = n.read ? n.read(h, y) : n(h, y) || h.replace(p, decodeURIComponent), this.json) try {\n                  h = JSON.parse(h);\n                } catch (e) {}\n\n                if (t === y) {\n                  s = h;\n                  break;\n                }\n\n                t || (s[y] = h);\n              } catch (e) {}\n            }\n\n            return s;\n          }\n        }\n\n        return r.set = r, r.get = function (e) {\n          return r.call(r, e);\n        }, r.getJSON = function () {\n          return r.apply({\n            json: !0\n          }, [].slice.call(arguments));\n        }, r.defaults = {}, r.remove = function (t, n) {\n          r(t, \"\", e(n, {\n            expires: -1\n          }));\n        }, r.withConverter = t, r;\n      }\n\n      return t(function () {});\n    });\n  }, function (e, t, n) {\n    function r(e) {\n      var t = this,\n          n = s.getValidUrl(e),\n          r = e.pkce || \"authorization_code\" === e.grantType;\n\n      if (this.options = {\n        url: g.removeTrailingSlash(n),\n        clientId: e.clientId,\n        issuer: g.removeTrailingSlash(e.issuer),\n        authorizeUrl: g.removeTrailingSlash(e.authorizeUrl),\n        userinfoUrl: g.removeTrailingSlash(e.userinfoUrl),\n        tokenUrl: g.removeTrailingSlash(e.tokenUrl),\n        revokeUrl: g.removeTrailingSlash(e.revokeUrl),\n        logoutUrl: g.removeTrailingSlash(e.logoutUrl),\n        pkce: r,\n        redirectUri: e.redirectUri,\n        postLogoutRedirectUri: e.postLogoutRedirectUri,\n        responseMode: e.responseMode,\n        httpRequestClient: e.httpRequestClient,\n        storageUtil: e.storageUtil,\n        transformErrorXHR: e.transformErrorXHR,\n        headers: e.headers,\n        onSessionExpired: e.onSessionExpired\n      }, this.options.pkce && !t.features.isPKCESupported()) {\n        var c = \"PKCE requires a modern browser with encryption support running in a secure context.\";\n        throw t.features.isHTTPS() || (c += \"\\nThe current page is not being served with HTTPS protocol. Try using HTTPS.\"), t.features.hasTextEncoder() || (c += '\\n\"TextEncoder\" is not defined. You may need a polyfill/shim for this browser.'), new i(c);\n      }\n\n      this.userAgent = \"okta-auth-js-2.13.2\", e.maxClockSkew || 0 === e.maxClockSkew ? this.options.maxClockSkew = e.maxClockSkew : this.options.maxClockSkew = a.DEFAULT_MAX_CLOCK_SKEW, this.options.ignoreSignature = !!e.ignoreSignature, t.session = {\n        close: g.bind(l.closeSession, null, t),\n        exists: g.bind(l.sessionExists, null, t),\n        get: g.bind(l.getSession, null, t),\n        refresh: g.bind(l.refreshSession, null, t),\n        setCookieAndRedirect: g.bind(l.setCookieAndRedirect, null, t)\n      }, t.tx = {\n        status: g.bind(y.transactionStatus, null, t),\n        resume: g.bind(y.resumeTransaction, null, t),\n        exists: g.bind(y.transactionExists, null, t),\n        introspect: g.bind(y.introspect, null, t)\n      }, t.tx.exists._get = function (e) {\n        return u.get(e);\n      }, t.idToken = {\n        authorize: {\n          _getLocationHref: function () {\n            return window.location.href;\n          }\n        }\n      }, t.token = {\n        getWithoutPrompt: g.bind(d.getWithoutPrompt, null, t),\n        getWithPopup: g.bind(d.getWithPopup, null, t),\n        getWithRedirect: g.bind(d.getWithRedirect, null, t),\n        parseFromUrl: g.bind(d.parseFromUrl, null, t),\n        decode: d.decodeToken,\n        revoke: g.bind(d.revokeToken, null, t),\n        renew: g.bind(d.renewToken, null, t),\n        getUserInfo: g.bind(d.getUserInfo, null, t),\n        verify: g.bind(d.verifyToken, null, t)\n      }, t.token.getWithRedirect._setLocation = function (e) {\n        window.location = e;\n      }, t.token.parseFromUrl._getHistory = function () {\n        return window.history;\n      }, t.token.parseFromUrl._getLocation = function () {\n        return window.location;\n      }, t.token.parseFromUrl._getDocument = function () {\n        return window.document;\n      }, t.fingerprint._getUserAgent = function () {\n        return navigator.userAgent;\n      };\n      var f = /windows phone|iemobile|wpdesktop/i;\n      t.features.isFingerprintSupported = function () {\n        var e = t.fingerprint._getUserAgent();\n\n        return e && !f.test(e);\n      }, t.emitter = new o(), t.tokenManager = new h(t, e.tokenManager), t.tokenManager.on(\"error\", this._onTokenManagerError, this);\n    }\n\n    n(16);\n    var o = n(18),\n        i = n(1),\n        s = n(19),\n        a = n(2),\n        u = n(4).storage,\n        c = n(3),\n        f = n(10),\n        p = n(5),\n        l = n(24),\n        d = n(25),\n        h = n(29),\n        y = n(7),\n        g = n(0),\n        m = r.prototype;\n    m._onTokenManagerError = function (e) {\n      \"login_required\" === e.errorCode && e.accessToken && (this.options.onSessionExpired ? this.options.onSessionExpired() : console.error(\"Session has expired or was closed outside the application.\"));\n    }, m.features = {}, m.features.isPopupPostMessageSupported = function () {\n      var e = document.documentMode && document.documentMode < 10;\n      return !(!window.postMessage || e);\n    }, m.features.isTokenVerifySupported = function () {\n      return \"undefined\" != typeof crypto && crypto.subtle && \"undefined\" != typeof Uint8Array;\n    }, m.features.hasTextEncoder = function () {\n      return \"undefined\" != typeof TextEncoder;\n    }, m.features.isPKCESupported = function () {\n      return m.features.isTokenVerifySupported() && m.features.hasTextEncoder();\n    }, m.features.isHTTPS = function () {\n      return \"https:\" === window.location.protocol;\n    }, m.signIn = function (e) {\n      function t(t) {\n        return delete e.sendFingerprint, y.postToTransaction(n, \"/api/v1/authn\", e, t);\n      }\n\n      var n = this;\n      return e = g.clone(e || {}), e.sendFingerprint ? n.fingerprint().then(function (e) {\n        return t({\n          headers: {\n            \"X-Device-Fingerprint\": e\n          }\n        });\n      }) : t();\n    }, m.signOut = function (e) {\n      function t() {\n        return s.session.close().catch(function (e) {\n          if (\"AuthApiError\" !== e.name) throw e;\n        });\n      }\n\n      e = g.extend({}, e);\n      var n = e.postLogoutRedirectUri || this.options.postLogoutRedirectUri,\n          r = e.accessToken,\n          o = e.revokeAccessToken,\n          i = e.idToken,\n          s = this,\n          a = f.getOAuthUrls(s).logoutUrl;\n      return p.allSettled([function () {\n        return new p().then(function () {\n          return o && void 0 === r ? s.tokenManager.get(\"token\") : r;\n        });\n      }(), function () {\n        return new p().then(function () {\n          return n && void 0 === i ? s.tokenManager.get(\"idToken\") : i;\n        });\n      }()]).then(function (e) {\n        if (r = e[0].value, i = e[1].value, s.tokenManager.clear(), o && r) return s.token.revoke(r).catch(function (e) {\n          if (\"AuthApiError\" !== e.name) throw e;\n        });\n      }).then(function () {\n        if (!n) return t();\n        if (!i) return t().catch(function (e) {\n          console.log(\"Unhandled exception while closing session\", e);\n        }).then(function () {\n          window.location.assign(n);\n        });\n        var r = e.state,\n            o = i.idToken,\n            s = a + \"?id_token_hint=\" + encodeURIComponent(o) + \"&post_logout_redirect_uri=\" + encodeURIComponent(n);\n        r && (s += \"&state=\" + encodeURIComponent(r)), window.location.assign(s);\n      });\n    }, s.addSharedPrototypes(m), m.webfinger = function (e) {\n      var t = \"/.well-known/webfinger\" + g.toQueryParams(e),\n          n = {\n        headers: {\n          Accept: \"application/jrd+json\"\n        }\n      };\n      return c.get(this, t, n);\n    }, m.fingerprint = function (e) {\n      function t(e) {\n        if (e && e.data && e.origin === n.options.url) {\n          try {\n            var t = JSON.parse(e.data);\n          } catch (e) {\n            return r.reject(new i(\"Unable to parse iframe response\"));\n          }\n\n          if (t) return \"FingerprintAvailable\" === t.type ? r.resolve(t.fingerprint) : void (\"FingerprintServiceReady\" === t.type && e.source.postMessage(JSON.stringify({\n            type: \"GetFingerprint\"\n          }), e.origin));\n        }\n      }\n\n      e = e || {};\n      var n = this;\n      if (!n.features.isFingerprintSupported()) return p.reject(new i(\"Fingerprinting is not supported on this device\"));\n      var r = p.defer(),\n          o = document.createElement(\"iframe\");\n      o.style.display = \"none\", f.addListener(window, \"message\", t), o.src = n.options.url + \"/auth/services/devicefingerprint\", document.body.appendChild(o);\n      var s = setTimeout(function () {\n        r.reject(new i(\"Fingerprinting timed out\"));\n      }, e.timeout || 15e3);\n      return r.promise.fin(function () {\n        clearTimeout(s), f.removeListener(window, \"message\", t), document.body.contains(o) && o.parentElement.removeChild(o);\n      });\n    }, e.exports = s.buildOktaAuth(r);\n  }, function (e, t, n) {\n    n(17), Array.prototype.indexOf || (Array.prototype.indexOf = function (e, t) {\n      var n;\n      if (null == this) throw new TypeError('\"this\" is null or not defined');\n      var r = Object(this),\n          o = r.length >>> 0;\n      if (0 === o) return -1;\n      var i = +t || 0;\n      if (Math.abs(i) === 1 / 0 && (i = 0), i >= o) return -1;\n\n      for (n = Math.max(i >= 0 ? i : o - Math.abs(i), 0); n < o;) {\n        if (n in r && r[n] === e) return n;\n        n++;\n      }\n\n      return -1;\n    }), Array.isArray || (Array.isArray = function (e) {\n      return \"[object Array]\" === Object.prototype.toString.call(e);\n    });\n  }, function (e, t, n) {\n    !function () {\n      function e(e) {\n        this.message = e;\n      }\n\n      var n = t,\n          r = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n      e.prototype = new Error(), e.prototype.name = \"InvalidCharacterError\", n.btoa || (n.btoa = function (t) {\n        for (var n, o, i = String(t), s = 0, a = r, u = \"\"; i.charAt(0 | s) || (a = \"=\", s % 1); u += a.charAt(63 & n >> 8 - s % 1 * 8)) {\n          if ((o = i.charCodeAt(s += .75)) > 255) throw new e(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\n          n = n << 8 | o;\n        }\n\n        return u;\n      }), n.atob || (n.atob = function (t) {\n        var n = String(t).replace(/=+$/, \"\");\n        if (n.length % 4 == 1) throw new e(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n\n        for (var o, i, s = 0, a = 0, u = \"\"; i = n.charAt(a++); ~i && (o = s % 4 ? 64 * o + i : i, s++ % 4) ? u += String.fromCharCode(255 & o >> (-2 * s & 6)) : 0) i = r.indexOf(i);\n\n        return u;\n      });\n    }();\n  }, function (e, t) {\n    function n() {}\n\n    n.prototype = {\n      on: function (e, t, n) {\n        var r = this.e || (this.e = {});\n        return (r[e] || (r[e] = [])).push({\n          fn: t,\n          ctx: n\n        }), this;\n      },\n      once: function (e, t, n) {\n        function r() {\n          o.off(e, r), t.apply(n, arguments);\n        }\n\n        var o = this;\n        return r._ = t, this.on(e, r, n);\n      },\n      emit: function (e) {\n        var t = [].slice.call(arguments, 1),\n            n = ((this.e || (this.e = {}))[e] || []).slice(),\n            r = 0,\n            o = n.length;\n\n        for (r; r < o; r++) n[r].fn.apply(n[r].ctx, t);\n\n        return this;\n      },\n      off: function (e, t) {\n        var n = this.e || (this.e = {}),\n            r = n[e],\n            o = [];\n        if (r && t) for (var i = 0, s = r.length; i < s; i++) r[i].fn !== t && r[i].fn._ !== t && o.push(r[i]);\n        return o.length ? n[e] = o : delete n[e], this;\n      }\n    }, e.exports = n;\n  }, function (e, t, n) {\n    function r(e) {\n      if (!e) throw new s(\"No arguments passed to constructor. Required usage: new OktaAuth(args)\");\n      var t = e.url;\n\n      if (!t) {\n        var n = new RegExp(\"^http?s?://.+\");\n        if (!e.issuer || !n.test(e.issuer)) throw new s('No url passed to constructor. Required usage: new OktaAuth({url: \"https://{yourOktaDomain}.com\"})');\n        t = e.issuer.split(\"/oauth2/\")[0];\n      }\n\n      if (-1 !== t.indexOf(\"-admin.\")) throw new s('URL passed to constructor contains \"-admin\" in subdomain. Required usage: new OktaAuth({url: \"https://{yourOktaDomain}.com})');\n      return t;\n    }\n\n    function o(e) {\n      e.forgotPassword = function (e) {\n        return a.postToTransaction(this, \"/api/v1/authn/recovery/password\", e);\n      }, e.unlockAccount = function (e) {\n        return a.postToTransaction(this, \"/api/v1/authn/recovery/unlock\", e);\n      }, e.verifyRecoveryToken = function (e) {\n        return a.postToTransaction(this, \"/api/v1/authn/recovery/token\", e);\n      };\n    }\n\n    function i(e) {\n      return function (t, n) {\n        function r(o) {\n          if (!(this instanceof r)) return new r(o);\n          o && (o.storageUtil = t, o.ajaxRequest ? (u.deprecate(\"ajaxRequest is being deprecated, use httpRequestClient attribute instead.\"), o.httpRequestClient = o.ajaxRequest) : o.httpRequestClient || (o.httpRequestClient = n)), u.bind(e, this)(o);\n        }\n\n        return r.prototype = e.prototype, r.prototype.constructor = r, r.features = e.prototype.features, r;\n      };\n    }\n\n    var s = n(1),\n        a = n(7),\n        u = n(0);\n    e.exports = {\n      addSharedPrototypes: o,\n      buildOktaAuth: i,\n      getValidUrl: r\n    };\n  }, function (e, t, n) {\n    (function (e) {\n      function r(e, t) {\n        this._id = e, this._clearFn = t;\n      }\n\n      var o = void 0 !== e && e || \"undefined\" != typeof self && self || window,\n          i = Function.prototype.apply;\n      t.setTimeout = function () {\n        return new r(i.call(setTimeout, o, arguments), clearTimeout);\n      }, t.setInterval = function () {\n        return new r(i.call(setInterval, o, arguments), clearInterval);\n      }, t.clearTimeout = t.clearInterval = function (e) {\n        e && e.close();\n      }, r.prototype.unref = r.prototype.ref = function () {}, r.prototype.close = function () {\n        this._clearFn.call(o, this._id);\n      }, t.enroll = function (e, t) {\n        clearTimeout(e._idleTimeoutId), e._idleTimeout = t;\n      }, t.unenroll = function (e) {\n        clearTimeout(e._idleTimeoutId), e._idleTimeout = -1;\n      }, t._unrefActive = t.active = function (e) {\n        clearTimeout(e._idleTimeoutId);\n        var t = e._idleTimeout;\n        t >= 0 && (e._idleTimeoutId = setTimeout(function () {\n          e._onTimeout && e._onTimeout();\n        }, t));\n      }, n(21), t.setImmediate = \"undefined\" != typeof self && self.setImmediate || void 0 !== e && e.setImmediate || this && this.setImmediate, t.clearImmediate = \"undefined\" != typeof self && self.clearImmediate || void 0 !== e && e.clearImmediate || this && this.clearImmediate;\n    }).call(t, n(9));\n  }, function (e, t, n) {\n    (function (e, t) {\n      !function (e, n) {\n        \"use strict\";\n\n        function r(e) {\n          \"function\" != typeof e && (e = new Function(\"\" + e));\n\n          for (var t = new Array(arguments.length - 1), n = 0; n < t.length; n++) t[n] = arguments[n + 1];\n\n          var r = {\n            callback: e,\n            args: t\n          };\n          return c[u] = r, a(u), u++;\n        }\n\n        function o(e) {\n          delete c[e];\n        }\n\n        function i(e) {\n          var t = e.callback,\n              r = e.args;\n\n          switch (r.length) {\n            case 0:\n              t();\n              break;\n\n            case 1:\n              t(r[0]);\n              break;\n\n            case 2:\n              t(r[0], r[1]);\n              break;\n\n            case 3:\n              t(r[0], r[1], r[2]);\n              break;\n\n            default:\n              t.apply(n, r);\n          }\n        }\n\n        function s(e) {\n          if (f) setTimeout(s, 0, e);else {\n            var t = c[e];\n\n            if (t) {\n              f = !0;\n\n              try {\n                i(t);\n              } finally {\n                o(e), f = !1;\n              }\n            }\n          }\n        }\n\n        if (!e.setImmediate) {\n          var a,\n              u = 1,\n              c = {},\n              f = !1,\n              p = e.document,\n              l = Object.getPrototypeOf && Object.getPrototypeOf(e);\n          l = l && l.setTimeout ? l : e, \"[object process]\" === {}.toString.call(e.process) ? function () {\n            a = function (e) {\n              t.nextTick(function () {\n                s(e);\n              });\n            };\n          }() : function () {\n            if (e.postMessage && !e.importScripts) {\n              var t = !0,\n                  n = e.onmessage;\n              return e.onmessage = function () {\n                t = !1;\n              }, e.postMessage(\"\", \"*\"), e.onmessage = n, t;\n            }\n          }() ? function () {\n            var t = \"setImmediate$\" + Math.random() + \"$\",\n                n = function (n) {\n              n.source === e && \"string\" == typeof n.data && 0 === n.data.indexOf(t) && s(+n.data.slice(t.length));\n            };\n\n            e.addEventListener ? e.addEventListener(\"message\", n, !1) : e.attachEvent(\"onmessage\", n), a = function (n) {\n              e.postMessage(t + n, \"*\");\n            };\n          }() : e.MessageChannel ? function () {\n            var e = new MessageChannel();\n            e.port1.onmessage = function (e) {\n              s(e.data);\n            }, a = function (t) {\n              e.port2.postMessage(t);\n            };\n          }() : p && \"onreadystatechange\" in p.createElement(\"script\") ? function () {\n            var e = p.documentElement;\n\n            a = function (t) {\n              var n = p.createElement(\"script\");\n              n.onreadystatechange = function () {\n                s(t), n.onreadystatechange = null, e.removeChild(n), n = null;\n              }, e.appendChild(n);\n            };\n          }() : function () {\n            a = function (e) {\n              setTimeout(s, 0, e);\n            };\n          }(), l.setImmediate = r, l.clearImmediate = o;\n        }\n      }(\"undefined\" == typeof self ? void 0 === e ? this : e : self);\n    }).call(t, n(9), n(8));\n  }, function (e, t) {\n    function n(e, t) {\n      this.name = \"AuthApiError\", this.message = e.errorSummary, this.errorSummary = e.errorSummary, this.errorCode = e.errorCode, this.errorLink = e.errorLink, this.errorId = e.errorId, this.errorCauses = e.errorCauses, t && (this.xhr = t);\n    }\n\n    n.prototype = new Error(), e.exports = n;\n  }, function (e, t) {\n    function n() {\n      this.name = \"AuthPollStopError\", this.message = \"The poll was stopped by the sdk\";\n    }\n\n    n.prototype = new Error(), e.exports = n;\n  }, function (e, t, n) {\n    function r(e) {\n      return e.session.get().then(function (e) {\n        return \"ACTIVE\" === e.status;\n      }).fail(function () {\n        return !1;\n      });\n    }\n\n    function o(e) {\n      return c.get(e, \"/api/v1/sessions/me\").then(function (t) {\n        var n = u.omit(t, \"_links\");\n        return n.refresh = function () {\n          return c.post(e, u.getLink(t, \"refresh\").href);\n        }, n.user = function () {\n          return c.get(e, u.getLink(t, \"user\").href);\n        }, n;\n      }).fail(function () {\n        return {\n          status: \"INACTIVE\"\n        };\n      });\n    }\n\n    function i(e) {\n      return c.httpRequest(e, {\n        url: e.options.url + \"/api/v1/sessions/me\",\n        method: \"DELETE\"\n      });\n    }\n\n    function s(e) {\n      return c.post(e, \"/api/v1/sessions/me/lifecycle/refresh\");\n    }\n\n    function a(e, t, n) {\n      n = n || window.location.href, window.location = e.options.url + \"/login/sessionCookieRedirect\" + u.toQueryParams({\n        checkAccountSetupComplete: !0,\n        token: t,\n        redirectUrl: n\n      });\n    }\n\n    var u = n(0),\n        c = n(3);\n    e.exports = {\n      sessionExists: r,\n      getSession: o,\n      closeSession: i,\n      refreshSession: s,\n      setCookieAndRedirect: a\n    };\n  }, function (e, t, n) {\n    function r(e, t) {\n      return new _().then(function () {\n        if (!t || !t.accessToken) throw new U(\"A valid access token object is required\");\n        var n = e.options.clientId;\n        if (!n) throw new U(\"A clientId must be specified in the OktaAuth constructor to revoke a token\");\n        var r = x.getOAuthUrls(e).revokeUrl,\n            o = t.accessToken,\n            i = A.toQueryParams({\n          token_type_hint: \"access_token\",\n          token: o\n        }).slice(1),\n            s = btoa(n);\n        return S.post(e, r, i, {\n          headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\n            Authorization: \"Basic \" + s\n          }\n        });\n      });\n    }\n\n    function o(e) {\n      var t,\n          n = e.split(\".\");\n\n      try {\n        t = {\n          header: JSON.parse(A.base64UrlToString(n[0])),\n          payload: JSON.parse(A.base64UrlToString(n[1])),\n          signature: n[2]\n        };\n      } catch (e) {\n        throw new U(\"Malformed token\");\n      }\n\n      return t;\n    }\n\n    function i(e, t, n) {\n      return new _().then(function () {\n        if (!t || !t.idToken) throw new U(\"Only idTokens may be verified\");\n        var r = o(t.idToken),\n            i = {\n          clientId: e.options.clientId,\n          issuer: e.options.issuer || e.options.url,\n          ignoreSignature: e.options.ignoreSignature\n        };\n        return A.extend(i, n), x.validateClaims(e, r.payload, i), 1 != i.ignoreSignature && e.features.isTokenVerifySupported() ? x.getKey(e, t.issuer, r.header.kid).then(function (e) {\n          return O.verifyToken(t.idToken, e);\n        }).then(function (e) {\n          if (!e) throw new U(\"The token signature is not valid\");\n          return t;\n        }) : t;\n      });\n    }\n\n    function s(e, t, n) {\n      function r(t) {\n        if (t.data && t.data.state === n) return t.origin !== e.options.url ? o.reject(new U(\"The request does not match client configuration\")) : void o.resolve(t.data);\n      }\n\n      var o = _.defer();\n\n      return x.addListener(window, \"message\", r), o.promise.timeout(t || 12e4, new U(\"OAuth flow timed out\")).fin(function () {\n        x.removeListener(window, \"message\", r);\n      });\n    }\n\n    function a(e, t, n) {\n      function r() {\n        try {\n          t && t.location && t.location.hash ? o.resolve(x.hashToObject(t.location.hash)) : t && !t.closed && setTimeout(r, 500);\n        } catch (e) {\n          setTimeout(r, 500);\n        }\n      }\n\n      var o = _.defer();\n\n      return r(), o.promise.timeout(n || 12e4, new U(\"OAuth flow timed out\"));\n    }\n\n    function u(e, t, n, r) {\n      var o = P.loadMeta(e),\n          i = {\n        clientId: t.clientId,\n        authorizationCode: n,\n        codeVerifier: o.codeVerifier,\n        redirectUri: o.redirectUri\n      };\n      return P.getToken(e, i, r).then(function (e) {\n        return c(e, i), e;\n      }).fin(function () {\n        P.clearMeta(e);\n      });\n    }\n\n    function c(e, t) {\n      if (e.error || e.error_description) throw new C(e.error, e.error_description);\n      if (e.state !== t.state) throw new U(\"OAuth flow response state doesn't match request state\");\n    }\n\n    function f(e, t, n, r) {\n      r = r || {};\n      var o = t.responseType,\n          s = A.clone(t.scopes),\n          a = t.clientId || e.options.clientId;\n      return new _().then(function () {\n        return c(n, t), n.code ? (o = [\"token\", \"id_token\"], u(e, t, n.code, r)) : n;\n      }).then(function (n) {\n        var o = {};\n\n        if (n.access_token && (o.token = {\n          accessToken: n.access_token,\n          expiresAt: Number(n.expires_in) + Math.floor(Date.now() / 1e3),\n          tokenType: n.token_type,\n          scopes: s,\n          authorizeUrl: r.authorizeUrl,\n          userinfoUrl: r.userinfoUrl\n        }), n.id_token) {\n          var u = e.token.decode(n.id_token),\n              c = {\n            idToken: n.id_token,\n            claims: u.payload,\n            expiresAt: u.payload.exp,\n            scopes: s,\n            authorizeUrl: r.authorizeUrl,\n            issuer: r.issuer,\n            clientId: a\n          },\n              f = {\n            clientId: a,\n            issuer: r.issuer,\n            nonce: t.nonce\n          };\n          return void 0 !== t.ignoreSignature && (f.ignoreSignature = t.ignoreSignature), i(e, c, f).then(function () {\n            return o.id_token = c, o;\n          });\n        }\n\n        return o;\n      }).then(function (e) {\n        return Array.isArray(o) ? ([\"token\", \"id_token\"].filter(function (e) {\n          return -1 !== o.indexOf(e);\n        }).forEach(function (t) {\n          if (!e[t]) throw new U(\"Unable to parse OAuth flow response: \" + t + \" was not returned.\");\n        }), o.map(function (t) {\n          return e[t];\n        })) : e[o];\n      });\n    }\n\n    function p(e) {\n      return {\n        pkce: e.options.pkce || !1,\n        clientId: e.options.clientId,\n        redirectUri: e.options.redirectUri || window.location.href,\n        responseType: \"id_token\",\n        responseMode: \"okta_post_message\",\n        state: x.generateState(),\n        nonce: x.generateNonce(),\n        scopes: [\"openid\", \"email\"],\n        ignoreSignature: e.options.ignoreSignature\n      };\n    }\n\n    function l(e) {\n      if (!e.clientId) throw new U(\"A clientId must be specified in the OktaAuth constructor to get a token\");\n      if (A.isString(e.responseType) && -1 !== e.responseType.indexOf(\" \")) throw new U(\"Multiple OAuth responseTypes must be defined as an array\");\n      var t = A.removeNils({\n        client_id: e.clientId,\n        code_challenge: e.codeChallenge,\n        code_challenge_method: e.codeChallengeMethod,\n        display: e.display,\n        idp: e.idp,\n        idp_scope: e.idpScope,\n        login_hint: e.loginHint,\n        max_age: e.maxAge,\n        nonce: e.nonce,\n        prompt: e.prompt,\n        redirect_uri: e.redirectUri,\n        response_mode: e.responseMode,\n        response_type: e.responseType,\n        sessionToken: e.sessionToken,\n        state: e.state\n      });\n      if ([\"idp_scope\", \"response_type\"].forEach(function (e) {\n        Array.isArray(t[e]) && (t[e] = t[e].join(\" \"));\n      }), -1 !== e.responseType.indexOf(\"id_token\") && -1 === e.scopes.indexOf(\"openid\")) throw new U(\"openid scope must be specified in the scopes argument when requesting an id_token\");\n      return t.scope = e.scopes.join(\" \"), t;\n    }\n\n    function d(e) {\n      var t = l(e);\n      return A.toQueryParams(t);\n    }\n\n    function h(e, t, n) {\n      return t = t || {}, n = n || {}, m(e, t).then(function (r) {\n        function o(e) {\n          return /^(https?\\:\\/\\/)?([^:\\/?#]*(?:\\:[0-9]+)?)/.exec(e)[0];\n        }\n\n        function i(e) {\n          if (!e || e.closed) return b.reject(new U(\"Unable to parse OAuth flow response\")), !0;\n        }\n\n        var u = {\n          prompt: \"none\",\n          responseMode: \"okta_post_message\",\n          display: null\n        },\n            c = {\n          display: \"popup\"\n        };\n        t.sessionToken ? A.extend(r, u) : t.idp && A.extend(r, c);\n        var p, l, h;\n\n        try {\n          h = x.getOAuthUrls(e, r, n), l = t.codeVerifier ? h.tokenUrl : h.authorizeUrl, p = l + d(r);\n        } catch (e) {\n          return _.reject(e);\n        }\n\n        switch (r.sessionToken || null === r.display ? \"IFRAME\" : \"popup\" === r.display ? \"POPUP\" : \"IMPLICIT\") {\n          case \"IFRAME\":\n            var y = s(e, n.timeout, r.state),\n                g = x.loadFrame(p);\n            return y.then(function (t) {\n              return f(e, r, t, h);\n            }).fin(function () {\n              document.body.contains(g) && g.parentElement.removeChild(g);\n            });\n\n          case \"POPUP\":\n            var m;\n\n            if (\"okta_post_message\" === r.responseMode) {\n              if (!e.features.isPopupPostMessageSupported()) return _.reject(new U(\"This browser doesn't have full postMessage support\"));\n              m = s(e, n.timeout, r.state);\n            }\n\n            var v = {\n              popupTitle: n.popupTitle\n            },\n                w = x.loadPopup(p, v);\n\n            if (\"fragment\" === r.responseMode) {\n              var T = o(e.idToken.authorize._getLocationHref()),\n                  k = o(r.redirectUri);\n              if (T !== k) return _.reject(new U(\"Using fragment, the redirectUri origin (\" + k + \") must match the origin of this page (\" + T + \")\"));\n              m = a(e, w, n.timeout);\n            }\n\n            var b = _.defer(),\n                E = setInterval(function () {\n              i(w) && clearInterval(E);\n            }, 500);\n\n            return m.then(function (e) {\n              b.resolve(e);\n            }).fail(function (e) {\n              b.reject(e);\n            }), b.promise.then(function (t) {\n              return f(e, r, t, h);\n            }).fin(function () {\n              clearInterval(E), w && !w.closed && w.close();\n            });\n\n          default:\n            return _.reject(new U(\"The full page redirect flow is not supported\"));\n        }\n      });\n    }\n\n    function y(e, t, n) {\n      var r = A.clone(t) || {};\n      return A.extend(r, {\n        prompt: \"none\",\n        responseMode: \"okta_post_message\",\n        display: null\n      }), h(e, r, n);\n    }\n\n    function g(e, t, n) {\n      var r = A.clone(t) || {};\n      return A.extend(r, {\n        display: \"popup\",\n        responseMode: \"okta_post_message\"\n      }), h(e, r, n);\n    }\n\n    function m(e, t) {\n      t = A.clone(t) || {}, \"authorization_code\" === t.grantType && (t.pkce = !0);\n      var n = p(e);\n      return A.extend(n, t), !0 !== n.pkce ? _.resolve(n) : e.features.isPKCESupported() ? (n.codeChallengeMethod || (n.codeChallengeMethod = P.DEFAULT_CODE_CHALLENGE_METHOD), n.responseType = \"code\", x.getWellKnown(e, null).then(function (e) {\n        if (-1 === (e.code_challenge_methods_supported || []).indexOf(n.codeChallengeMethod)) throw new U(\"Invalid code_challenge_method\");\n      }).then(function () {\n        var t = P.generateVerifier(n.codeVerifier),\n            r = {\n          codeVerifier: t,\n          redirectUri: n.redirectUri\n        };\n        return P.saveMeta(e, r), P.computeChallenge(t);\n      }).then(function (e) {\n        var t = A.clone(n) || {};\n        return A.extend(t, n, {\n          codeChallenge: e\n        }), t;\n      })) : _.reject(new U(\"This browser doesn't support PKCE\"));\n    }\n\n    function v(e, t, n) {\n      return t = A.clone(t) || {}, m(e, t).then(function (r) {\n        t.responseMode || (r.responseType.includes(\"code\") && !r.pkce ? r.responseMode = \"query\" : r.responseMode = e.options.responseMode || \"fragment\");\n        var o = x.getOAuthUrls(e, r, n),\n            i = o.authorizeUrl + d(r),\n            s = \"https:\" === window.location.protocol,\n            a = {\n          secure: s,\n          sameSite: s ? \"none\" : \"lax\"\n        };\n        j.set(R.REDIRECT_OAUTH_PARAMS_COOKIE_NAME, JSON.stringify({\n          responseType: r.responseType,\n          state: r.state,\n          nonce: r.nonce,\n          scopes: r.scopes,\n          clientId: r.clientId,\n          urls: o,\n          ignoreSignature: r.ignoreSignature\n        }), null, a), j.set(R.REDIRECT_NONCE_COOKIE_NAME, r.nonce, null, a), j.set(R.REDIRECT_STATE_COOKIE_NAME, r.state, null, a), e.token.getWithRedirect._setLocation(i);\n      });\n    }\n\n    function w(e, t) {\n      if (!x.isToken(t)) return _.reject(new U(\"Renew must be passed a token with an array of scopes and an accessToken or idToken\"));\n      var n;\n      return n = e.options.pkce ? \"code\" : t.accessToken ? \"token\" : \"id_token\", e.token.getWithoutPrompt({\n        responseType: n,\n        scopes: t.scopes\n      }, {\n        authorizeUrl: t.authorizeUrl,\n        userinfoUrl: t.userinfoUrl,\n        issuer: t.issuer\n      });\n    }\n\n    function T(e) {\n      var t = e.token.parseFromUrl._getHistory(),\n          n = e.token.parseFromUrl._getDocument(),\n          r = e.token.parseFromUrl._getLocation();\n\n      t && t.replaceState ? t.replaceState(null, n.title, r.pathname + r.search) : r.hash = \"\";\n    }\n\n    function k(e) {\n      var t = e.token.parseFromUrl._getHistory(),\n          n = e.token.parseFromUrl._getDocument(),\n          r = e.token.parseFromUrl._getLocation();\n\n      t && t.replaceState ? t.replaceState(null, n.title, r.pathname + r.hash) : r.search = \"\";\n    }\n\n    function b(e, t) {\n      t = t || {}, A.isString(t) && (t = {\n        url: t\n      });\n\n      var n,\n          r = t.url,\n          o = t.responseMode || e.options.responseMode || \"fragment\",\n          i = e.token.parseFromUrl._getLocation();\n\n      if (!(n = \"query\" === o ? r ? r.substring(r.indexOf(\"?\")) : i.search : r ? r.substring(r.indexOf(\"#\")) : i.hash)) return _.reject(new U(\"Unable to parse a token from the url\"));\n      var s = j.get(R.REDIRECT_OAUTH_PARAMS_COOKIE_NAME);\n      if (!s) return _.reject(new U(\"Unable to retrieve OAuth redirect params cookie\"));\n\n      try {\n        var a = JSON.parse(s),\n            u = a.urls;\n        delete a.urls, j.delete(R.REDIRECT_OAUTH_PARAMS_COOKIE_NAME);\n      } catch (e) {\n        return _.reject(new U(\"Unable to parse the \" + R.REDIRECT_OAUTH_PARAMS_COOKIE_NAME + \" cookie: \" + e.message));\n      }\n\n      return _.resolve(x.urlParamsToObject(n)).then(function (t) {\n        return r || (\"query\" === o ? k(e) : T(e)), f(e, a, t, u);\n      });\n    }\n\n    function E(e, t) {\n      return t && (x.isToken(t) || t.accessToken || t.userinfoUrl) ? S.httpRequest(e, {\n        url: t.userinfoUrl,\n        method: \"GET\",\n        accessToken: t.accessToken\n      }).fail(function (e) {\n        if (e.xhr && (401 === e.xhr.status || 403 === e.xhr.status)) {\n          var t;\n\n          if (e.xhr.headers && A.isFunction(e.xhr.headers.get) && e.xhr.headers.get(\"WWW-Authenticate\") ? t = e.xhr.headers.get(\"WWW-Authenticate\") : A.isFunction(e.xhr.getResponseHeader) && (t = e.xhr.getResponseHeader(\"WWW-Authenticate\")), t) {\n            var n = t.match(/error=\"(.*?)\"/) || [],\n                r = t.match(/error_description=\"(.*?)\"/) || [],\n                o = n[1],\n                i = r[1];\n            o && i && (e = new C(o, i));\n          }\n        }\n\n        throw e;\n      }) : _.reject(new U(\"getUserInfo requires an access token object\"));\n    }\n\n    var S = n(3),\n        A = n(0),\n        x = n(10),\n        _ = n(5),\n        O = n(26),\n        U = n(1),\n        C = n(27),\n        R = n(2),\n        j = n(4).storage,\n        P = n(28);\n\n    e.exports = {\n      revokeToken: r,\n      getToken: h,\n      getWithoutPrompt: y,\n      getWithPopup: g,\n      getWithRedirect: v,\n      parseFromUrl: b,\n      decodeToken: o,\n      renewToken: w,\n      getUserInfo: E,\n      verifyToken: i,\n      handleOAuthResponse: f,\n      prepareOauthParams: m\n    };\n  }, function (e, t, n) {\n    function r(e, t) {\n      t = o.clone(t);\n      var n = {\n        name: \"RSASSA-PKCS1-v1_5\",\n        hash: {\n          name: \"SHA-256\"\n        }\n      },\n          r = [\"verify\"];\n      return delete t.use, crypto.subtle.importKey(\"jwk\", t, n, !0, r).then(function (t) {\n        var r = e.split(\".\"),\n            i = o.stringToBuffer(r[0] + \".\" + r[1]),\n            s = o.base64UrlDecode(r[2]),\n            a = o.stringToBuffer(s);\n        return crypto.subtle.verify(n, t, a, i);\n      });\n    }\n\n    var o = n(0);\n    e.exports = {\n      verifyToken: r\n    };\n  }, function (e, t) {\n    function n(e, t) {\n      this.name = \"OAuthError\", this.message = t, this.errorCode = e, this.errorSummary = t;\n    }\n\n    n.prototype = new Error(), e.exports = n;\n  }, function (e, t, n) {\n    function r(e) {\n      return (\"0\" + e.toString(16)).substr(-2);\n    }\n\n    function o(e) {\n      var t = new Uint8Array(Math.ceil(e / 2));\n      return crypto.getRandomValues(t), Array.from(t, r).join(\"\").slice(0, e);\n    }\n\n    function i(e) {\n      var t = e || \"\";\n      return t.length < g && (t += o(g - t.length)), encodeURIComponent(t).slice(0, m);\n    }\n\n    function s(e, t) {\n      e.options.storageUtil.getPKCEStorage().setStorage(t);\n    }\n\n    function a(e) {\n      return e.options.storageUtil.getPKCEStorage().getStorage();\n    }\n\n    function u(e) {\n      e.options.storageUtil.getPKCEStorage().clearStorage();\n    }\n\n    function c(e) {\n      var t = new TextEncoder().encode(e);\n      return crypto.subtle.digest(\"SHA-256\", t).then(function (e) {\n        var t = String.fromCharCode.apply(null, new Uint8Array(e));\n        return y.stringToBase64Url(t);\n      });\n    }\n\n    function f(e) {\n      if (!e.clientId) throw new d(\"A clientId must be specified in the OktaAuth constructor to get a token\");\n      if (!e.redirectUri) throw new d(\"The redirectUri passed to /authorize must also be passed to /token\");\n      if (!e.authorizationCode) throw new d(\"An authorization code (returned from /authorize) must be passed to /token\");\n      if (!e.codeVerifier) throw new d('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n    }\n\n    function p(e) {\n      var t = y.removeNils({\n        client_id: e.clientId,\n        redirect_uri: e.redirectUri,\n        grant_type: \"authorization_code\",\n        code: e.authorizationCode,\n        code_verifier: e.codeVerifier\n      });\n      return y.toQueryParams(t).slice(1);\n    }\n\n    function l(e, t, n) {\n      f(t);\n      var r = p(t);\n      return h.httpRequest(e, {\n        url: n.tokenUrl,\n        method: \"POST\",\n        args: r,\n        withCredentials: !1,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      });\n    }\n\n    var d = n(1),\n        h = n(3),\n        y = n(0),\n        g = 43,\n        m = 128;\n    e.exports = {\n      DEFAULT_CODE_CHALLENGE_METHOD: \"S256\",\n      generateVerifier: i,\n      clearMeta: u,\n      saveMeta: s,\n      loadMeta: a,\n      computeChallenge: c,\n      getToken: l\n    };\n  }, function (e, t, n) {\n    function r(e, t) {\n      return t.expiresAt - e.options.expireEarlySeconds;\n    }\n\n    function o(e, t) {\n      return r(e, t) <= e.clock.now();\n    }\n\n    function i(e, t, n) {\n      e.emitter.emit(\"expired\", t, n);\n    }\n\n    function s(e, t) {\n      e.emitter.emit(\"error\", t);\n    }\n\n    function a(e, t) {\n      clearTimeout(e.expireTimeouts[t]), delete e.expireTimeouts[t], delete e.renewPromise[t];\n    }\n\n    function u(e) {\n      var t = e.expireTimeouts;\n\n      for (var n in t) t.hasOwnProperty(n) && a(e, n);\n    }\n\n    function c(e, t, n, o) {\n      var s = r(t, o),\n          u = 1e3 * Math.max(s - t.clock.now(), 0);\n      a(t, n);\n      var c = setTimeout(function () {\n        i(t, n, o);\n      }, u);\n      t.expireTimeouts[n] = c;\n    }\n\n    function f(e, t, n) {\n      try {\n        var r = n.getStorage();\n      } catch (e) {\n        return void s(t, e);\n      }\n\n      for (var o in r) if (r.hasOwnProperty(o)) {\n        var i = r[o];\n        c(e, t, o, i);\n      }\n    }\n\n    function p(e, t, n, r, o) {\n      var i = n.getStorage();\n      if (!v.isObject(o) || !o.scopes || !o.expiresAt && 0 !== o.expiresAt || !o.idToken && !o.accessToken) throw new w(\"Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties\");\n      i[r] = o, n.setStorage(i), c(e, t, r, o);\n    }\n\n    function l(e, t) {\n      return e.getStorage()[t];\n    }\n\n    function d(e, t, n, r) {\n      return k.Promise(function (i) {\n        var s = l(n, r);\n        return i(s && o(t, s) ? t.options.autoRenew ? y(e, t, n, r) : h(t, n, r) : s);\n      });\n    }\n\n    function h(e, t, n) {\n      a(e, n);\n      var r = t.getStorage();\n      delete r[n], t.setStorage(r);\n    }\n\n    function y(e, t, n, r) {\n      var o = t.renewPromise[r];\n      if (o) return o;\n\n      try {\n        var i = l(n, r);\n        if (!i) throw new w(\"The tokenManager has no token for the key: \" + r);\n      } catch (e) {\n        return k.reject(e);\n      }\n\n      return a(t, r), t.renewPromise[r] = e.token.renew(i).then(function (o) {\n        var s = o;\n        o instanceof Array && (s = o.find(function (e) {\n          return e.idToken && i.idToken || e.accessToken && i.accessToken;\n        }));\n        var a = l(n, r);\n        if (a) return p(e, t, n, r, s), t.emitter.emit(\"renewed\", r, s, a), s;\n      }).catch(function (e) {\n        throw \"OAuthError\" !== e.name && \"AuthSdkError\" !== e.name || (h(t, n, r), e.tokenKey = r, e.accessToken = !!i.accessToken, s(t, e)), e;\n      }).finally(function () {\n        delete t.renewPromise[r];\n      }), t.renewPromise[r];\n    }\n\n    function g(e, t) {\n      u(e), t.clearStorage();\n    }\n\n    function m(e, t) {\n      t = v.extend({}, A, v.removeNils(t)), \"localStorage\" !== t.storage || T.browserHasLocalStorage() || (v.warn(\"This browser doesn't support localStorage. Switching to sessionStorage.\"), t.storage = \"sessionStorage\"), \"sessionStorage\" !== t.storage || T.browserHasSessionStorage() || (v.warn(\"This browser doesn't support sessionStorage. Switching to cookie-based storage.\"), t.storage = \"cookie\");\n      var n;\n      if (\"object\" == typeof t.storage) n = t.storage;else switch (t.storage) {\n        case \"localStorage\":\n          n = localStorage;\n          break;\n\n        case \"sessionStorage\":\n          n = sessionStorage;\n          break;\n\n        case \"cookie\":\n          n = T.getCookieStorage(t);\n          break;\n\n        case \"memory\":\n          n = T.getInMemoryStorage();\n          break;\n\n        default:\n          throw new w(\"Unrecognized storage option\");\n      }\n      var r = t.storageKey || b.TOKEN_STORAGE_NAME,\n          o = E(n, r),\n          i = S.create(e, t),\n          s = {\n        clock: i,\n        options: t,\n        emitter: e.emitter,\n        expireTimeouts: {},\n        renewPromise: {}\n      };\n      this.add = v.bind(p, this, e, s, o), this.get = v.bind(d, this, e, s, o), this.remove = v.bind(h, this, s, o), this.clear = v.bind(g, this, s, o), this.renew = v.bind(y, this, e, s, o), this.on = v.bind(s.emitter.on, s.emitter), this.off = v.bind(s.emitter.off, s.emitter), f(e, s, o);\n    }\n\n    var v = n(0),\n        w = n(1),\n        T = n(4),\n        k = n(5),\n        b = n(2),\n        E = n(6),\n        S = n(30),\n        A = {\n      autoRenew: !0,\n      storage: \"localStorage\",\n      expireEarlySeconds: 30\n    };\n    e.exports = m;\n  }, function (e, t, n) {\n    function r(e) {\n      this.localOffset = parseInt(e || 0);\n    }\n\n    n(0).extend(r.prototype, {\n      now: function () {\n        return (Date.now() + this.localOffset) / 1e3;\n      }\n    }), r.create = function () {\n      return new r(0);\n    }, e.exports = r;\n  }]);\n});","map":{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:/webpack/bootstrap a4cce2a914ed64be9512","webpack:///okta-auth-js.min.js","webpack:///lib/util.js","webpack:///lib/errors/AuthSdkError.js","webpack:///lib/constants.js","webpack:///lib/http.js","webpack:///lib/browser/browserStorage.js","webpack:///node_modules/q/q.js","webpack:///lib/storageBuilder.js","webpack:///lib/tx.js","webpack:///root/okta/okta-auth-js/node_modules/process/browser.js","webpack:///(webpack)/buildin/global.js","webpack:///lib/oauthUtil.js","webpack:///lib/browser/browserIndex.js","webpack:///fetch/fetchRequest.js","webpack:///root/okta/okta-auth-js/node_modules/cross-fetch/dist/browser-ponyfill.js","webpack:///root/okta/okta-auth-js/node_modules/js-cookie/src/js.cookie.js","webpack:///lib/browser/browser.js","webpack:///lib/vendor/polyfills.js","webpack:///root/okta/okta-auth-js/node_modules/Base64/base64.js","webpack:///root/okta/okta-auth-js/node_modules/tiny-emitter/index.js","webpack:///lib/builderUtil.js","webpack:///root/okta/okta-auth-js/node_modules/timers-browserify/main.js","webpack:///root/okta/okta-auth-js/node_modules/setimmediate/setImmediate.js","webpack:///lib/errors/AuthApiError.js","webpack:///lib/errors/AuthPollStopError.js","webpack:///lib/session.js","webpack:///lib/token.js","webpack:///lib/crypto.js","webpack:///lib/errors/OAuthError.js","webpack:///lib/pkce.js","webpack:///lib/TokenManager.js","webpack:///lib/clock.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","setImmediate","util","stringToBase64Url","str","b64","btoa","base64ToBase64Url","replace","base64UrlToBase64","b64u","base64UrlToString","length","utf8","atob","decodeURIComponent","escape","e","stringToBuffer","buffer","Uint8Array","charCodeAt","base64UrlDecode","bind","fn","ctx","additionalArgs","Array","slice","arguments","args","concat","apply","isAbsoluteUrl","url","test","isString","obj","toString","isObject","isNumber","isArray","isoToUTCString","parts","match","isoTime","Date","UTC","toUTCString","toQueryParams","key","undefined","push","encodeURIComponent","join","genRandomString","randomCharset","random","cl","Math","floor","extend","obj1","forEach","prop","removeNils","cleaned","value","clone","JSON","stringify","parse","omit","props","newobj","indexOf","find","collection","searchParams","item","found","getLink","linkName","altName","_links","link","getNativeConsole","window","console","getConsole","nativeConsole","log","warn","text","deprecate","deprecateWrap","removeTrailingSlash","path","trimmed","isIE11OrLess","document","documentMode","isFunction","AuthSdkError","msg","xhr","message","errorCode","errorSummary","errorLink","errorId","errorCauses","Error","Q","AuthApiError","constants","httpRequest","sdk","options","method","saveAuthnState","accessToken","withCredentials","storageUtil","storage","httpCache","getHttpCache","cacheResponse","cacheContents","getStorage","cachedResponse","now","expiresAt","resolve","response","headers","userAgent","ajaxOptions","data","err","res","httpRequestClient","then","resp","responseText","stateToken","delete","STATE_TOKEN_KEY_NAME","set","updateStorage","DEFAULT_CACHE_DURATION","fail","serverErr","status","transformErrorXHR","getOptions","post","postOptions","Cookies","storageBuilder","browserHasLocalStorage","getLocalStorage","testStorage","browserHasSessionStorage","getSessionStorage","getPKCEStorage","PKCE_STORAGE_NAME","getCookieStorage","secure","location","protocol","CACHE_STORAGE_NAME","localStorage","sessionStorage","sameSite","getItem","setItem","getInMemoryStorage","store","removeItem","cookieOptions","expires","remove","definition","bootstrap","hasStacks","stack","qStartingLine","captureLine","qFileName","noop","nextTick","head","task","next","tail","flushing","requestTick","isNodeJS","laterQueue","flush","domain","enter","runSingle","pop","exit","setTimeout","process","MessageChannel","channel","port1","onmessage","requestPortTick","port2","postMessage","runAfter","Function","uncurryThis","f","array_slice","array_reduce","reduce","callback","basis","index","TypeError","array_indexOf","array_map","map","thisp","collect","object_create","create","Type","object_hasOwnProperty","object_keys","keys","object_toString","isStopIteration","exception","QReturnValue","ReturnValue","STACK_JUMP_SEPARATOR","makeStackTraceLong","error","promise","stacks","source","unshift","concatedStacks","filterStackString","stackString","lines","split","desiredLines","line","isInternalFrame","isNodeFrame","stackLine","getFileNameAndLineNumber","attempt1","exec","Number","attempt2","attempt3","fileNameAndLineNumber","fileName","lineNumber","qEndingLine","firstLine","alternative","Promise","isPromiseAlike","coerce","fulfill","longStackSupport","env","Q_DEBUG","defer","messages","progressListeners","resolvedPromise","deferred","promiseDispatch","op","operands","valueOf","nearerValue","nearer","isPromise","inspect","state","substring","become","newPromise","reject","reason","notify","progress","progressListener","makeNodeResolver","resolver","race","all","passByCopy","x","y","that","spread","answerPs","len","makePromise","descriptor","fallback","result","inspected","fulfilled","rejected","progressed","done","_fulfilled","_rejected","newException","_progressed","newValue","threw","onerror","tap","fcall","thenResolve","when","thenReject","isPending","isFulfilled","isRejected","unhandledReasons","unhandledRejections","reportedUnhandledRejections","trackUnhandledRejections","resetUnhandledRejections","trackRejection","emit","untrackRejection","at","atReport","splice","getUnhandledReasons","stopUnhandledRejectionTracking","rejection","rhs","master","dispatch","array","async","makeGenerator","continuer","verb","arg","StopIteration","generator","errback","spawn","_return","promised","del","mapply","send","mcall","invoke","fapply","fbind","promises","pendingCount","snapshot","any","prev","current","onFulfilled","onRejected","onProgress","allResolved","allSettled","regardless","fin","onUnhandledError","timeout","ms","timeoutId","code","clearTimeout","delay","nfapply","nodeArgs","nfcall","nfbind","denodeify","baseArgs","nbind","bound","nmapply","npost","nsend","nmcall","ninvoke","nodeify","nodeback","noConflict","webstorage","storageName","storageString","setStorage","clearStorage","http","AuthPollStopError","addStateToken","builtArgs","getStateToken","transactionStatus","resumeTransaction","tx","exists","_get","AuthTransaction","introspect","transactionStep","transactionExists","postToTransaction","getPollFn","ref","rememberDevice","autoPush","transactionCallBack","DEFAULT_POLLING_DELAY","pollLink","pollFn","opts","href","isPolling","retryCount","recursivePoll","pollRes","factorResult","delayLength","pow","link2fn","lk","hints","allow","factorType","provider","params","profile","updatePhone","links2fns","fns","type","poll","flattenEmbedded","objArr","ol","embedded","_embedded","cancel","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","run","Item","title","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","g","eval","generateState","generateNonce","isToken","idToken","scopes","eventTarget","addEventListener","attachEvent","removeEventListener","detachEvent","loadFrame","src","iframe","createElement","style","display","body","appendChild","loadPopup","popupTitle","appearance","winEl","open","getWellKnown","issuer","authServerUri","getKey","kid","wellKnown","jwksUri","cachedKey","validateClaims","claims","validationParams","aud","clientId","iss","nonce","iat","exp","maxClockSkew","getOAuthUrls","oauthParams","authorizeUrl","userinfoUrl","tokenUrl","logoutUrl","revokeUrl","responseType","baseUrl","RegExp","endsWith","urlParamsToObject","hashOrSearch","plus2space","paramSplit","fragment","param","fetchRequest","fetch","credentials","ok","respHandler","toLowerCase","json","__self__","F","DOMException","support","iterable","Symbol","blob","Blob","formData","arrayBuffer","isDataView","DataView","isPrototypeOf","viewClasses","isArrayBufferView","ArrayBuffer","isView","normalizeName","String","normalizeValue","iteratorFor","items","iterator","shift","Headers","append","header","getOwnPropertyNames","oldValue","has","thisArg","values","entries","consumed","bodyUsed","fileReaderReady","reader","onload","readBlobAsArrayBuffer","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","chars","fromCharCode","bufferClone","byteLength","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","decode","methods","normalizeMethod","upcased","toUpperCase","Request","input","mode","signal","referrer","form","trim","bytes","parseHeaders","rawHeaders","Response","bodyInit","statusText","redirectStatuses","redirect","RangeError","constructor","init","request","aborted","XMLHttpRequest","abortXhr","abort","getAllResponseHeaders","responseURL","ontimeout","onabort","setRequestHeader","onreadystatechange","readyState","polyfill","default","registeredInModuleLoader","OldCookies","api","attributes","converter","defaults","setMilliseconds","getMilliseconds","write","stringifiedAttributes","attributeName","cookie","cookies","rdecode","charAt","read","getJSON","withConverter","Emitter","builderUtil","oauthUtil","session","token","TokenManager","OktaAuthBuilder","getValidUrl","usePKCE","pkce","grantType","redirectUri","postLogoutRedirectUri","responseMode","onSessionExpired","features","isPKCESupported","errorMessage","isHTTPS","hasTextEncoder","DEFAULT_MAX_CLOCK_SKEW","ignoreSignature","close","closeSession","sessionExists","getSession","refresh","refreshSession","setCookieAndRedirect","resume","authorize","_getLocationHref","getWithoutPrompt","getWithPopup","getWithRedirect","parseFromUrl","decodeToken","revoke","revokeToken","renew","renewToken","getUserInfo","verify","verifyToken","_setLocation","_getHistory","history","_getLocation","_getDocument","fingerprint","_getUserAgent","navigator","isWindowsPhone","isFingerprintSupported","agent","emitter","tokenManager","_onTokenManagerError","proto","isPopupPostMessageSupported","isIE8or9","isTokenVerifySupported","crypto","subtle","TextEncoder","signIn","sendFingerprint","signOut","revokeAccessToken","catch","tokens","clear","assign","idTokenHint","logoutUri","addSharedPrototypes","webfinger","listener","origin","contains","parentElement","removeChild","buildOktaAuth","searchElement","fromIndex","k","abs","Infinity","max","InvalidCharacterError","block","charCode","idx","output","bc","bs","E","_","evtArr","evts","liveEvents","isUrlRegex","forgotPassword","unlockAccount","verifyRecoveryToken","OktaAuth","ajaxRequest","Timeout","scope","setInterval","clearInterval","id","clearFn","_id","_clearFn","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","global","clearImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","registerImmediate","handle","runIfPresent","importScripts","postMessageIsAsynchronous","oldOnMessage","messagePrefix","onGlobalMessage","event","html","documentElement","script","attachTo","getPrototypeOf","user","sessionToken","redirectUrl","checkAccountSetupComplete","sdkCrypto","OAuthError","PKCE","token_type_hint","creds","jwt","decodedToken","payload","signature","validationOptions","valid","addPostMessageListener","responseHandler","addFragmentListener","windowEl","hashChangeHandler","hash","hashToObject","closed","exchangeCodeForToken","authorizationCode","urls","meta","loadMeta","getTokenParams","codeVerifier","getToken","validateResponse","clearMeta","handleOAuthResponse","tokenDict","tokenType","filter","getDefaultOAuthParams","convertOAuthParamsToQueryParams","oauthQueryParams","codeChallenge","codeChallengeMethod","idp","idpScope","loginHint","maxAge","prompt","mayBeArray","buildAuthorizeParams","oauthOptions","prepareOauthParams","sessionTokenOverrides","idpOverrides","requestUrl","endpoint","getOrigin","iframePromise","iframeEl","popupPromise","windowOptions","windowOrigin","redirectUriOrigin","popupDeferred","hasClosed","win","closePoller","DEFAULT_CODE_CHALLENGE_METHOD","generateVerifier","saveMeta","computeChallenge","clonedParams","includes","isSecure","cookieSettings","REDIRECT_OAUTH_PARAMS_COOKIE_NAME","REDIRECT_NONCE_COOKIE_NAME","REDIRECT_STATE_COOKIE_NAME","removeHash","nativeHistory","nativeDoc","nativeLoc","replaceState","pathname","search","removeSearch","paramStr","oauthParamsCookie","accessTokenObject","authenticateHeader","getResponseHeader","errorMatches","errorDescriptionMatches","errorDescription","algo","usages","use","importKey","cryptoKey","b64Signature","summary","MIN_VERIFIER_LENGTH","MAX_VERIFIER_LENGTH","dec2hex","dec","substr","getRandomString","a","ceil","getRandomValues","from","prefix","verifier","encode","digest","validateOptions","getPostData","SdkClock","DEFAULT_OPTIONS","autoRenew","expireEarlySeconds","getExpireTime","tokenMgmtRef","hasExpired","clock","emitExpired","emitError","clearExpireEventTimeout","expireTimeouts","renewPromise","clearExpireEventTimeoutAll","setExpireEventTimeout","expireTime","expireEventWait","expireEventTimeout","setExpireEventTimeoutAll","tokenStorage","add","getAsync","existingPromise","freshTokens","freshToken","oldToken","tokenKey","finally","storageProvider","storageKey","TOKEN_STORAGE_NAME","localOffset","parseInt"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OktaAuth\"] = factory();\n\telse\n\t\troot[\"OktaAuth\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a4cce2a914ed64be9512","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OktaAuth\"] = factory();\n\telse\n\t\troot[\"OktaAuth\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 11);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* eslint-env es6 */\nvar util = module.exports;\n\n// converts a string to base64 (url/filename safe variant)\nutil.stringToBase64Url = function(str) {\n  var b64 = btoa(str);\n  return util.base64ToBase64Url(b64);\n};\n\n// converts a standard base64-encoded string to a \"url/filename safe\" variant\nutil.base64ToBase64Url = function(b64) {\n  return b64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n};\n\n// converts a \"url/filename safe\" base64 string to a \"standard\" base64 string\nutil.base64UrlToBase64 = function(b64u) {\n  return b64u.replace(/-/g, '+').replace(/_/g, '/');\n};\n\nutil.base64UrlToString = function(b64u) {\n  var b64 = util.base64UrlToBase64(b64u);\n  switch (b64.length % 4) {\n    case 0:\n      break;\n    case 2:\n      b64 += '==';\n      break;\n    case 3:\n      b64 += '=';\n      break;\n    default:\n      throw 'Not a valid Base64Url';\n  }\n  var utf8 = atob(b64);\n  try {\n    return decodeURIComponent(escape(utf8));\n  } catch (e) {\n    return utf8;\n  }\n};\n\nutil.stringToBuffer = function(str) {\n  var buffer = new Uint8Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    buffer[i] = str.charCodeAt(i);\n  }\n  return buffer;\n};\n\nutil.base64UrlDecode = function(str) {\n  return atob(util.base64UrlToBase64(str));\n};\n\nutil.bind = function(fn, ctx) {\n  var additionalArgs = Array.prototype.slice.call(arguments, 2);\n  return function() {\n    var args = Array.prototype.slice.call(arguments);\n    args = additionalArgs.concat(args);\n    return fn.apply(ctx, args);\n  };\n};\n\nutil.isAbsoluteUrl = function(url) {\n  return /^(?:[a-z]+:)?\\/\\//i.test(url);\n};\n\nutil.isString = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object String]';\n};\n\nutil.isObject = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n};\n\nutil.isNumber = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Number]';\n};\n\nutil.isArray = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\n\nutil.isoToUTCString = function(str) {\n  var parts = str.match(/\\d+/g),\n      isoTime = Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5]),\n      isoDate = new Date(isoTime);\n\n  return isoDate.toUTCString();\n};\n\nutil.toQueryParams = function(obj) {\n  var str = [];\n  if (obj !== null) {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) &&\n          obj[key] !== undefined &&\n          obj[key] !== null) {\n        str.push(key + '=' + encodeURIComponent(obj[key]));\n      }\n    }\n  }\n  if (str.length) {\n    return '?' + str.join('&');\n  } else {\n    return '';\n  }\n};\n\nutil.genRandomString = function(length) {\n  var randomCharset = 'abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  var random = '';\n  for (var c = 0, cl = randomCharset.length; c < length; ++c) {\n    random += randomCharset[Math.floor(Math.random() * cl)];\n  }\n  return random;\n};\n\nutil.extend = function() {\n  // First object will be modified!\n  var obj1 = arguments[0];\n  // Properties from other objects will be copied over\n  var objArray = [].slice.call(arguments, 1);\n  objArray.forEach(function(obj) {\n    for (var prop in obj) {\n      // copy over all properties with defined values\n      if (obj.hasOwnProperty(prop) && obj[prop] !== undefined) {\n        obj1[prop] = obj[prop];\n      }\n    }\n  });\n  return obj1; // return the modified object\n};\n\nutil.removeNils = function(obj) {\n  var cleaned = {};\n  for (var prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      var value = obj[prop];\n      if (value !== null && value !== undefined) {\n        cleaned[prop] = value;\n      }\n    }\n  }\n  return cleaned;\n};\n\nutil.clone = function(obj) {\n  if (obj) {\n    var str = JSON.stringify(obj);\n    if (str) {\n      return JSON.parse(str);\n    }\n  }\n  return obj;\n};\n\n// Analogous to _.omit\nutil.omit = function(obj) {\n  var props = Array.prototype.slice.call(arguments, 1);\n  var newobj = {};\n  for (var p in obj) {\n    if (obj.hasOwnProperty(p) && props.indexOf(p) == -1) {\n      newobj[p] = obj[p];\n    }\n  }\n  return util.clone(newobj);\n};\n\nutil.find = function(collection, searchParams) {\n  var c = collection.length;\n  while (c--) {\n    var item = collection[c];\n    var found = true;\n    for (var prop in searchParams) {\n      if (!searchParams.hasOwnProperty(prop)) {\n        continue;\n      }\n      if (item[prop] !== searchParams[prop]) {\n        found = false;\n        break;\n      }\n    }\n    if (found) {\n      return item;\n    }\n  }\n};\n\nutil.getLink = function(obj, linkName, altName) {\n  if (!obj || !obj._links) {\n    return;\n  }\n\n  var link = util.clone(obj._links[linkName]);\n\n  // If a link has a name and we have an altName, return if they match\n  if (link && link.name && altName) {\n    if (link.name === altName) {\n      return link;\n    }\n  } else {\n    return link;\n  }\n};\n\nutil.getNativeConsole = function() {\n  if (typeof window !== 'undefined') {\n    return window.console;\n  } else if (typeof console !== 'undefined') {\n    return console;\n  } else {\n    return undefined;\n  }\n};\n\nutil.getConsole = function() {\n  var nativeConsole = util.getNativeConsole();\n  if (nativeConsole && nativeConsole.log) {\n    return nativeConsole;\n  }\n  return {\n    log: function() {}\n  };\n};\n\nutil.warn = function(text) {\n  /* eslint-disable no-console */\n  util.getConsole().log('[okta-auth-sdk] WARN: ' + text);\n  /* eslint-enable */\n};\n\nutil.deprecate = function(text) {\n  /* eslint-disable no-console */\n  util.getConsole().log('[okta-auth-sdk] DEPRECATION: ' + text);\n  /* eslint-enable */\n};\n\nutil.deprecateWrap = function(text, fn) {\n  return function() {\n    util.deprecate(text);\n    return fn.apply(null, arguments);\n  };\n};\n\nutil.removeTrailingSlash = function(path) {\n  if (!path) {\n    return;\n  }\n  // Remove any whitespace before or after string\n  var trimmed = path.replace(/^\\s+|\\s+$/gm,'');\n  // Remove trailing slash(es)\n  trimmed = trimmed.replace(/\\/+$/, '');\n\n  return trimmed;\n};\n\nutil.isIE11OrLess = function() {\n  return !!document.documentMode && document.documentMode <= 11;\n};\n\nutil.isFunction = function(fn) {\n  return !!fn && {}.toString.call(fn) === '[object Function]';\n};\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction AuthSdkError(msg, xhr) {\n  this.name = 'AuthSdkError';\n  this.message = msg;\n\n  this.errorCode = 'INTERNAL';\n  this.errorSummary = msg;\n  this.errorLink = 'INTERNAL';\n  this.errorId = 'INTERNAL';\n  this.errorCauses = [];\n  if (xhr) {\n    this.xhr = xhr;\n  }\n}\nAuthSdkError.prototype = new Error();\n\nmodule.exports = AuthSdkError;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n  'STATE_TOKEN_KEY_NAME': 'oktaStateToken',\n  'DEFAULT_POLLING_DELAY': 500,\n  'DEFAULT_MAX_CLOCK_SKEW': 300,\n  'DEFAULT_CACHE_DURATION': 86400,\n  'REDIRECT_OAUTH_PARAMS_COOKIE_NAME': 'okta-oauth-redirect-params',\n  'REDIRECT_STATE_COOKIE_NAME': 'okta-oauth-state',\n  'REDIRECT_NONCE_COOKIE_NAME': 'okta-oauth-nonce',\n  'TOKEN_STORAGE_NAME': 'okta-token-storage',\n  'CACHE_STORAGE_NAME': 'okta-cache-storage',\n  'PKCE_STORAGE_NAME': 'okta-pkce-storage'\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity */\nvar util = __webpack_require__(0);\nvar Q = __webpack_require__(5);\nvar AuthApiError = __webpack_require__(22);\nvar constants = __webpack_require__(2);\n\nfunction httpRequest(sdk, options) {\n  options = options || {};\n  var url = options.url,\n      method = options.method,\n      args = options.args,\n      saveAuthnState = options.saveAuthnState,\n      accessToken = options.accessToken,\n      withCredentials = options.withCredentials !== false, // default value is true\n      storageUtil = sdk.options.storageUtil,\n      storage = storageUtil.storage,\n      httpCache = storageUtil.getHttpCache();\n\n  if (options.cacheResponse) {\n    var cacheContents = httpCache.getStorage();\n    var cachedResponse = cacheContents[url];\n    if (cachedResponse && Date.now()/1000 < cachedResponse.expiresAt) {\n      return Q.resolve(cachedResponse.response);\n    }\n  }\n\n  var headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'X-Okta-User-Agent-Extended': sdk.userAgent\n  };\n  util.extend(headers, sdk.options.headers, options.headers);\n\n  if (accessToken && util.isString(accessToken)) {\n    headers['Authorization'] = 'Bearer ' + accessToken;\n  }\n\n  var ajaxOptions = {\n    headers: headers,\n    data: args || undefined,\n    withCredentials: withCredentials\n  };\n\n  var err, res;\n  return new Q(sdk.options.httpRequestClient(method, url, ajaxOptions))\n    .then(function(resp) {\n      res = resp.responseText;\n      if (res && util.isString(res)) {\n        res = JSON.parse(res);\n      }\n\n      if (saveAuthnState) {\n        if (!res.stateToken) {\n          storage.delete(constants.STATE_TOKEN_KEY_NAME);\n        }\n      }\n\n      if (res && res.stateToken && res.expiresAt) {\n        storage.set(constants.STATE_TOKEN_KEY_NAME, res.stateToken, res.expiresAt);\n      }\n\n      if (res && options.cacheResponse) {\n        httpCache.updateStorage(url, {\n          expiresAt: Math.floor(Date.now()/1000) + constants.DEFAULT_CACHE_DURATION,\n          response: res\n        });\n      }\n\n      return res;\n    })\n    .fail(function(resp) {\n      var serverErr = resp.responseText || {};\n      if (util.isString(serverErr)) {\n        try {\n          serverErr = JSON.parse(serverErr);\n        } catch (e) {\n          serverErr = {\n            errorSummary: 'Unknown error'\n          };\n        }\n      }\n\n      if (resp.status >= 500) {\n        serverErr.errorSummary = 'Unknown error';\n      }\n\n      if (sdk.options.transformErrorXHR) {\n        resp = sdk.options.transformErrorXHR(util.clone(resp));\n      }\n\n      err = new AuthApiError(serverErr, resp);\n\n      if (err.errorCode === 'E0000011') {\n        storage.delete(constants.STATE_TOKEN_KEY_NAME);\n      }\n\n      throw err;\n    });\n}\n\nfunction get(sdk, url, options) {\n  url = util.isAbsoluteUrl(url) ? url : sdk.options.url + url;\n  var getOptions = {\n    url: url,\n    method: 'GET'\n  };\n  util.extend(getOptions, options);\n  return httpRequest(sdk, getOptions);\n}\n\nfunction post(sdk, url, args, options) {\n  url = util.isAbsoluteUrl(url) ? url : sdk.options.url + url;\n  var postOptions = {\n    url: url,\n    method: 'POST',\n    args: args,\n    saveAuthnState: true\n  };\n  util.extend(postOptions, options);\n  return httpRequest(sdk, postOptions);\n}\n\nmodule.exports = {\n  get: get,\n  post: post,\n  httpRequest: httpRequest\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar Cookies = __webpack_require__(14);\nvar storageBuilder = __webpack_require__(6);\nvar constants = __webpack_require__(2);\n\n// Building this as an object allows us to mock the functions in our tests\nvar storageUtil = {};\n\n// IE11 bug that Microsoft doesn't plan to fix\n// https://connect.microsoft.com/IE/Feedback/Details/1496040\nstorageUtil.browserHasLocalStorage = function() {\n  try {\n    var storage = storageUtil.getLocalStorage();\n    return storageUtil.testStorage(storage);\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.browserHasSessionStorage = function() {\n  try {\n    var storage = storageUtil.getSessionStorage();\n    return storageUtil.testStorage(storage);\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.getPKCEStorage = function() {\n  if (storageUtil.browserHasLocalStorage()) {\n    return storageBuilder(storageUtil.getLocalStorage(), constants.PKCE_STORAGE_NAME);\n  } else if (storageUtil.browserHasSessionStorage()) {\n    return storageBuilder(storageUtil.getSessionStorage(), constants.PKCE_STORAGE_NAME);\n  } else {\n    return storageBuilder(storageUtil.getCookieStorage({\n      secure: window.location.protocol === 'https:'\n    }), constants.PKCE_STORAGE_NAME);\n  }\n};\n\nstorageUtil.getHttpCache = function() {\n  if (storageUtil.browserHasLocalStorage()) {\n    return storageBuilder(storageUtil.getLocalStorage(), constants.CACHE_STORAGE_NAME);\n  } else if (storageUtil.browserHasSessionStorage()) {\n    return storageBuilder(storageUtil.getSessionStorage(), constants.CACHE_STORAGE_NAME);\n  } else {\n    return storageBuilder(storageUtil.getCookieStorage({\n      secure: window.location.protocol === 'https:'\n    }), constants.CACHE_STORAGE_NAME);\n  }\n};\n\nstorageUtil.getLocalStorage = function() {\n  return localStorage;\n};\n\nstorageUtil.getSessionStorage = function() {\n  return sessionStorage;\n};\n\n// Provides webStorage-like interface for cookies\nstorageUtil.getCookieStorage = function(options) {\n  options = options || {};\n  var secure = options.secure || false; // currently opt-in\n  var sameSite = options.sameSite || (secure ? 'none' : 'lax');\n  return {\n    getItem: storageUtil.storage.get,\n    setItem: function(key, value) {\n      // Cookie shouldn't expire\n      storageUtil.storage.set(key, value, '2200-01-01T00:00:00.000Z', {\n        secure: secure, \n        sameSite: sameSite\n      });\n    }\n  };\n};\n\n// Provides an in-memory solution\nstorageUtil.getInMemoryStorage = function() {\n  var store = {};\n  return {\n    getItem: function(key) {\n      return store[key];\n    },\n    setItem: function(key, value) {\n      store[key] = value;\n    }\n  };\n};\n\nstorageUtil.testStorage = function(storage) {\n  var key = 'okta-test-storage';\n  try {\n    storage.setItem(key, key);\n    storage.removeItem(key);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.storage = {\n  set: function(name, value, expiresAt, options) {\n    options = options || {};\n    var cookieOptions = {\n      path: options.path || '/',\n      secure: options.secure,\n      sameSite: options.sameSite\n    };\n\n    // eslint-disable-next-line no-extra-boolean-cast\n    if (!!(Date.parse(expiresAt))) {\n      // Expires value can be converted to a Date object.\n      //\n      // If the 'expiresAt' value is not provided, or the value cannot be\n      // parsed as a Date object, the cookie will set as a session cookie.\n      cookieOptions.expires = new Date(expiresAt);\n    }\n\n    Cookies.set(name, value, cookieOptions);\n    return storageUtil.storage.get(name);\n  },\n\n  get: function(name) {\n    return Cookies.get(name);\n  },\n\n  delete: function(name) {\n    return Cookies.remove(name, { path: '/' });\n  }\n};\n\nmodule.exports = storageUtil;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process, setImmediate) {// vim:ts=4:sts=4:sw=4:\n/*!\n *\n * Copyright 2009-2012 Kris Kowal under the terms of the MIT\n * license found at http://github.com/kriskowal/q/raw/master/LICENSE\n *\n * With parts by Tyler Close\n * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n * at http://www.opensource.org/licenses/mit-license.html\n * Forked at ref_send.js version: 2009-05-11\n *\n * With parts by Mark Miller\n * Copyright (C) 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n(function (definition) {\n    \"use strict\";\n\n    // This file will function properly as a <script> tag, or a module\n    // using CommonJS and NodeJS or RequireJS module formats.  In\n    // Common/Node/RequireJS, the module exports the Q API and when\n    // executed as a simple <script>, it creates a Q global instead.\n\n    // Montage Require\n    if (typeof bootstrap === \"function\") {\n        bootstrap(\"promise\", definition);\n\n    // CommonJS\n    } else if (true) {\n        module.exports = definition();\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n        define(definition);\n\n    // SES (Secure EcmaScript)\n    } else if (typeof ses !== \"undefined\") {\n        if (!ses.ok()) {\n            return;\n        } else {\n            ses.makeQ = definition;\n        }\n\n    // <script>\n    } else if (typeof window !== \"undefined\" || typeof self !== \"undefined\") {\n        // Prefer window over self for add-on scripts. Use self for\n        // non-windowed contexts.\n        var global = typeof window !== \"undefined\" ? window : self;\n\n        // Get the `window` object, save the previous Q global\n        // and initialize Q as a global.\n        var previousQ = global.Q;\n        global.Q = definition();\n\n        // Add a noConflict function so Q can be removed from the\n        // global namespace.\n        global.Q.noConflict = function () {\n            global.Q = previousQ;\n            return this;\n        };\n\n    } else {\n        throw new Error(\"This environment was not anticipated by Q. Please file a bug.\");\n    }\n\n})(function () {\n\"use strict\";\n\nvar hasStacks = false;\ntry {\n    throw new Error();\n} catch (e) {\n    hasStacks = !!e.stack;\n}\n\n// All code after this point will be filtered from stack traces reported\n// by Q.\nvar qStartingLine = captureLine();\nvar qFileName;\n\n// shims\n\n// used for fallback in \"allResolved\"\nvar noop = function () {};\n\n// Use the fastest possible means to execute a task in a future turn\n// of the event loop.\nvar nextTick =(function () {\n    // linked list of tasks (single, with head node)\n    var head = {task: void 0, next: null};\n    var tail = head;\n    var flushing = false;\n    var requestTick = void 0;\n    var isNodeJS = false;\n    // queue for late tasks, used by unhandled rejection tracking\n    var laterQueue = [];\n\n    function flush() {\n        /* jshint loopfunc: true */\n        var task, domain;\n\n        while (head.next) {\n            head = head.next;\n            task = head.task;\n            head.task = void 0;\n            domain = head.domain;\n\n            if (domain) {\n                head.domain = void 0;\n                domain.enter();\n            }\n            runSingle(task, domain);\n\n        }\n        while (laterQueue.length) {\n            task = laterQueue.pop();\n            runSingle(task);\n        }\n        flushing = false;\n    }\n    // runs a single function in the async queue\n    function runSingle(task, domain) {\n        try {\n            task();\n\n        } catch (e) {\n            if (isNodeJS) {\n                // In node, uncaught exceptions are considered fatal errors.\n                // Re-throw them synchronously to interrupt flushing!\n\n                // Ensure continuation if the uncaught exception is suppressed\n                // listening \"uncaughtException\" events (as domains does).\n                // Continue in next event to avoid tick recursion.\n                if (domain) {\n                    domain.exit();\n                }\n                setTimeout(flush, 0);\n                if (domain) {\n                    domain.enter();\n                }\n\n                throw e;\n\n            } else {\n                // In browsers, uncaught exceptions are not fatal.\n                // Re-throw them asynchronously to avoid slow-downs.\n                setTimeout(function () {\n                    throw e;\n                }, 0);\n            }\n        }\n\n        if (domain) {\n            domain.exit();\n        }\n    }\n\n    nextTick = function (task) {\n        tail = tail.next = {\n            task: task,\n            domain: isNodeJS && process.domain,\n            next: null\n        };\n\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n\n    if (typeof process === \"object\" &&\n        process.toString() === \"[object process]\" && process.nextTick) {\n        // Ensure Q is in a real Node environment, with a `process.nextTick`.\n        // To see through fake Node environments:\n        // * Mocha test runner - exposes a `process` global without a `nextTick`\n        // * Browserify - exposes a `process.nexTick` function that uses\n        //   `setTimeout`. In this case `setImmediate` is preferred because\n        //    it is faster. Browserify's `process.toString()` yields\n        //   \"[object Object]\", while in a real Node environment\n        //   `process.nextTick()` yields \"[object process]\".\n        isNodeJS = true;\n\n        requestTick = function () {\n            process.nextTick(flush);\n        };\n\n    } else if (typeof setImmediate === \"function\") {\n        // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n        if (typeof window !== \"undefined\") {\n            requestTick = setImmediate.bind(window, flush);\n        } else {\n            requestTick = function () {\n                setImmediate(flush);\n            };\n        }\n\n    } else if (typeof MessageChannel !== \"undefined\") {\n        // modern browsers\n        // http://www.nonblocking.io/2011/06/windownexttick.html\n        var channel = new MessageChannel();\n        // At least Safari Version 6.0.5 (8536.30.1) intermittently cannot create\n        // working message ports the first time a page loads.\n        channel.port1.onmessage = function () {\n            requestTick = requestPortTick;\n            channel.port1.onmessage = flush;\n            flush();\n        };\n        var requestPortTick = function () {\n            // Opera requires us to provide a message payload, regardless of\n            // whether we use it.\n            channel.port2.postMessage(0);\n        };\n        requestTick = function () {\n            setTimeout(flush, 0);\n            requestPortTick();\n        };\n\n    } else {\n        // old browsers\n        requestTick = function () {\n            setTimeout(flush, 0);\n        };\n    }\n    // runs a task after all other tasks have been run\n    // this is useful for unhandled rejection tracking that needs to happen\n    // after all `then`d tasks have been run.\n    nextTick.runAfter = function (task) {\n        laterQueue.push(task);\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n    return nextTick;\n})();\n\n// Attempt to make generics safe in the face of downstream\n// modifications.\n// There is no situation where this is necessary.\n// If you need a security guarantee, these primordials need to be\n// deeply frozen anyway, and if you don’t need a security guarantee,\n// this is just plain paranoid.\n// However, this **might** have the nice side-effect of reducing the size of\n// the minified code by reducing x.call() to merely x()\n// See Mark Miller’s explanation of what this does.\n// http://wiki.ecmascript.org/doku.php?id=conventions:safe_meta_programming\nvar call = Function.call;\nfunction uncurryThis(f) {\n    return function () {\n        return call.apply(f, arguments);\n    };\n}\n// This is equivalent, but slower:\n// uncurryThis = Function_bind.bind(Function_bind.call);\n// http://jsperf.com/uncurrythis\n\nvar array_slice = uncurryThis(Array.prototype.slice);\n\nvar array_reduce = uncurryThis(\n    Array.prototype.reduce || function (callback, basis) {\n        var index = 0,\n            length = this.length;\n        // concerning the initial value, if one is not provided\n        if (arguments.length === 1) {\n            // seek to the first value in the array, accounting\n            // for the possibility that is is a sparse array\n            do {\n                if (index in this) {\n                    basis = this[index++];\n                    break;\n                }\n                if (++index >= length) {\n                    throw new TypeError();\n                }\n            } while (1);\n        }\n        // reduce\n        for (; index < length; index++) {\n            // account for the possibility that the array is sparse\n            if (index in this) {\n                basis = callback(basis, this[index], index);\n            }\n        }\n        return basis;\n    }\n);\n\nvar array_indexOf = uncurryThis(\n    Array.prototype.indexOf || function (value) {\n        // not a very good shim, but good enough for our one use of it\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    }\n);\n\nvar array_map = uncurryThis(\n    Array.prototype.map || function (callback, thisp) {\n        var self = this;\n        var collect = [];\n        array_reduce(self, function (undefined, value, index) {\n            collect.push(callback.call(thisp, value, index, self));\n        }, void 0);\n        return collect;\n    }\n);\n\nvar object_create = Object.create || function (prototype) {\n    function Type() { }\n    Type.prototype = prototype;\n    return new Type();\n};\n\nvar object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n\nvar object_keys = Object.keys || function (object) {\n    var keys = [];\n    for (var key in object) {\n        if (object_hasOwnProperty(object, key)) {\n            keys.push(key);\n        }\n    }\n    return keys;\n};\n\nvar object_toString = uncurryThis(Object.prototype.toString);\n\nfunction isObject(value) {\n    return value === Object(value);\n}\n\n// generator related shims\n\n// FIXME: Remove this function once ES6 generators are in SpiderMonkey.\nfunction isStopIteration(exception) {\n    return (\n        object_toString(exception) === \"[object StopIteration]\" ||\n        exception instanceof QReturnValue\n    );\n}\n\n// FIXME: Remove this helper and Q.return once ES6 generators are in\n// SpiderMonkey.\nvar QReturnValue;\nif (typeof ReturnValue !== \"undefined\") {\n    QReturnValue = ReturnValue;\n} else {\n    QReturnValue = function (value) {\n        this.value = value;\n    };\n}\n\n// long stack traces\n\nvar STACK_JUMP_SEPARATOR = \"From previous event:\";\n\nfunction makeStackTraceLong(error, promise) {\n    // If possible, transform the error stack trace by removing Node and Q\n    // cruft, then concatenating with the stack trace of `promise`. See #57.\n    if (hasStacks &&\n        promise.stack &&\n        typeof error === \"object\" &&\n        error !== null &&\n        error.stack &&\n        error.stack.indexOf(STACK_JUMP_SEPARATOR) === -1\n    ) {\n        var stacks = [];\n        for (var p = promise; !!p; p = p.source) {\n            if (p.stack) {\n                stacks.unshift(p.stack);\n            }\n        }\n        stacks.unshift(error.stack);\n\n        var concatedStacks = stacks.join(\"\\n\" + STACK_JUMP_SEPARATOR + \"\\n\");\n        error.stack = filterStackString(concatedStacks);\n    }\n}\n\nfunction filterStackString(stackString) {\n    var lines = stackString.split(\"\\n\");\n    var desiredLines = [];\n    for (var i = 0; i < lines.length; ++i) {\n        var line = lines[i];\n\n        if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\n            desiredLines.push(line);\n        }\n    }\n    return desiredLines.join(\"\\n\");\n}\n\nfunction isNodeFrame(stackLine) {\n    return stackLine.indexOf(\"(module.js:\") !== -1 ||\n           stackLine.indexOf(\"(node.js:\") !== -1;\n}\n\nfunction getFileNameAndLineNumber(stackLine) {\n    // Named functions: \"at functionName (filename:lineNumber:columnNumber)\"\n    // In IE10 function name can have spaces (\"Anonymous function\") O_o\n    var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n    if (attempt1) {\n        return [attempt1[1], Number(attempt1[2])];\n    }\n\n    // Anonymous functions: \"at filename:lineNumber:columnNumber\"\n    var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n    if (attempt2) {\n        return [attempt2[1], Number(attempt2[2])];\n    }\n\n    // Firefox style: \"function@filename:lineNumber or @filename:lineNumber\"\n    var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n    if (attempt3) {\n        return [attempt3[1], Number(attempt3[2])];\n    }\n}\n\nfunction isInternalFrame(stackLine) {\n    var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n\n    if (!fileNameAndLineNumber) {\n        return false;\n    }\n\n    var fileName = fileNameAndLineNumber[0];\n    var lineNumber = fileNameAndLineNumber[1];\n\n    return fileName === qFileName &&\n        lineNumber >= qStartingLine &&\n        lineNumber <= qEndingLine;\n}\n\n// discover own file name and line number range for filtering stack\n// traces\nfunction captureLine() {\n    if (!hasStacks) {\n        return;\n    }\n\n    try {\n        throw new Error();\n    } catch (e) {\n        var lines = e.stack.split(\"\\n\");\n        var firstLine = lines[0].indexOf(\"@\") > 0 ? lines[1] : lines[2];\n        var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n        if (!fileNameAndLineNumber) {\n            return;\n        }\n\n        qFileName = fileNameAndLineNumber[0];\n        return fileNameAndLineNumber[1];\n    }\n}\n\nfunction deprecate(callback, name, alternative) {\n    return function () {\n        if (typeof console !== \"undefined\" &&\n            typeof console.warn === \"function\") {\n            console.warn(name + \" is deprecated, use \" + alternative +\n                         \" instead.\", new Error(\"\").stack);\n        }\n        return callback.apply(callback, arguments);\n    };\n}\n\n// end of shims\n// beginning of real work\n\n/**\n * Constructs a promise for an immediate reference, passes promises through, or\n * coerces promises from different systems.\n * @param value immediate reference or promise\n */\nfunction Q(value) {\n    // If the object is already a Promise, return it directly.  This enables\n    // the resolve function to both be used to created references from objects,\n    // but to tolerably coerce non-promises to promises.\n    if (value instanceof Promise) {\n        return value;\n    }\n\n    // assimilate thenables\n    if (isPromiseAlike(value)) {\n        return coerce(value);\n    } else {\n        return fulfill(value);\n    }\n}\nQ.resolve = Q;\n\n/**\n * Performs a task in a future turn of the event loop.\n * @param {Function} task\n */\nQ.nextTick = nextTick;\n\n/**\n * Controls whether or not long stack traces will be on\n */\nQ.longStackSupport = false;\n\n// enable long stacks if Q_DEBUG is set\nif (typeof process === \"object\" && process && process.env && process.env.Q_DEBUG) {\n    Q.longStackSupport = true;\n}\n\n/**\n * Constructs a {promise, resolve, reject} object.\n *\n * `resolve` is a callback to invoke with a more resolved value for the\n * promise. To fulfill the promise, invoke `resolve` with any value that is\n * not a thenable. To reject the promise, invoke `resolve` with a rejected\n * thenable, or invoke `reject` with the reason directly. To resolve the\n * promise to another thenable, thus putting it in the same state, invoke\n * `resolve` with that other thenable.\n */\nQ.defer = defer;\nfunction defer() {\n    // if \"messages\" is an \"Array\", that indicates that the promise has not yet\n    // been resolved.  If it is \"undefined\", it has been resolved.  Each\n    // element of the messages array is itself an array of complete arguments to\n    // forward to the resolved promise.  We coerce the resolution value to a\n    // promise using the `resolve` function because it handles both fully\n    // non-thenable values and other thenables gracefully.\n    var messages = [], progressListeners = [], resolvedPromise;\n\n    var deferred = object_create(defer.prototype);\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, operands) {\n        var args = array_slice(arguments);\n        if (messages) {\n            messages.push(args);\n            if (op === \"when\" && operands[1]) { // progress operand\n                progressListeners.push(operands[1]);\n            }\n        } else {\n            Q.nextTick(function () {\n                resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\n            });\n        }\n    };\n\n    // XXX deprecated\n    promise.valueOf = function () {\n        if (messages) {\n            return promise;\n        }\n        var nearerValue = nearer(resolvedPromise);\n        if (isPromise(nearerValue)) {\n            resolvedPromise = nearerValue; // shorten chain\n        }\n        return nearerValue;\n    };\n\n    promise.inspect = function () {\n        if (!resolvedPromise) {\n            return { state: \"pending\" };\n        }\n        return resolvedPromise.inspect();\n    };\n\n    if (Q.longStackSupport && hasStacks) {\n        try {\n            throw new Error();\n        } catch (e) {\n            // NOTE: don't try to use `Error.captureStackTrace` or transfer the\n            // accessor around; that causes memory leaks as per GH-111. Just\n            // reify the stack trace as a string ASAP.\n            //\n            // At the same time, cut off the first line; it's always just\n            // \"[object Promise]\\n\", as per the `toString`.\n            promise.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\n        }\n    }\n\n    // NOTE: we do the checks for `resolvedPromise` in each method, instead of\n    // consolidating them into `become`, since otherwise we'd create new\n    // promises with the lines `become(whatever(value))`. See e.g. GH-252.\n\n    function become(newPromise) {\n        resolvedPromise = newPromise;\n        promise.source = newPromise;\n\n        array_reduce(messages, function (undefined, message) {\n            Q.nextTick(function () {\n                newPromise.promiseDispatch.apply(newPromise, message);\n            });\n        }, void 0);\n\n        messages = void 0;\n        progressListeners = void 0;\n    }\n\n    deferred.promise = promise;\n    deferred.resolve = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(Q(value));\n    };\n\n    deferred.fulfill = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(fulfill(value));\n    };\n    deferred.reject = function (reason) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(reject(reason));\n    };\n    deferred.notify = function (progress) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        array_reduce(progressListeners, function (undefined, progressListener) {\n            Q.nextTick(function () {\n                progressListener(progress);\n            });\n        }, void 0);\n    };\n\n    return deferred;\n}\n\n/**\n * Creates a Node-style callback that will resolve or reject the deferred\n * promise.\n * @returns a nodeback\n */\ndefer.prototype.makeNodeResolver = function () {\n    var self = this;\n    return function (error, value) {\n        if (error) {\n            self.reject(error);\n        } else if (arguments.length > 2) {\n            self.resolve(array_slice(arguments, 1));\n        } else {\n            self.resolve(value);\n        }\n    };\n};\n\n/**\n * @param resolver {Function} a function that returns nothing and accepts\n * the resolve, reject, and notify functions for a deferred.\n * @returns a promise that may be resolved with the given resolve and reject\n * functions, or rejected by a thrown exception in resolver\n */\nQ.Promise = promise; // ES6\nQ.promise = promise;\nfunction promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"resolver must be a function.\");\n    }\n    var deferred = defer();\n    try {\n        resolver(deferred.resolve, deferred.reject, deferred.notify);\n    } catch (reason) {\n        deferred.reject(reason);\n    }\n    return deferred.promise;\n}\n\npromise.race = race; // ES6\npromise.all = all; // ES6\npromise.reject = reject; // ES6\npromise.resolve = Q; // ES6\n\n// XXX experimental.  This method is a way to denote that a local value is\n// serializable and should be immediately dispatched to a remote upon request,\n// instead of passing a reference.\nQ.passByCopy = function (object) {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return object;\n};\n\nPromise.prototype.passByCopy = function () {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return this;\n};\n\n/**\n * If two promises eventually fulfill to the same value, promises that value,\n * but otherwise rejects.\n * @param x {Any*}\n * @param y {Any*}\n * @returns {Any*} a promise for x and y if they are the same, but a rejection\n * otherwise.\n *\n */\nQ.join = function (x, y) {\n    return Q(x).join(y);\n};\n\nPromise.prototype.join = function (that) {\n    return Q([this, that]).spread(function (x, y) {\n        if (x === y) {\n            // TODO: \"===\" should be Object.is or equiv\n            return x;\n        } else {\n            throw new Error(\"Can't join: not the same: \" + x + \" \" + y);\n        }\n    });\n};\n\n/**\n * Returns a promise for the first of an array of promises to become settled.\n * @param answers {Array[Any*]} promises to race\n * @returns {Any*} the first promise to be settled\n */\nQ.race = race;\nfunction race(answerPs) {\n    return promise(function (resolve, reject) {\n        // Switch to this once we can assume at least ES5\n        // answerPs.forEach(function (answerP) {\n        //     Q(answerP).then(resolve, reject);\n        // });\n        // Use this in the meantime\n        for (var i = 0, len = answerPs.length; i < len; i++) {\n            Q(answerPs[i]).then(resolve, reject);\n        }\n    });\n}\n\nPromise.prototype.race = function () {\n    return this.then(Q.race);\n};\n\n/**\n * Constructs a Promise with a promise descriptor object and optional fallback\n * function.  The descriptor contains methods like when(rejected), get(name),\n * set(name, value), post(name, args), and delete(name), which all\n * return either a value, a promise for a value, or a rejection.  The fallback\n * accepts the operation name, a resolver, and any further arguments that would\n * have been forwarded to the appropriate method above had a method been\n * provided with the proper name.  The API makes no guarantees about the nature\n * of the returned object, apart from that it is usable whereever promises are\n * bought and sold.\n */\nQ.makePromise = Promise;\nfunction Promise(descriptor, fallback, inspect) {\n    if (fallback === void 0) {\n        fallback = function (op) {\n            return reject(new Error(\n                \"Promise does not support operation: \" + op\n            ));\n        };\n    }\n    if (inspect === void 0) {\n        inspect = function () {\n            return {state: \"unknown\"};\n        };\n    }\n\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, args) {\n        var result;\n        try {\n            if (descriptor[op]) {\n                result = descriptor[op].apply(promise, args);\n            } else {\n                result = fallback.call(promise, op, args);\n            }\n        } catch (exception) {\n            result = reject(exception);\n        }\n        if (resolve) {\n            resolve(result);\n        }\n    };\n\n    promise.inspect = inspect;\n\n    // XXX deprecated `valueOf` and `exception` support\n    if (inspect) {\n        var inspected = inspect();\n        if (inspected.state === \"rejected\") {\n            promise.exception = inspected.reason;\n        }\n\n        promise.valueOf = function () {\n            var inspected = inspect();\n            if (inspected.state === \"pending\" ||\n                inspected.state === \"rejected\") {\n                return promise;\n            }\n            return inspected.value;\n        };\n    }\n\n    return promise;\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.then = function (fulfilled, rejected, progressed) {\n    var self = this;\n    var deferred = defer();\n    var done = false;   // ensure the untrusted promise makes at most a\n                        // single call to one of the callbacks\n\n    function _fulfilled(value) {\n        try {\n            return typeof fulfilled === \"function\" ? fulfilled(value) : value;\n        } catch (exception) {\n            return reject(exception);\n        }\n    }\n\n    function _rejected(exception) {\n        if (typeof rejected === \"function\") {\n            makeStackTraceLong(exception, self);\n            try {\n                return rejected(exception);\n            } catch (newException) {\n                return reject(newException);\n            }\n        }\n        return reject(exception);\n    }\n\n    function _progressed(value) {\n        return typeof progressed === \"function\" ? progressed(value) : value;\n    }\n\n    Q.nextTick(function () {\n        self.promiseDispatch(function (value) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_fulfilled(value));\n        }, \"when\", [function (exception) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_rejected(exception));\n        }]);\n    });\n\n    // Progress propagator need to be attached in the current tick.\n    self.promiseDispatch(void 0, \"when\", [void 0, function (value) {\n        var newValue;\n        var threw = false;\n        try {\n            newValue = _progressed(value);\n        } catch (e) {\n            threw = true;\n            if (Q.onerror) {\n                Q.onerror(e);\n            } else {\n                throw e;\n            }\n        }\n\n        if (!threw) {\n            deferred.notify(newValue);\n        }\n    }]);\n\n    return deferred.promise;\n};\n\nQ.tap = function (promise, callback) {\n    return Q(promise).tap(callback);\n};\n\n/**\n * Works almost like \"finally\", but not called for rejections.\n * Original resolution value is passed through callback unaffected.\n * Callback may return a promise that will be awaited for.\n * @param {Function} callback\n * @returns {Q.Promise}\n * @example\n * doSomething()\n *   .then(...)\n *   .tap(console.log)\n *   .then(...);\n */\nPromise.prototype.tap = function (callback) {\n    callback = Q(callback);\n\n    return this.then(function (value) {\n        return callback.fcall(value).thenResolve(value);\n    });\n};\n\n/**\n * Registers an observer on a promise.\n *\n * Guarantees:\n *\n * 1. that fulfilled and rejected will be called only once.\n * 2. that either the fulfilled callback or the rejected callback will be\n *    called, but not both.\n * 3. that fulfilled and rejected will not be called in this turn.\n *\n * @param value      promise or immediate reference to observe\n * @param fulfilled  function to be called with the fulfilled value\n * @param rejected   function to be called with the rejection exception\n * @param progressed function to be called on any progress notifications\n * @return promise for the return value from the invoked callback\n */\nQ.when = when;\nfunction when(value, fulfilled, rejected, progressed) {\n    return Q(value).then(fulfilled, rejected, progressed);\n}\n\nPromise.prototype.thenResolve = function (value) {\n    return this.then(function () { return value; });\n};\n\nQ.thenResolve = function (promise, value) {\n    return Q(promise).thenResolve(value);\n};\n\nPromise.prototype.thenReject = function (reason) {\n    return this.then(function () { throw reason; });\n};\n\nQ.thenReject = function (promise, reason) {\n    return Q(promise).thenReject(reason);\n};\n\n/**\n * If an object is not a promise, it is as \"near\" as possible.\n * If a promise is rejected, it is as \"near\" as possible too.\n * If it’s a fulfilled promise, the fulfillment value is nearer.\n * If it’s a deferred promise and the deferred has been resolved, the\n * resolution is \"nearer\".\n * @param object\n * @returns most resolved (nearest) form of the object\n */\n\n// XXX should we re-do this?\nQ.nearer = nearer;\nfunction nearer(value) {\n    if (isPromise(value)) {\n        var inspected = value.inspect();\n        if (inspected.state === \"fulfilled\") {\n            return inspected.value;\n        }\n    }\n    return value;\n}\n\n/**\n * @returns whether the given object is a promise.\n * Otherwise it is a fulfilled value.\n */\nQ.isPromise = isPromise;\nfunction isPromise(object) {\n    return object instanceof Promise;\n}\n\nQ.isPromiseAlike = isPromiseAlike;\nfunction isPromiseAlike(object) {\n    return isObject(object) && typeof object.then === \"function\";\n}\n\n/**\n * @returns whether the given object is a pending promise, meaning not\n * fulfilled or rejected.\n */\nQ.isPending = isPending;\nfunction isPending(object) {\n    return isPromise(object) && object.inspect().state === \"pending\";\n}\n\nPromise.prototype.isPending = function () {\n    return this.inspect().state === \"pending\";\n};\n\n/**\n * @returns whether the given object is a value or fulfilled\n * promise.\n */\nQ.isFulfilled = isFulfilled;\nfunction isFulfilled(object) {\n    return !isPromise(object) || object.inspect().state === \"fulfilled\";\n}\n\nPromise.prototype.isFulfilled = function () {\n    return this.inspect().state === \"fulfilled\";\n};\n\n/**\n * @returns whether the given object is a rejected promise.\n */\nQ.isRejected = isRejected;\nfunction isRejected(object) {\n    return isPromise(object) && object.inspect().state === \"rejected\";\n}\n\nPromise.prototype.isRejected = function () {\n    return this.inspect().state === \"rejected\";\n};\n\n//// BEGIN UNHANDLED REJECTION TRACKING\n\n// This promise library consumes exceptions thrown in handlers so they can be\n// handled by a subsequent promise.  The exceptions get added to this array when\n// they are created, and removed when they are handled.  Note that in ES6 or\n// shimmed environments, this would naturally be a `Set`.\nvar unhandledReasons = [];\nvar unhandledRejections = [];\nvar reportedUnhandledRejections = [];\nvar trackUnhandledRejections = true;\n\nfunction resetUnhandledRejections() {\n    unhandledReasons.length = 0;\n    unhandledRejections.length = 0;\n\n    if (!trackUnhandledRejections) {\n        trackUnhandledRejections = true;\n    }\n}\n\nfunction trackRejection(promise, reason) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n    if (typeof process === \"object\" && typeof process.emit === \"function\") {\n        Q.nextTick.runAfter(function () {\n            if (array_indexOf(unhandledRejections, promise) !== -1) {\n                process.emit(\"unhandledRejection\", reason, promise);\n                reportedUnhandledRejections.push(promise);\n            }\n        });\n    }\n\n    unhandledRejections.push(promise);\n    if (reason && typeof reason.stack !== \"undefined\") {\n        unhandledReasons.push(reason.stack);\n    } else {\n        unhandledReasons.push(\"(no stack) \" + reason);\n    }\n}\n\nfunction untrackRejection(promise) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    var at = array_indexOf(unhandledRejections, promise);\n    if (at !== -1) {\n        if (typeof process === \"object\" && typeof process.emit === \"function\") {\n            Q.nextTick.runAfter(function () {\n                var atReport = array_indexOf(reportedUnhandledRejections, promise);\n                if (atReport !== -1) {\n                    process.emit(\"rejectionHandled\", unhandledReasons[at], promise);\n                    reportedUnhandledRejections.splice(atReport, 1);\n                }\n            });\n        }\n        unhandledRejections.splice(at, 1);\n        unhandledReasons.splice(at, 1);\n    }\n}\n\nQ.resetUnhandledRejections = resetUnhandledRejections;\n\nQ.getUnhandledReasons = function () {\n    // Make a copy so that consumers can't interfere with our internal state.\n    return unhandledReasons.slice();\n};\n\nQ.stopUnhandledRejectionTracking = function () {\n    resetUnhandledRejections();\n    trackUnhandledRejections = false;\n};\n\nresetUnhandledRejections();\n\n//// END UNHANDLED REJECTION TRACKING\n\n/**\n * Constructs a rejected promise.\n * @param reason value describing the failure\n */\nQ.reject = reject;\nfunction reject(reason) {\n    var rejection = Promise({\n        \"when\": function (rejected) {\n            // note that the error has been handled\n            if (rejected) {\n                untrackRejection(this);\n            }\n            return rejected ? rejected(reason) : this;\n        }\n    }, function fallback() {\n        return this;\n    }, function inspect() {\n        return { state: \"rejected\", reason: reason };\n    });\n\n    // Note that the reason has not been handled.\n    trackRejection(rejection, reason);\n\n    return rejection;\n}\n\n/**\n * Constructs a fulfilled promise for an immediate reference.\n * @param value immediate reference\n */\nQ.fulfill = fulfill;\nfunction fulfill(value) {\n    return Promise({\n        \"when\": function () {\n            return value;\n        },\n        \"get\": function (name) {\n            return value[name];\n        },\n        \"set\": function (name, rhs) {\n            value[name] = rhs;\n        },\n        \"delete\": function (name) {\n            delete value[name];\n        },\n        \"post\": function (name, args) {\n            // Mark Miller proposes that post with no name should apply a\n            // promised function.\n            if (name === null || name === void 0) {\n                return value.apply(void 0, args);\n            } else {\n                return value[name].apply(value, args);\n            }\n        },\n        \"apply\": function (thisp, args) {\n            return value.apply(thisp, args);\n        },\n        \"keys\": function () {\n            return object_keys(value);\n        }\n    }, void 0, function inspect() {\n        return { state: \"fulfilled\", value: value };\n    });\n}\n\n/**\n * Converts thenables to Q promises.\n * @param promise thenable promise\n * @returns a Q promise\n */\nfunction coerce(promise) {\n    var deferred = defer();\n    Q.nextTick(function () {\n        try {\n            promise.then(deferred.resolve, deferred.reject, deferred.notify);\n        } catch (exception) {\n            deferred.reject(exception);\n        }\n    });\n    return deferred.promise;\n}\n\n/**\n * Annotates an object such that it will never be\n * transferred away from this process over any promise\n * communication channel.\n * @param object\n * @returns promise a wrapping of that object that\n * additionally responds to the \"isDef\" message\n * without a rejection.\n */\nQ.master = master;\nfunction master(object) {\n    return Promise({\n        \"isDef\": function () {}\n    }, function fallback(op, args) {\n        return dispatch(object, op, args);\n    }, function () {\n        return Q(object).inspect();\n    });\n}\n\n/**\n * Spreads the values of a promised array of arguments into the\n * fulfillment callback.\n * @param fulfilled callback that receives variadic arguments from the\n * promised array\n * @param rejected callback that receives the exception if the promise\n * is rejected.\n * @returns a promise for the return value or thrown exception of\n * either callback.\n */\nQ.spread = spread;\nfunction spread(value, fulfilled, rejected) {\n    return Q(value).spread(fulfilled, rejected);\n}\n\nPromise.prototype.spread = function (fulfilled, rejected) {\n    return this.all().then(function (array) {\n        return fulfilled.apply(void 0, array);\n    }, rejected);\n};\n\n/**\n * The async function is a decorator for generator functions, turning\n * them into asynchronous generators.  Although generators are only part\n * of the newest ECMAScript 6 drafts, this code does not cause syntax\n * errors in older engines.  This code should continue to work and will\n * in fact improve over time as the language improves.\n *\n * ES6 generators are currently part of V8 version 3.19 with the\n * --harmony-generators runtime flag enabled.  SpiderMonkey has had them\n * for longer, but under an older Python-inspired form.  This function\n * works on both kinds of generators.\n *\n * Decorates a generator function such that:\n *  - it may yield promises\n *  - execution will continue when that promise is fulfilled\n *  - the value of the yield expression will be the fulfilled value\n *  - it returns a promise for the return value (when the generator\n *    stops iterating)\n *  - the decorated function returns a promise for the return value\n *    of the generator or the first rejected promise among those\n *    yielded.\n *  - if an error is thrown in the generator, it propagates through\n *    every following yield until it is caught, or until it escapes\n *    the generator function altogether, and is translated into a\n *    rejection for the promise returned by the decorated generator.\n */\nQ.async = async;\nfunction async(makeGenerator) {\n    return function () {\n        // when verb is \"send\", arg is a value\n        // when verb is \"throw\", arg is an exception\n        function continuer(verb, arg) {\n            var result;\n\n            // Until V8 3.19 / Chromium 29 is released, SpiderMonkey is the only\n            // engine that has a deployed base of browsers that support generators.\n            // However, SM's generators use the Python-inspired semantics of\n            // outdated ES6 drafts.  We would like to support ES6, but we'd also\n            // like to make it possible to use generators in deployed browsers, so\n            // we also support Python-style generators.  At some point we can remove\n            // this block.\n\n            if (typeof StopIteration === \"undefined\") {\n                // ES6 Generators\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    return reject(exception);\n                }\n                if (result.done) {\n                    return Q(result.value);\n                } else {\n                    return when(result.value, callback, errback);\n                }\n            } else {\n                // SpiderMonkey Generators\n                // FIXME: Remove this case when SM does ES6 generators.\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    if (isStopIteration(exception)) {\n                        return Q(exception.value);\n                    } else {\n                        return reject(exception);\n                    }\n                }\n                return when(result, callback, errback);\n            }\n        }\n        var generator = makeGenerator.apply(this, arguments);\n        var callback = continuer.bind(continuer, \"next\");\n        var errback = continuer.bind(continuer, \"throw\");\n        return callback();\n    };\n}\n\n/**\n * The spawn function is a small wrapper around async that immediately\n * calls the generator and also ends the promise chain, so that any\n * unhandled errors are thrown instead of forwarded to the error\n * handler. This is useful because it's extremely common to run\n * generators at the top-level to work with libraries.\n */\nQ.spawn = spawn;\nfunction spawn(makeGenerator) {\n    Q.done(Q.async(makeGenerator)());\n}\n\n// FIXME: Remove this interface once ES6 generators are in SpiderMonkey.\n/**\n * Throws a ReturnValue exception to stop an asynchronous generator.\n *\n * This interface is a stop-gap measure to support generator return\n * values in older Firefox/SpiderMonkey.  In browsers that support ES6\n * generators like Chromium 29, just use \"return\" in your generator\n * functions.\n *\n * @param value the return value for the surrounding generator\n * @throws ReturnValue exception with the value.\n * @example\n * // ES6 style\n * Q.async(function* () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      return foo + bar;\n * })\n * // Older SpiderMonkey style\n * Q.async(function () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      Q.return(foo + bar);\n * })\n */\nQ[\"return\"] = _return;\nfunction _return(value) {\n    throw new QReturnValue(value);\n}\n\n/**\n * The promised function decorator ensures that any promise arguments\n * are settled and passed as values (`this` is also settled and passed\n * as a value).  It will also ensure that the result of a function is\n * always a promise.\n *\n * @example\n * var add = Q.promised(function (a, b) {\n *     return a + b;\n * });\n * add(Q(a), Q(B));\n *\n * @param {function} callback The function to decorate\n * @returns {function} a function that has been decorated.\n */\nQ.promised = promised;\nfunction promised(callback) {\n    return function () {\n        return spread([this, all(arguments)], function (self, args) {\n            return callback.apply(self, args);\n        });\n    };\n}\n\n/**\n * sends a message to a value in a future turn\n * @param object* the recipient\n * @param op the name of the message operation, e.g., \"when\",\n * @param args further arguments to be forwarded to the operation\n * @returns result {Promise} a promise for the result of the operation\n */\nQ.dispatch = dispatch;\nfunction dispatch(object, op, args) {\n    return Q(object).dispatch(op, args);\n}\n\nPromise.prototype.dispatch = function (op, args) {\n    var self = this;\n    var deferred = defer();\n    Q.nextTick(function () {\n        self.promiseDispatch(deferred.resolve, op, args);\n    });\n    return deferred.promise;\n};\n\n/**\n * Gets the value of a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to get\n * @return promise for the property value\n */\nQ.get = function (object, key) {\n    return Q(object).dispatch(\"get\", [key]);\n};\n\nPromise.prototype.get = function (key) {\n    return this.dispatch(\"get\", [key]);\n};\n\n/**\n * Sets the value of a property in a future turn.\n * @param object    promise or immediate reference for object object\n * @param name      name of property to set\n * @param value     new value of property\n * @return promise for the return value\n */\nQ.set = function (object, key, value) {\n    return Q(object).dispatch(\"set\", [key, value]);\n};\n\nPromise.prototype.set = function (key, value) {\n    return this.dispatch(\"set\", [key, value]);\n};\n\n/**\n * Deletes a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to delete\n * @return promise for the return value\n */\nQ.del = // XXX legacy\nQ[\"delete\"] = function (object, key) {\n    return Q(object).dispatch(\"delete\", [key]);\n};\n\nPromise.prototype.del = // XXX legacy\nPromise.prototype[\"delete\"] = function (key) {\n    return this.dispatch(\"delete\", [key]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param value     a value to post, typically an array of\n *                  invocation arguments for promises that\n *                  are ultimately backed with `resolve` values,\n *                  as opposed to those backed with URLs\n *                  wherein the posted value can be any\n *                  JSON serializable object.\n * @return promise for the return value\n */\n// bound locally because it is used by other methods\nQ.mapply = // XXX As proposed by \"Redsandro\"\nQ.post = function (object, name, args) {\n    return Q(object).dispatch(\"post\", [name, args]);\n};\n\nPromise.prototype.mapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.post = function (name, args) {\n    return this.dispatch(\"post\", [name, args]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param ...args   array of invocation arguments\n * @return promise for the return value\n */\nQ.send = // XXX Mark Miller's proposed parlance\nQ.mcall = // XXX As proposed by \"Redsandro\"\nQ.invoke = function (object, name /*...args*/) {\n    return Q(object).dispatch(\"post\", [name, array_slice(arguments, 2)]);\n};\n\nPromise.prototype.send = // XXX Mark Miller's proposed parlance\nPromise.prototype.mcall = // XXX As proposed by \"Redsandro\"\nPromise.prototype.invoke = function (name /*...args*/) {\n    return this.dispatch(\"post\", [name, array_slice(arguments, 1)]);\n};\n\n/**\n * Applies the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param args      array of application arguments\n */\nQ.fapply = function (object, args) {\n    return Q(object).dispatch(\"apply\", [void 0, args]);\n};\n\nPromise.prototype.fapply = function (args) {\n    return this.dispatch(\"apply\", [void 0, args]);\n};\n\n/**\n * Calls the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ[\"try\"] =\nQ.fcall = function (object /* ...args*/) {\n    return Q(object).dispatch(\"apply\", [void 0, array_slice(arguments, 1)]);\n};\n\nPromise.prototype.fcall = function (/*...args*/) {\n    return this.dispatch(\"apply\", [void 0, array_slice(arguments)]);\n};\n\n/**\n * Binds the promised function, transforming return values into a fulfilled\n * promise and thrown errors into a rejected one.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ.fbind = function (object /*...args*/) {\n    var promise = Q(object);\n    var args = array_slice(arguments, 1);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\nPromise.prototype.fbind = function (/*...args*/) {\n    var promise = this;\n    var args = array_slice(arguments);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\n\n/**\n * Requests the names of the owned properties of a promised\n * object in a future turn.\n * @param object    promise or immediate reference for target object\n * @return promise for the keys of the eventually settled object\n */\nQ.keys = function (object) {\n    return Q(object).dispatch(\"keys\", []);\n};\n\nPromise.prototype.keys = function () {\n    return this.dispatch(\"keys\", []);\n};\n\n/**\n * Turns an array of promises into a promise for an array.  If any of\n * the promises gets rejected, the whole array is rejected immediately.\n * @param {Array*} an array (or promise for an array) of values (or\n * promises for values)\n * @returns a promise for an array of the corresponding values\n */\n// By Mark Miller\n// http://wiki.ecmascript.org/doku.php?id=strawman:concurrency&rev=1308776521#allfulfilled\nQ.all = all;\nfunction all(promises) {\n    return when(promises, function (promises) {\n        var pendingCount = 0;\n        var deferred = defer();\n        array_reduce(promises, function (undefined, promise, index) {\n            var snapshot;\n            if (\n                isPromise(promise) &&\n                (snapshot = promise.inspect()).state === \"fulfilled\"\n            ) {\n                promises[index] = snapshot.value;\n            } else {\n                ++pendingCount;\n                when(\n                    promise,\n                    function (value) {\n                        promises[index] = value;\n                        if (--pendingCount === 0) {\n                            deferred.resolve(promises);\n                        }\n                    },\n                    deferred.reject,\n                    function (progress) {\n                        deferred.notify({ index: index, value: progress });\n                    }\n                );\n            }\n        }, void 0);\n        if (pendingCount === 0) {\n            deferred.resolve(promises);\n        }\n        return deferred.promise;\n    });\n}\n\nPromise.prototype.all = function () {\n    return all(this);\n};\n\n/**\n * Returns the first resolved promise of an array. Prior rejected promises are\n * ignored.  Rejects only if all promises are rejected.\n * @param {Array*} an array containing values or promises for values\n * @returns a promise fulfilled with the value of the first resolved promise,\n * or a rejected promise if all promises are rejected.\n */\nQ.any = any;\n\nfunction any(promises) {\n    if (promises.length === 0) {\n        return Q.resolve();\n    }\n\n    var deferred = Q.defer();\n    var pendingCount = 0;\n    array_reduce(promises, function (prev, current, index) {\n        var promise = promises[index];\n\n        pendingCount++;\n\n        when(promise, onFulfilled, onRejected, onProgress);\n        function onFulfilled(result) {\n            deferred.resolve(result);\n        }\n        function onRejected() {\n            pendingCount--;\n            if (pendingCount === 0) {\n                deferred.reject(new Error(\n                    \"Can't get fulfillment value from any promise, all \" +\n                    \"promises were rejected.\"\n                ));\n            }\n        }\n        function onProgress(progress) {\n            deferred.notify({\n                index: index,\n                value: progress\n            });\n        }\n    }, undefined);\n\n    return deferred.promise;\n}\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n/**\n * Waits for all promises to be settled, either fulfilled or\n * rejected.  This is distinct from `all` since that would stop\n * waiting at the first rejection.  The promise returned by\n * `allResolved` will never be rejected.\n * @param promises a promise for an array (or an array) of promises\n * (or values)\n * @return a promise for an array of promises\n */\nQ.allResolved = deprecate(allResolved, \"allResolved\", \"allSettled\");\nfunction allResolved(promises) {\n    return when(promises, function (promises) {\n        promises = array_map(promises, Q);\n        return when(all(array_map(promises, function (promise) {\n            return when(promise, noop, noop);\n        })), function () {\n            return promises;\n        });\n    });\n}\n\nPromise.prototype.allResolved = function () {\n    return allResolved(this);\n};\n\n/**\n * @see Promise#allSettled\n */\nQ.allSettled = allSettled;\nfunction allSettled(promises) {\n    return Q(promises).allSettled();\n}\n\n/**\n * Turns an array of promises into a promise for an array of their states (as\n * returned by `inspect`) when they have all settled.\n * @param {Array[Any*]} values an array (or promise for an array) of values (or\n * promises for values)\n * @returns {Array[State]} an array of states for the respective values.\n */\nPromise.prototype.allSettled = function () {\n    return this.then(function (promises) {\n        return all(array_map(promises, function (promise) {\n            promise = Q(promise);\n            function regardless() {\n                return promise.inspect();\n            }\n            return promise.then(regardless, regardless);\n        }));\n    });\n};\n\n/**\n * Captures the failure of a promise, giving an oportunity to recover\n * with a callback.  If the given promise is fulfilled, the returned\n * promise is fulfilled.\n * @param {Any*} promise for something\n * @param {Function} callback to fulfill the returned promise if the\n * given promise is rejected\n * @returns a promise for the return value of the callback\n */\nQ.fail = // XXX legacy\nQ[\"catch\"] = function (object, rejected) {\n    return Q(object).then(void 0, rejected);\n};\n\nPromise.prototype.fail = // XXX legacy\nPromise.prototype[\"catch\"] = function (rejected) {\n    return this.then(void 0, rejected);\n};\n\n/**\n * Attaches a listener that can respond to progress notifications from a\n * promise's originating deferred. This listener receives the exact arguments\n * passed to ``deferred.notify``.\n * @param {Any*} promise for something\n * @param {Function} callback to receive any progress notifications\n * @returns the given promise, unchanged\n */\nQ.progress = progress;\nfunction progress(object, progressed) {\n    return Q(object).then(void 0, void 0, progressed);\n}\n\nPromise.prototype.progress = function (progressed) {\n    return this.then(void 0, void 0, progressed);\n};\n\n/**\n * Provides an opportunity to observe the settling of a promise,\n * regardless of whether the promise is fulfilled or rejected.  Forwards\n * the resolution to the returned promise when the callback is done.\n * The callback can return a promise to defer completion.\n * @param {Any*} promise\n * @param {Function} callback to observe the resolution of the given\n * promise, takes no arguments.\n * @returns a promise for the resolution of the given promise when\n * ``fin`` is done.\n */\nQ.fin = // XXX legacy\nQ[\"finally\"] = function (object, callback) {\n    return Q(object)[\"finally\"](callback);\n};\n\nPromise.prototype.fin = // XXX legacy\nPromise.prototype[\"finally\"] = function (callback) {\n    callback = Q(callback);\n    return this.then(function (value) {\n        return callback.fcall().then(function () {\n            return value;\n        });\n    }, function (reason) {\n        // TODO attempt to recycle the rejection with \"this\".\n        return callback.fcall().then(function () {\n            throw reason;\n        });\n    });\n};\n\n/**\n * Terminates a chain of promises, forcing rejections to be\n * thrown as exceptions.\n * @param {Any*} promise at the end of a chain of promises\n * @returns nothing\n */\nQ.done = function (object, fulfilled, rejected, progress) {\n    return Q(object).done(fulfilled, rejected, progress);\n};\n\nPromise.prototype.done = function (fulfilled, rejected, progress) {\n    var onUnhandledError = function (error) {\n        // forward to a future turn so that ``when``\n        // does not catch it and turn it into a rejection.\n        Q.nextTick(function () {\n            makeStackTraceLong(error, promise);\n            if (Q.onerror) {\n                Q.onerror(error);\n            } else {\n                throw error;\n            }\n        });\n    };\n\n    // Avoid unnecessary `nextTick`ing via an unnecessary `when`.\n    var promise = fulfilled || rejected || progress ?\n        this.then(fulfilled, rejected, progress) :\n        this;\n\n    if (typeof process === \"object\" && process && process.domain) {\n        onUnhandledError = process.domain.bind(onUnhandledError);\n    }\n\n    promise.then(void 0, onUnhandledError);\n};\n\n/**\n * Causes a promise to be rejected if it does not get fulfilled before\n * some milliseconds time out.\n * @param {Any*} promise\n * @param {Number} milliseconds timeout\n * @param {Any*} custom error message or Error object (optional)\n * @returns a promise for the resolution of the given promise if it is\n * fulfilled before the timeout, otherwise rejected.\n */\nQ.timeout = function (object, ms, error) {\n    return Q(object).timeout(ms, error);\n};\n\nPromise.prototype.timeout = function (ms, error) {\n    var deferred = defer();\n    var timeoutId = setTimeout(function () {\n        if (!error || \"string\" === typeof error) {\n            error = new Error(error || \"Timed out after \" + ms + \" ms\");\n            error.code = \"ETIMEDOUT\";\n        }\n        deferred.reject(error);\n    }, ms);\n\n    this.then(function (value) {\n        clearTimeout(timeoutId);\n        deferred.resolve(value);\n    }, function (exception) {\n        clearTimeout(timeoutId);\n        deferred.reject(exception);\n    }, deferred.notify);\n\n    return deferred.promise;\n};\n\n/**\n * Returns a promise for the given value (or promised value), some\n * milliseconds after it resolved. Passes rejections immediately.\n * @param {Any*} promise\n * @param {Number} milliseconds\n * @returns a promise for the resolution of the given promise after milliseconds\n * time has elapsed since the resolution of the given promise.\n * If the given promise rejects, that is passed immediately.\n */\nQ.delay = function (object, timeout) {\n    if (timeout === void 0) {\n        timeout = object;\n        object = void 0;\n    }\n    return Q(object).delay(timeout);\n};\n\nPromise.prototype.delay = function (timeout) {\n    return this.then(function (value) {\n        var deferred = defer();\n        setTimeout(function () {\n            deferred.resolve(value);\n        }, timeout);\n        return deferred.promise;\n    });\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided as an array, and returns a promise.\n *\n *      Q.nfapply(FS.readFile, [__filename])\n *      .then(function (content) {\n *      })\n *\n */\nQ.nfapply = function (callback, args) {\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfapply = function (args) {\n    var deferred = defer();\n    var nodeArgs = array_slice(args);\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided individually, and returns a promise.\n * @example\n * Q.nfcall(FS.readFile, __filename)\n * .then(function (content) {\n * })\n *\n */\nQ.nfcall = function (callback /*...args*/) {\n    var args = array_slice(arguments, 1);\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfcall = function (/*...args*/) {\n    var nodeArgs = array_slice(arguments);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Wraps a NodeJS continuation passing function and returns an equivalent\n * version that returns a promise.\n * @example\n * Q.nfbind(FS.readFile, __filename)(\"utf-8\")\n * .then(console.log)\n * .done()\n */\nQ.nfbind =\nQ.denodeify = function (callback /*...args*/) {\n    var baseArgs = array_slice(arguments, 1);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(callback).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nfbind =\nPromise.prototype.denodeify = function (/*...args*/) {\n    var args = array_slice(arguments);\n    args.unshift(this);\n    return Q.denodeify.apply(void 0, args);\n};\n\nQ.nbind = function (callback, thisp /*...args*/) {\n    var baseArgs = array_slice(arguments, 2);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        function bound() {\n            return callback.apply(thisp, arguments);\n        }\n        Q(bound).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nbind = function (/*thisp, ...args*/) {\n    var args = array_slice(arguments, 0);\n    args.unshift(this);\n    return Q.nbind.apply(void 0, args);\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback with a given array of arguments, plus a provided callback.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param {Array} args arguments to pass to the method; the callback\n * will be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nmapply = // XXX As proposed by \"Redsandro\"\nQ.npost = function (object, name, args) {\n    return Q(object).npost(name, args);\n};\n\nPromise.prototype.nmapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.npost = function (name, args) {\n    var nodeArgs = array_slice(args || []);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback, forwarding the given variadic arguments, plus a provided\n * callback argument.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param ...args arguments to pass to the method; the callback will\n * be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nsend = // XXX Based on Mark Miller's proposed \"send\"\nQ.nmcall = // XXX Based on \"Redsandro's\" proposal\nQ.ninvoke = function (object, name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 2);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    Q(object).dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\nPromise.prototype.nsend = // XXX Based on Mark Miller's proposed \"send\"\nPromise.prototype.nmcall = // XXX Based on \"Redsandro's\" proposal\nPromise.prototype.ninvoke = function (name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 1);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * If a function would like to support both Node continuation-passing-style and\n * promise-returning-style, it can end its internal promise chain with\n * `nodeify(nodeback)`, forwarding the optional nodeback argument.  If the user\n * elects to use a nodeback, the result will be sent there.  If they do not\n * pass a nodeback, they will receive the result promise.\n * @param object a result (or a promise for a result)\n * @param {Function} nodeback a Node.js-style callback\n * @returns either the promise or nothing\n */\nQ.nodeify = nodeify;\nfunction nodeify(object, nodeback) {\n    return Q(object).nodeify(nodeback);\n}\n\nPromise.prototype.nodeify = function (nodeback) {\n    if (nodeback) {\n        this.then(function (value) {\n            Q.nextTick(function () {\n                nodeback(null, value);\n            });\n        }, function (error) {\n            Q.nextTick(function () {\n                nodeback(error);\n            });\n        });\n    } else {\n        return this;\n    }\n};\n\nQ.noConflict = function() {\n    throw new Error(\"Q.noConflict only works when Q is used as a global\");\n};\n\n// All code before this point will be filtered from stack traces.\nvar qEndingLine = captureLine();\n\nreturn Q;\n\n});\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8), __webpack_require__(20).setImmediate))\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar AuthSdkError = __webpack_require__(1);\n\n// storage must have getItem and setItem\nfunction storageBuilder(webstorage, storageName) {\n  if (typeof storageName !== 'string' || !storageName.length) {\n    throw new AuthSdkError('\"storageName\" is required');\n  }\n\n  function getStorage() {\n    var storageString = webstorage.getItem(storageName);\n    storageString = storageString || '{}';\n    try {\n      return JSON.parse(storageString);\n    } catch(e) {\n      throw new AuthSdkError('Unable to parse storage string: ' + storageName);\n    }\n  }\n\n  function setStorage(storage) {\n    try {\n      var storageString = JSON.stringify(storage);\n      webstorage.setItem(storageName, storageString);\n    } catch(e) {\n      throw new AuthSdkError('Unable to set storage: ' + storageName);\n    }\n  }\n\n  function clearStorage(key) {\n    if (!key) {\n      setStorage({});\n    }\n    var storage = getStorage();\n    delete storage[key];\n    setStorage(storage);\n  }\n\n  function updateStorage(key, value) {\n    var storage = getStorage();\n    storage[key] = value;\n    setStorage(storage);\n  }\n\n  return {\n    getStorage: getStorage,\n    setStorage: setStorage,\n    clearStorage: clearStorage,\n    updateStorage: updateStorage\n  };\n}\n\nmodule.exports = storageBuilder;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity, max-statements */\nvar http              = __webpack_require__(3);\nvar util              = __webpack_require__(0);\nvar Q                 = __webpack_require__(5);\nvar AuthSdkError      = __webpack_require__(1);\nvar AuthPollStopError = __webpack_require__(23);\nvar constants         = __webpack_require__(2);\n\nfunction addStateToken(res, options) {\n  var builtArgs = {};\n  util.extend(builtArgs, options);\n\n  // Add the stateToken if one isn't passed and we have one\n  if (!builtArgs.stateToken && res.stateToken) {\n    builtArgs.stateToken = res.stateToken;\n  }\n\n  return builtArgs;\n}\n\nfunction getStateToken(res) {\n  return addStateToken(res);\n}\n\nfunction transactionStatus(sdk, args) {\n  args = addStateToken(sdk, args);\n  return http.post(sdk, sdk.options.url + '/api/v1/authn', args);\n}\n\nfunction resumeTransaction(sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Q.reject(new AuthSdkError('No transaction to resume'));\n    }\n  }\n  return sdk.tx.status(args)\n    .then(function(res) {\n      return new AuthTransaction(sdk, res);\n    });\n}\n\nfunction introspect (sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Q.reject(new AuthSdkError('No transaction to evaluate'));\n    }\n  }\n  return transactionStep(sdk, args)\n    .then(function (res) {\n      return new AuthTransaction(sdk, res);\n    });\n}\n\nfunction transactionStep(sdk, args) {\n  args = addStateToken(sdk, args);\n  // v1 pipeline introspect API\n  return http.post(sdk, sdk.options.url + '/api/v1/authn/introspect', args);\n}\n\nfunction transactionExists(sdk) {\n  // We have a cookie state token\n  return !!sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n}\n\nfunction postToTransaction(sdk, url, args, options) {\n  return http.post(sdk, url, args, options)\n    .then(function(res) {\n      return new AuthTransaction(sdk, res);\n    });\n}\n\nfunction getPollFn(sdk, res, ref) {\n  return function (options) {\n    var delay;\n    var rememberDevice;\n    var autoPush;\n    var transactionCallBack;\n\n    if (util.isNumber(options)) {\n      delay = options;\n    } else if (util.isObject(options)) {\n      delay = options.delay;\n      rememberDevice = options.rememberDevice;\n      autoPush = options.autoPush;\n      transactionCallBack = options.transactionCallBack;\n    }\n\n    if (!delay && delay !== 0) {\n      delay = constants.DEFAULT_POLLING_DELAY;\n    }\n\n    // Get the poll function\n    var pollLink = util.getLink(res, 'next', 'poll');\n    function pollFn() {\n      var opts = {};\n      if (typeof autoPush === 'function') {\n        try {\n          opts.autoPush = !!autoPush();\n        }\n        catch (e) {\n          return Q.reject(new AuthSdkError('AutoPush resulted in an error.'));\n        }\n      }\n      else if (autoPush !== undefined && autoPush !== null) {\n        opts.autoPush = !!autoPush;\n      }\n      if (typeof rememberDevice === 'function') {\n        try {\n          opts.rememberDevice = !!rememberDevice();\n        }\n        catch (e) {\n          return Q.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n        }\n      }\n      else if (rememberDevice !== undefined && rememberDevice !== null) {\n        opts.rememberDevice = !!rememberDevice;\n      }\n\n      var href = pollLink.href + util.toQueryParams(opts);\n      return http.post(sdk, href, getStateToken(res), {\n        saveAuthnState: false  \n      });\n    }\n\n    ref.isPolling = true;\n\n    var retryCount = 0;\n    var recursivePoll = function () {\n      // If the poll was manually stopped during the delay\n      if (!ref.isPolling) {\n        return Q.reject(new AuthPollStopError());\n      }\n      return pollFn()\n        .then(function (pollRes) {\n          // Reset our retry counter on success\n          retryCount = 0;\n\n          // If we're still waiting\n          if (pollRes.factorResult && pollRes.factorResult === 'WAITING') {\n\n            // If the poll was manually stopped while the pollFn was called\n            if (!ref.isPolling) {\n              throw new AuthPollStopError();\n            }\n\n            if (typeof transactionCallBack === 'function') {\n              transactionCallBack(pollRes);\n            }\n\n            // Continue poll\n            return Q.delay(delay)\n              .then(recursivePoll);\n\n          } else {\n            // Any non-waiting result, even if polling was stopped\n            // during a request, will return\n            ref.isPolling = false;\n            return new AuthTransaction(sdk, pollRes);\n          }\n        })\n        .fail(function(err) {\n          // Exponential backoff, up to 16 seconds\n          if (err.xhr &&\n              (err.xhr.status === 0 || err.xhr.status === 429) &&\n              retryCount <= 4) {\n            var delayLength = Math.pow(2, retryCount) * 1000;\n            retryCount++;\n            return Q.delay(delayLength)\n              .then(recursivePoll);\n          }\n          throw err;\n        });\n    };\n    return recursivePoll()\n      .fail(function(err) {\n        ref.isPolling = false;\n        throw err;\n      });\n  };\n}\n\nfunction link2fn(sdk, res, obj, link, ref) {\n  if (Array.isArray(link)) {\n    return function(name, opts) {\n      if (!name) {\n        throw new AuthSdkError('Must provide a link name');\n      }\n\n      var lk = util.find(link, {name: name});\n      if (!lk) {\n        throw new AuthSdkError('No link found for that name');\n      }\n\n      return link2fn(sdk, res, obj, lk, ref)(opts);\n    };\n\n  } else if (link.hints &&\n      link.hints.allow &&\n      link.hints.allow.length === 1) {\n    var method = link.hints.allow[0];\n    switch (method) {\n\n      case 'GET':\n        return function() {\n          return http.get(sdk, link.href);\n        };\n\n      case 'POST':\n        return function(opts) {\n          if (ref && ref.isPolling) {\n            ref.isPolling = false;\n          }\n\n          var data = addStateToken(res, opts);\n\n          if (res.status === 'MFA_ENROLL' || res.status === 'FACTOR_ENROLL') {\n            // Add factorType and provider\n            util.extend(data, {\n              factorType: obj.factorType,\n              provider: obj.provider\n            });\n          }\n\n          var params = {};\n          var autoPush = data.autoPush;\n          if (autoPush !== undefined) {\n            if (typeof autoPush === 'function') {\n              try {\n                params.autoPush = !!autoPush();\n              }\n              catch (e) {\n                return Q.reject(new AuthSdkError('AutoPush resulted in an error.'));\n              }\n            }\n            else if (autoPush !== null) {\n              params.autoPush = !!autoPush;\n            }\n            data = util.omit(data, 'autoPush');\n          }\n\n          var rememberDevice = data.rememberDevice;\n          if (rememberDevice !== undefined) {\n            if (typeof rememberDevice === 'function') {\n              try {\n                params.rememberDevice = !!rememberDevice();\n              }\n              catch (e) {\n                return Q.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n              }\n            }\n            else if (rememberDevice !== null) {\n              params.rememberDevice = !!rememberDevice;\n            }\n            data = util.omit(data, 'rememberDevice');\n\n          } else if (data.profile &&\n                    data.profile.updatePhone !== undefined) {\n            if (data.profile.updatePhone) {\n              params.updatePhone = true;\n            }\n            data.profile = util.omit(data.profile, 'updatePhone');\n          }\n          var href = link.href + util.toQueryParams(params);\n          return postToTransaction(sdk, href, data);\n        };\n    }\n  }\n}\n\nfunction links2fns(sdk, res, obj, ref) {\n  var fns = {};\n  for (var linkName in obj._links) {\n    if (!obj._links.hasOwnProperty(linkName)) {\n      continue;\n    }\n\n    var link = obj._links[linkName];\n    \n    if (linkName === 'next') {\n      linkName = link.name;\n    }\n\n    if (link.type) {\n      fns[linkName] = link;\n      continue;\n    }\n\n    switch (linkName) {\n      // poll is only found at the transaction\n      // level, so we don't need to pass the link\n      case 'poll':\n        fns.poll = getPollFn(sdk, res, ref);\n        break;\n\n      default:\n        var fn = link2fn(sdk, res, obj, link, ref);\n        if (fn) {\n          fns[linkName] = fn;\n        }\n    }\n  }\n  return fns;\n}\n\nfunction flattenEmbedded(sdk, res, obj, ref) {\n  obj = obj || res;\n  obj = util.clone(obj);\n\n  if (Array.isArray(obj)) {\n    var objArr = [];\n    for (var o = 0, ol = obj.length; o < ol; o++) {\n      objArr.push(flattenEmbedded(sdk, res, obj[o], ref));\n    }\n    return objArr;\n  }\n\n  var embedded = obj._embedded || {};\n\n  for (var key in embedded) {\n    if (!embedded.hasOwnProperty(key)) {\n      continue;\n    }\n\n    // Flatten any nested _embedded objects\n    if (util.isObject(embedded[key]) || Array.isArray(embedded[key])) {\n      embedded[key] = flattenEmbedded(sdk, res, embedded[key], ref);\n    }\n  }\n\n  // Convert any links on the embedded object\n  var fns = links2fns(sdk, res, obj, ref);\n  util.extend(embedded, fns);\n\n  obj = util.omit(obj, '_embedded', '_links');\n  util.extend(obj, embedded);\n  return obj;\n}\n\nfunction AuthTransaction(sdk, res) {\n  if (res) {\n    this.data = res;\n    util.extend(this, flattenEmbedded(sdk, res, res, {}));\n    delete this.stateToken;\n\n    // RECOVERY_CHALLENGE has some responses without _links.\n    // Without _links, we emulate cancel to make it intuitive\n    // to return to the starting state. We may remove this\n    // when OKTA-75434 is resolved\n    if (res.status === 'RECOVERY_CHALLENGE' && !res._links) {\n      this.cancel = function() {\n        return new Q(new AuthTransaction(sdk));\n      };\n    }\n  }\n}\n\nmodule.exports = {\n  transactionStatus: transactionStatus,\n  resumeTransaction: resumeTransaction,\n  transactionExists: transactionExists,\n  postToTransaction: postToTransaction,\n  introspect: introspect,\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity, max-statements */\nvar http = __webpack_require__(3);\nvar util = __webpack_require__(0);\nvar storageUtil = __webpack_require__(4);\nvar AuthSdkError = __webpack_require__(1);\n\nvar httpCache = storageUtil.getHttpCache();\n\nfunction generateState() {\n  return util.genRandomString(64);\n}\n\nfunction generateNonce() {\n  return util.genRandomString(64);\n}\n\nfunction isToken(obj) {\n  if (obj &&\n      (obj.accessToken || obj.idToken) &&\n      Array.isArray(obj.scopes)) {\n    return true;\n  }\n  return false;\n}\n\nfunction addListener(eventTarget, name, fn) {\n  if (eventTarget.addEventListener) {\n    eventTarget.addEventListener(name, fn);\n  } else {\n    eventTarget.attachEvent('on' + name, fn);\n  }\n}\n\nfunction removeListener(eventTarget, name, fn) {\n  if (eventTarget.removeEventListener) {\n    eventTarget.removeEventListener(name, fn);\n  } else {\n    eventTarget.detachEvent('on' + name, fn);\n  }\n}\n\nfunction loadFrame(src) {\n  var iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n  iframe.src = src;\n\n  return document.body.appendChild(iframe);\n}\n\nfunction loadPopup(src, options) {\n  var title = options.popupTitle || 'External Identity Provider User Authentication';\n  var appearance = 'toolbar=no, scrollbars=yes, resizable=yes, ' +\n    'top=100, left=500, width=600, height=600';\n\n  if (util.isIE11OrLess()) {\n    // IE<=11 doesn't fully support postMessage at time of writting.\n    // the following simple solution happened to solve the issue\n    // without adding another proxy layer which makes flow more complecated.\n    var winEl = window.open('/', title, appearance);\n    winEl.location.href = src;\n    return winEl;\n  } else {\n    return window.open(src, title, appearance);\n  }\n}\n\nfunction getWellKnown(sdk, issuer) {\n  var authServerUri = (issuer || sdk.options.issuer || sdk.options.url);\n  return http.get(sdk, authServerUri + '/.well-known/openid-configuration', {\n    cacheResponse: true\n  });\n}\n\nfunction getKey(sdk, issuer, kid) {\n  return getWellKnown(sdk, issuer)\n  .then(function(wellKnown) {\n    var jwksUri = wellKnown['jwks_uri'];\n\n    // Check our kid against the cached version (if it exists and isn't expired)\n    var cacheContents = httpCache.getStorage();\n    var cachedResponse = cacheContents[jwksUri];\n    if (cachedResponse && Date.now()/1000 < cachedResponse.expiresAt) {\n      var cachedKey = util.find(cachedResponse.response.keys, {\n        kid: kid\n      });\n\n      if (cachedKey) {\n        return cachedKey;\n      }\n    }\n\n    // Remove cache for the key\n    httpCache.clearStorage(jwksUri);\n\n    // Pull the latest keys if the key wasn't in the cache\n    return http.get(sdk, jwksUri, {\n      cacheResponse: true\n    })\n    .then(function(res) {\n      var key = util.find(res.keys, {\n        kid: kid\n      });\n\n      if (key) {\n        return key;\n      }\n\n      throw new AuthSdkError('The key id, ' + kid + ', was not found in the server\\'s keys');\n    });\n  });\n}\n\nfunction validateClaims(sdk, claims, validationParams) {\n  var aud = validationParams.clientId;\n  var iss = validationParams.issuer;\n  var nonce = validationParams.nonce;\n\n  if (!claims || !iss || !aud) {\n    throw new AuthSdkError('The jwt, iss, and aud arguments are all required');\n  }\n\n  if (nonce && claims.nonce !== nonce) {\n    throw new AuthSdkError('OAuth flow response nonce doesn\\'t match request nonce');\n  }\n\n  var now = Math.floor(Date.now()/1000);\n\n  if (claims.iss !== iss) {\n    throw new AuthSdkError('The issuer [' + claims.iss + '] ' +\n      'does not match [' + iss + ']');\n  }\n\n  if (claims.aud !== aud) {\n    throw new AuthSdkError('The audience [' + claims.aud + '] ' +\n      'does not match [' + aud + ']');\n  }\n\n  if (claims.iat > claims.exp) {\n    throw new AuthSdkError('The JWT expired before it was issued');\n  }\n\n  if ((now - sdk.options.maxClockSkew) > claims.exp) {\n    throw new AuthSdkError('The JWT expired and is no longer valid');\n  }\n\n  if (claims.iat > (now + sdk.options.maxClockSkew)) {\n    throw new AuthSdkError('The JWT was issued in the future');\n  }\n}\n\nfunction getOAuthUrls(sdk, oauthParams, options) {\n  options = options || {};\n\n  // Get user-supplied arguments\n  var authorizeUrl = util.removeTrailingSlash(options.authorizeUrl) || sdk.options.authorizeUrl;\n  var issuer = util.removeTrailingSlash(options.issuer) || sdk.options.issuer;\n  var userinfoUrl = util.removeTrailingSlash(options.userinfoUrl) || sdk.options.userinfoUrl;\n  var tokenUrl = util.removeTrailingSlash(options.tokenUrl) || sdk.options.tokenUrl;\n  var logoutUrl = util.removeTrailingSlash(options.logoutUrl) || sdk.options.logoutUrl;\n  var revokeUrl = util.removeTrailingSlash(options.revokeUrl) || sdk.options.revokeUrl;\n\n  // If an issuer exists but it's not a url, assume it's an authServerId\n  if (issuer && !(/^https?:/.test(issuer))) {\n    // Make it a url\n    issuer = sdk.options.url + '/oauth2/' + issuer;\n  }\n\n  // If an authorizeUrl is supplied without an issuer, and an id_token is requested\n  if (!issuer && authorizeUrl &&\n      oauthParams.responseType.indexOf('id_token') !== -1) {\n    // The issuer is ambiguous, so we won't be able to validate the id_token jwt\n    throw new AuthSdkError('Cannot request idToken with an authorizeUrl without an issuer');\n  }\n\n  // If a token is requested without an issuer\n  if (!issuer && oauthParams && oauthParams.responseType.indexOf('token') !== -1) {\n    // If an authorizeUrl is supplied without a userinfoUrl\n    if (authorizeUrl && !userinfoUrl) {\n      // The userinfoUrl is ambiguous, so we won't be able to call getUserInfo\n      throw new AuthSdkError('Cannot request accessToken with an authorizeUrl without an issuer or userinfoUrl');\n    }\n\n    // If a userinfoUrl is supplied without a authorizeUrl\n    if (userinfoUrl && !authorizeUrl) {\n      // The authorizeUrl is ambiguous, so we won't be able to call the authorize endpoint\n      throw new AuthSdkError('Cannot request token with an userinfoUrl without an issuer or authorizeUrl');\n    }\n  }\n\n  // Default the issuer to our baseUrl\n  issuer = issuer || sdk.options.url;\n\n  // Trim trailing slashes\n  issuer = util.removeTrailingSlash(issuer);\n\n  var baseUrl = issuer;\n  // A custom auth server issuer looks like:\n  // https://example.okta.com/oauth2/aus8aus76q8iphupD0h7\n  // \n  // Most orgs have a \"default\" custom authorization server:\n  // https://example.okta.com/oauth2/default\n  var customAuthServerRegex = new RegExp('^https?://.*?/oauth2/.+');\n  if (!customAuthServerRegex.test(baseUrl)) {\n    // Append '/oauth2' if necessary\n    if (!baseUrl.endsWith('/oauth2')) {\n      baseUrl += '/oauth2';\n    }\n  }\n\n  authorizeUrl = authorizeUrl || baseUrl + '/v1/authorize';\n  userinfoUrl = userinfoUrl || baseUrl + '/v1/userinfo';\n  tokenUrl = tokenUrl || baseUrl + '/v1/token';\n  revokeUrl = revokeUrl || baseUrl + '/v1/revoke';\n  logoutUrl = logoutUrl || baseUrl + '/v1/logout';\n\n  return {\n    issuer: issuer,\n    authorizeUrl: authorizeUrl,\n    userinfoUrl: userinfoUrl,\n    tokenUrl: tokenUrl,\n    revokeUrl: revokeUrl,\n    logoutUrl: logoutUrl\n  };\n}\n\nfunction urlParamsToObject(hashOrSearch) {\n  // Predefine regexs for parsing hash\n  var plus2space = /\\+/g;\n  var paramSplit = /([^&=]+)=?([^&]*)/g;\n\n  // Remove the leading # or ?\n  var fragment = hashOrSearch.substring(1);\n\n  var obj = {};\n\n  // Loop until we have no more params\n  var param;\n  while (true) { // eslint-disable-line no-constant-condition\n    param = paramSplit.exec(fragment);\n    if (!param) { break; }\n\n    var key = param[1];\n    var value = param[2];\n\n    // id_token should remain base64url encoded\n    if (key === 'id_token' || key === 'access_token' || key === 'code') {\n      obj[key] = value;\n    } else {\n      obj[key] = decodeURIComponent(value.replace(plus2space, ' '));\n    }\n  }\n  return obj;\n}\n\nmodule.exports = {\n  generateState: generateState,\n  generateNonce: generateNonce,\n  getWellKnown: getWellKnown,\n  getKey: getKey,\n  validateClaims: validateClaims,\n  getOAuthUrls: getOAuthUrls,\n  loadFrame: loadFrame,\n  loadPopup: loadPopup,\n  urlParamsToObject: urlParamsToObject,\n  isToken: isToken,\n  addListener: addListener,\n  removeListener: removeListener\n};\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar fetchRequest = __webpack_require__(12);\nvar storageUtil = __webpack_require__(4);\n\nmodule.exports = __webpack_require__(15)(storageUtil, fetchRequest);\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nvar fetch = __webpack_require__(13);\n\n/* eslint-disable complexity */\nfunction fetchRequest(method, url, args) {\n  var body = args.data;\n  var headers = args.headers || {};\n  var contentType = (headers['Content-Type'] || headers['content-type'] || '');\n\n  // JSON encode body (if appropriate)\n  if (contentType === 'application/json' && body && typeof body !== 'string') {\n    body = JSON.stringify(body);\n  }\n\n  var fetchPromise = fetch(url, {\n    method: method,\n    headers: args.headers,\n    body: body,\n    credentials: args.withCredentials === false ? 'omit' : 'include'\n  })\n  .then(function(response) {\n    var error = !response.ok;\n    var status = response.status;\n    var respHandler = function(resp) {\n      var result = {\n        responseText: resp,\n        status: status\n      };\n      if (error) {\n        // Throwing response object since error handling is done in http.js\n        throw result;\n      }\n      return result;\n    };\n    if (response.headers.get('Content-Type') &&\n        response.headers.get('Content-Type').toLowerCase().indexOf('application/json') >= 0) {\n      return response.json().then(respHandler);\n    } else {\n      return response.text().then(respHandler);\n    }\n  });\n  return fetchPromise;\n}\n\nmodule.exports = fetchRequest;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\nvar __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (true) {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* eslint-disable complexity */\n/* eslint-disable max-statements */\n/* SDK_VERSION is defined in webpack config */ \n/* global SDK_VERSION */\n\n__webpack_require__(16);\n\nvar Emitter           = __webpack_require__(18);\nvar AuthSdkError      = __webpack_require__(1);\nvar builderUtil       = __webpack_require__(19);\nvar constants         = __webpack_require__(2);\nvar cookies           = __webpack_require__(4).storage;\nvar http              = __webpack_require__(3);\nvar oauthUtil         = __webpack_require__(10);\nvar Q                 = __webpack_require__(5);\nvar session           = __webpack_require__(24);\nvar token             = __webpack_require__(25);\nvar TokenManager      = __webpack_require__(29);\nvar tx                = __webpack_require__(7);\nvar util              = __webpack_require__(0);\n\nfunction OktaAuthBuilder(args) {\n  var sdk = this;\n\n  var url = builderUtil.getValidUrl(args);\n  // OKTA-242989: support for grantType will be removed in 3.0 \n  var usePKCE = args.pkce || args.grantType === 'authorization_code';\n  this.options = {\n    url: util.removeTrailingSlash(url),\n    clientId: args.clientId,\n    issuer: util.removeTrailingSlash(args.issuer),\n    authorizeUrl: util.removeTrailingSlash(args.authorizeUrl),\n    userinfoUrl: util.removeTrailingSlash(args.userinfoUrl),\n    tokenUrl: util.removeTrailingSlash(args.tokenUrl),\n    revokeUrl: util.removeTrailingSlash(args.revokeUrl),\n    logoutUrl: util.removeTrailingSlash(args.logoutUrl),\n    pkce: usePKCE,\n    redirectUri: args.redirectUri,\n    postLogoutRedirectUri: args.postLogoutRedirectUri,\n    responseMode: args.responseMode,\n    httpRequestClient: args.httpRequestClient,\n    storageUtil: args.storageUtil,\n    transformErrorXHR: args.transformErrorXHR,\n    headers: args.headers,\n    onSessionExpired: args.onSessionExpired,\n  };\n\n  if (this.options.pkce && !sdk.features.isPKCESupported()) {\n    var errorMessage = 'PKCE requires a modern browser with encryption support running in a secure context.';\n    if (!sdk.features.isHTTPS()) {\n      errorMessage += '\\nThe current page is not being served with HTTPS protocol. Try using HTTPS.';\n    }\n    if (!sdk.features.hasTextEncoder()) {\n      errorMessage += '\\n\"TextEncoder\" is not defined. You may need a polyfill/shim for this browser.';\n    }\n    throw new AuthSdkError(errorMessage);\n  }\n\n  this.userAgent = 'okta-auth-js-' + \"2.13.2\";\n\n  // Digital clocks will drift over time, so the server\n  // can misalign with the time reported by the browser.\n  // The maxClockSkew allows relaxing the time-based\n  // validation of tokens (in seconds, not milliseconds).\n  // It currently defaults to 300, because 5 min is the\n  // default maximum tolerance allowed by Kerberos.\n  // (https://technet.microsoft.com/en-us/library/cc976357.aspx)\n  if (!args.maxClockSkew && args.maxClockSkew !== 0) {\n    this.options.maxClockSkew = constants.DEFAULT_MAX_CLOCK_SKEW;\n  } else {\n    this.options.maxClockSkew = args.maxClockSkew;\n  }\n\n  // Give the developer the ability to disable token signature\n  // validation.\n  this.options.ignoreSignature = !!args.ignoreSignature;\n\n  sdk.session = {\n    close: util.bind(session.closeSession, null, sdk),\n    exists: util.bind(session.sessionExists, null, sdk),\n    get: util.bind(session.getSession, null, sdk),\n    refresh: util.bind(session.refreshSession, null, sdk),\n    setCookieAndRedirect: util.bind(session.setCookieAndRedirect, null, sdk)\n  };\n\n  sdk.tx = {\n    status: util.bind(tx.transactionStatus, null, sdk),\n    resume: util.bind(tx.resumeTransaction, null, sdk),\n    exists: util.bind(tx.transactionExists, null, sdk),\n    introspect: util.bind(tx.introspect, null, sdk)\n  };\n\n  // This is exposed so we can mock document.cookie in our tests\n  sdk.tx.exists._get = function(name) {\n    return cookies.get(name);\n  };\n\n  // This is exposed so we can mock window.location.href in our tests\n  sdk.idToken = {\n    authorize: {\n      _getLocationHref: function() {\n        return window.location.href;\n      }\n    }\n  };\n\n  sdk.token = {\n    getWithoutPrompt: util.bind(token.getWithoutPrompt, null, sdk),\n    getWithPopup: util.bind(token.getWithPopup, null, sdk),\n    getWithRedirect: util.bind(token.getWithRedirect, null, sdk),\n    parseFromUrl: util.bind(token.parseFromUrl, null, sdk),\n    decode: token.decodeToken,\n    revoke: util.bind(token.revokeToken, null, sdk),\n    renew: util.bind(token.renewToken, null, sdk),\n    getUserInfo: util.bind(token.getUserInfo, null, sdk),\n    verify: util.bind(token.verifyToken, null, sdk)\n  };\n\n  // This is exposed so we can set window.location in our tests\n  sdk.token.getWithRedirect._setLocation = function(url) {\n    window.location = url;\n  };\n\n  // This is exposed so we can mock getting window.history in our tests\n  sdk.token.parseFromUrl._getHistory = function() {\n    return window.history;\n  };\n\n  // This is exposed so we can mock getting window.location in our tests\n  sdk.token.parseFromUrl._getLocation = function() {\n    return window.location;\n  };\n\n  // This is exposed so we can mock getting window.document in our tests\n  sdk.token.parseFromUrl._getDocument = function() {\n    return window.document;\n  };\n\n  sdk.fingerprint._getUserAgent = function() {\n    return navigator.userAgent;\n  };\n\n  var isWindowsPhone = /windows phone|iemobile|wpdesktop/i;\n  sdk.features.isFingerprintSupported = function() {\n    var agent = sdk.fingerprint._getUserAgent();\n    return agent && !isWindowsPhone.test(agent);\n  };\n\n  sdk.emitter = new Emitter();\n  sdk.tokenManager = new TokenManager(sdk, args.tokenManager);\n  sdk.tokenManager.on('error', this._onTokenManagerError, this);\n}\n\nvar proto = OktaAuthBuilder.prototype;\nproto._onTokenManagerError = function(error) {\n  var code = error.errorCode;\n  if (code === 'login_required' && error.accessToken) {\n    if (this.options.onSessionExpired) {\n      this.options.onSessionExpired();\n    } else {\n      // eslint-disable-next-line no-console\n      console.error('Session has expired or was closed outside the application.');\n    }\n  }\n};\n\nproto.features = {};\n\nproto.features.isPopupPostMessageSupported = function() {\n  var isIE8or9 = document.documentMode && document.documentMode < 10;\n  if (window.postMessage && !isIE8or9) {\n    return true;\n  }\n  return false;\n};\n\nproto.features.isTokenVerifySupported = function() {\n  return typeof crypto !== 'undefined' && crypto.subtle && typeof Uint8Array !== 'undefined';\n};\n\nproto.features.hasTextEncoder = function() {\n  return typeof TextEncoder !== 'undefined';\n};\n\nproto.features.isPKCESupported = function() {\n  return proto.features.isTokenVerifySupported() && proto.features.hasTextEncoder();\n};\n\nproto.features.isHTTPS = function() {\n  return window.location.protocol === 'https:';\n};\n\n// { username, password, (relayState), (context) }\nproto.signIn = function (opts) {\n  var sdk = this;\n  opts = util.clone(opts || {});\n  function postToTransaction(options) {\n    delete opts.sendFingerprint;\n    return tx.postToTransaction(sdk, '/api/v1/authn', opts, options);\n  }\n  if (!opts.sendFingerprint) {\n    return postToTransaction();\n  }\n  return sdk.fingerprint()\n  .then(function(fingerprint) {\n    return postToTransaction({\n      headers: {\n        'X-Device-Fingerprint': fingerprint\n      }\n    });\n  });\n};\n\n// Ends the current application session, clearing all local tokens\n// Optionally revokes the access token\n// Ends the user's Okta session using the API or redirect method\nproto.signOut = function (options) {\n  options = util.extend({}, options);\n\n  // postLogoutRedirectUri must be whitelisted in Okta Admin UI\n  var postLogoutRedirectUri = options.postLogoutRedirectUri || this.options.postLogoutRedirectUri;\n\n  var accessToken = options.accessToken;\n  var revokeAccessToken = options.revokeAccessToken;\n  var idToken = options.idToken;\n\n  var sdk = this;\n  var logoutUrl = oauthUtil.getOAuthUrls(sdk).logoutUrl;\n\n  function getAccessToken() {\n    return new Q()\n    .then(function() {\n      if (revokeAccessToken && typeof accessToken === 'undefined') {\n        return sdk.tokenManager.get('token');\n      }\n      return accessToken;\n    });\n  }\n\n  function getIdToken() {\n    return new Q()\n    .then(function() {\n      if (postLogoutRedirectUri && typeof idToken === 'undefined') {\n        return sdk.tokenManager.get('idToken');\n      }\n      return idToken;\n    });\n  }\n\n  function closeSession() {\n    return sdk.session.close() // DELETE /api/v1/sessions/me\n    .catch(function(e) {\n      if (e.name === 'AuthApiError') {\n        // Most likely cause is session does not exist or has already been closed\n        // Could also be a network error. Nothing we can do here.\n        return;\n      }\n      throw e;\n    });\n  }\n\n  return Q.allSettled([getAccessToken(), getIdToken()])\n    .then(function(tokens) {\n      accessToken = tokens[0].value;\n      idToken = tokens[1].value;\n\n      // Clear all local tokens\n      sdk.tokenManager.clear();\n\n      if (revokeAccessToken && accessToken) {\n        return sdk.token.revoke(accessToken)\n        .catch(function(e) {\n          if (e.name === 'AuthApiError') {\n            // Capture and ignore network errors\n            return;\n          }\n          throw e;\n        });\n      }\n    })\n    .then(function() {\n      // XHR signOut method\n      if (!postLogoutRedirectUri) {\n        return closeSession();\n      }\n\n      // No idToken? This can happen if the storage was cleared.\n      // Fallback to XHR signOut, then redirect to the post logout uri\n      if (!idToken) {\n        return closeSession()\n        .catch(function(err) {\n          // eslint-disable-next-line no-console\n          console.log('Unhandled exception while closing session', err);\n        })\n        .then(function() {\n          window.location.assign(postLogoutRedirectUri);\n        });\n      }\n\n      // logout redirect using the idToken.\n      var state = options.state;\n      var idTokenHint = idToken.idToken; // a string\n      var logoutUri = logoutUrl + '?id_token_hint=' + encodeURIComponent(idTokenHint) +\n        '&post_logout_redirect_uri=' + encodeURIComponent(postLogoutRedirectUri);\n    \n      // State allows option parameters to be passed to logout redirect uri\n      if (state) {\n        logoutUri += '&state=' + encodeURIComponent(state);\n      }\n      \n      window.location.assign(logoutUri);\n    });\n};\n\nbuilderUtil.addSharedPrototypes(proto);\n\n// { resource, (rel), (requestContext)}\nproto.webfinger = function (opts) {\n  var url = '/.well-known/webfinger' + util.toQueryParams(opts);\n  var options = {\n    headers: {\n      'Accept': 'application/jrd+json'\n    }\n  };\n  return http.get(this, url, options);\n};\n\nproto.fingerprint = function(options) {\n  options = options || {};\n  var sdk = this;\n  if (!sdk.features.isFingerprintSupported()) {\n    return Q.reject(new AuthSdkError('Fingerprinting is not supported on this device'));\n  }\n\n  var deferred = Q.defer();\n\n  var iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n\n  function listener(e) {\n    if (!e || !e.data || e.origin !== sdk.options.url) {\n      return;\n    }\n\n    try {\n      var msg = JSON.parse(e.data);\n    } catch (err) {\n      return deferred.reject(new AuthSdkError('Unable to parse iframe response'));\n    }\n\n    if (!msg) { return; }\n    if (msg.type === 'FingerprintAvailable') {\n      return deferred.resolve(msg.fingerprint);\n    }\n    if (msg.type === 'FingerprintServiceReady') {\n      e.source.postMessage(JSON.stringify({\n        type: 'GetFingerprint'\n      }), e.origin);\n    }\n  }\n  oauthUtil.addListener(window, 'message', listener);\n\n  iframe.src = sdk.options.url + '/auth/services/devicefingerprint';\n  document.body.appendChild(iframe);\n\n  var timeout = setTimeout(function() {\n    deferred.reject(new AuthSdkError('Fingerprinting timed out'));\n  }, options.timeout || 15000);\n\n  return deferred.promise.fin(function() {\n    clearTimeout(timeout);\n    oauthUtil.removeListener(window, 'message', listener);\n    if (document.body.contains(iframe)) {\n      iframe.parentElement.removeChild(iframe);\n    }\n  });\n};\n\nmodule.exports = builderUtil.buildOktaAuth(OktaAuthBuilder);\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n__webpack_require__(17);\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.14\n// Reference: http://es5.github.io/#x15.4.4.14\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf#Polyfill\nif (!Array.prototype.indexOf) {\n  Array.prototype.indexOf = function(searchElement, fromIndex) {\n\n    var k;\n\n    // 1. Let o be the result of calling ToObject passing\n    //    the this value as the argument.\n    if (this == null) {\n      throw new TypeError('\"this\" is null or not defined');\n    }\n\n    var o = Object(this);\n\n    // 2. Let lenValue be the result of calling the Get\n    //    internal method of o with the argument \"length\".\n    // 3. Let len be ToUint32(lenValue).\n    var len = o.length >>> 0;\n\n    // 4. If len is 0, return -1.\n    if (len === 0) {\n      return -1;\n    }\n\n    // 5. If argument fromIndex was passed let n be\n    //    ToInteger(fromIndex); else let n be 0.\n    var n = +fromIndex || 0;\n\n    if (Math.abs(n) === Infinity) {\n      n = 0;\n    }\n\n    // 6. If n >= len, return -1.\n    if (n >= len) {\n      return -1;\n    }\n\n    // 7. If n >= 0, then Let k be n.\n    // 8. Else, n<0, Let k be len - abs(n).\n    //    If k is less than 0, then let k be 0.\n    k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n    // 9. Repeat, while k < len\n    while (k < len) {\n      // a. Let Pk be ToString(k).\n      //   This is implicit for LHS operands of the in operator\n      // b. Let kPresent be the result of calling the\n      //    HasProperty internal method of o with argument Pk.\n      //   This step can be combined with c\n      // c. If kPresent is true, then\n      //    i.  Let elementK be the result of calling the Get\n      //        internal method of o with the argument ToString(k).\n      //   ii.  Let same be the result of applying the\n      //        Strict Equality Comparison Algorithm to\n      //        searchElement and elementK.\n      //  iii.  If same is true, return k.\n      if (k in o && o[k] === searchElement) {\n        return k;\n      }\n      k++;\n    }\n    return -1;\n  };\n}\n\nif (!Array.isArray) {\n  Array.isArray = function(obj) {\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  };\n}\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function () {\n\n  var object =  true ? exports : this; // #8: web workers\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  function InvalidCharacterError(message) {\n    this.message = message;\n  }\n  InvalidCharacterError.prototype = new Error;\n  InvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n  // encoder\n  // [https://gist.github.com/999166] by [https://github.com/nignag]\n  object.btoa || (\n  object.btoa = function (input) {\n    var str = String(input);\n    for (\n      // initialize result and counter\n      var block, charCode, idx = 0, map = chars, output = '';\n      // if the next str index does not exist:\n      //   change the mapping table to \"=\"\n      //   check if d has no fractional digits\n      str.charAt(idx | 0) || (map = '=', idx % 1);\n      // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n      output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n    ) {\n      charCode = str.charCodeAt(idx += 3/4);\n      if (charCode > 0xFF) {\n        throw new InvalidCharacterError(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\n      }\n      block = block << 8 | charCode;\n    }\n    return output;\n  });\n\n  // decoder\n  // [https://gist.github.com/1020396] by [https://github.com/atk]\n  object.atob || (\n  object.atob = function (input) {\n    var str = String(input).replace(/=+$/, '');\n    if (str.length % 4 == 1) {\n      throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n    }\n    for (\n      // initialize result and counters\n      var bc = 0, bs, buffer, idx = 0, output = '';\n      // get next character\n      buffer = str.charAt(idx++);\n      // character found in table? initialize bit storage and add its ascii value;\n      ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n        // and if not first of each 4 characters,\n        // convert the first 8 bits to one ascii character\n        bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n    ) {\n      // try to find character in table (0-63, not found => -1)\n      buffer = chars.indexOf(buffer);\n    }\n    return output;\n  });\n\n}());\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nvar AuthSdkError = __webpack_require__(1);\nvar tx = __webpack_require__(7);\nvar util = __webpack_require__(0);\n\nfunction getValidUrl(args) {\n  if (!args) {\n    throw new AuthSdkError('No arguments passed to constructor. ' +\n      'Required usage: new OktaAuth(args)');\n  }\n\n  var url = args.url;\n  if (!url) {\n    var isUrlRegex = new RegExp('^http?s?://.+');\n    if (args.issuer && isUrlRegex.test(args.issuer)) {\n      // Infer the URL from the issuer URL, omitting the /oauth2/{authServerId}\n      url = args.issuer.split('/oauth2/')[0];\n    } else {\n      throw new AuthSdkError('No url passed to constructor. ' +\n      'Required usage: new OktaAuth({url: \"https://{yourOktaDomain}.com\"})');\n    }\n  }\n\n  if (url.indexOf('-admin.') !== -1) {\n    throw new AuthSdkError('URL passed to constructor contains \"-admin\" in subdomain. ' +\n      'Required usage: new OktaAuth({url: \"https://{yourOktaDomain}.com})');\n  }\n\n  return url;\n}\n\nfunction addSharedPrototypes(proto) {\n  // { username, (relayState) }\n  proto.forgotPassword = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/password', opts);\n  };\n\n  // { username, (relayState) }\n  proto.unlockAccount = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/unlock', opts);\n  };\n\n  // { recoveryToken }\n  proto.verifyRecoveryToken = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/token', opts);\n  };\n}\n\nfunction buildOktaAuth(OktaAuthBuilder) {\n  return function(storageUtil, httpRequestClient) {\n    function OktaAuth(args) {\n      if (!(this instanceof OktaAuth)) {\n        return new OktaAuth(args);\n      }\n\n      if (args) {\n        args.storageUtil = storageUtil;\n\n        if (args.ajaxRequest) {\n          util.deprecate('ajaxRequest is being deprecated, use httpRequestClient attribute instead.');\n          args.httpRequestClient = args.ajaxRequest;\n        } else if (!args.httpRequestClient) {\n          args.httpRequestClient = httpRequestClient;\n        }\n      }\n\n      util.bind(OktaAuthBuilder, this)(args);\n    }\n    OktaAuth.prototype = OktaAuthBuilder.prototype;\n    OktaAuth.prototype.constructor = OktaAuth;\n\n    // Hoist feature detection functions to static type\n    OktaAuth.features = OktaAuthBuilder.prototype.features;\n\n    return OktaAuth;\n  };\n}\n\nmodule.exports = {\n  addSharedPrototypes: addSharedPrototypes,\n  buildOktaAuth: buildOktaAuth,\n  getValidUrl: getValidUrl\n};\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(21);\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9), __webpack_require__(8)))\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction AuthApiError(err, xhr) {\n  this.name = 'AuthApiError';\n  this.message = err.errorSummary;\n  this.errorSummary = err.errorSummary;\n  this.errorCode = err.errorCode;\n  this.errorLink = err.errorLink;\n  this.errorId = err.errorId;\n  this.errorCauses = err.errorCauses;\n\n  if (xhr) {\n    this.xhr = xhr;\n  }\n}\nAuthApiError.prototype = new Error();\n\nmodule.exports = AuthApiError;\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction AuthPollStopError() {\n  this.name = 'AuthPollStopError';\n  this.message = 'The poll was stopped by the sdk';\n}\nAuthPollStopError.prototype = new Error();\n\nmodule.exports = AuthPollStopError;\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar util = __webpack_require__(0);\nvar http = __webpack_require__(3);\n\nfunction sessionExists(sdk) {\n  return sdk.session.get()\n    .then(function(res) {\n      if (res.status === 'ACTIVE') {\n        return true;\n      }\n      return false;\n    })\n    .fail(function() {\n      return false;\n    });\n}\n\nfunction getSession(sdk) { \n  return http.get(sdk, '/api/v1/sessions/me')\n  .then(function(session) {\n    var res = util.omit(session, '_links');\n\n    res.refresh = function() {\n      return http.post(sdk, util.getLink(session, 'refresh').href);\n    };\n\n    res.user = function() {\n      return http.get(sdk, util.getLink(session, 'user').href);\n    };\n\n    return res;\n  })\n  .fail(function() {\n    // Return INACTIVE status on failure\n    return {status: 'INACTIVE'};\n  });\n}\n\nfunction closeSession(sdk) {\n  return http.httpRequest(sdk, {\n    url: sdk.options.url + '/api/v1/sessions/me',\n    method: 'DELETE'\n  });\n}\n\nfunction refreshSession(sdk) {\n  return http.post(sdk, '/api/v1/sessions/me/lifecycle/refresh');\n}\n\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n  redirectUrl = redirectUrl || window.location.href;\n  window.location = sdk.options.url + '/login/sessionCookieRedirect' +\n    util.toQueryParams({\n      checkAccountSetupComplete: true,\n      token: sessionToken,\n      redirectUrl: redirectUrl\n    });\n}\n\nmodule.exports = {\n  sessionExists: sessionExists,\n  getSession: getSession,\n  closeSession: closeSession,\n  refreshSession: refreshSession,\n  setCookieAndRedirect: setCookieAndRedirect\n};\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity, max-statements */\nvar http          = __webpack_require__(3);\nvar util          = __webpack_require__(0);\nvar oauthUtil     = __webpack_require__(10);\nvar Q             = __webpack_require__(5);\nvar sdkCrypto     = __webpack_require__(26);\nvar AuthSdkError  = __webpack_require__(1);\nvar OAuthError    = __webpack_require__(27);\nvar constants     = __webpack_require__(2);\nvar cookies       = __webpack_require__(4).storage;\nvar PKCE          = __webpack_require__(28);\n\n// Only the access token can be revoked in SPA applications\nfunction revokeToken(sdk, token) {\n  return new Q()\n  .then(function() {\n    if (!token || !token.accessToken) {\n      throw new AuthSdkError('A valid access token object is required');\n    }\n    var clientId = sdk.options.clientId;\n    if (!clientId) {\n      throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to revoke a token');\n    }\n    var revokeUrl = oauthUtil.getOAuthUrls(sdk).revokeUrl;\n    var accessToken = token.accessToken;\n    var args = util.toQueryParams({\n      // eslint-disable-next-line camelcase\n      token_type_hint: 'access_token',\n      token: accessToken\n    }).slice(1);\n    var creds = btoa(clientId);\n    return http.post(sdk, revokeUrl, args, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Authorization': 'Basic ' + creds\n      }\n    });\n  });\n}\n\nfunction decodeToken(token) {\n  var jwt = token.split('.');\n  var decodedToken;\n\n  try {\n    decodedToken = {\n      header: JSON.parse(util.base64UrlToString(jwt[0])),\n      payload: JSON.parse(util.base64UrlToString(jwt[1])),\n      signature: jwt[2]\n    };\n  } catch(e) {\n    throw new AuthSdkError('Malformed token');\n  }\n\n  return decodedToken;\n}\n\n// Verify the id token\nfunction verifyToken(sdk, token, validationParams) {\n  return new Q()\n  .then(function() {\n    if (!token || !token.idToken) {\n      throw new AuthSdkError('Only idTokens may be verified');\n    }\n\n    var jwt = decodeToken(token.idToken);\n\n    var validationOptions = {\n      clientId: sdk.options.clientId,\n      issuer: sdk.options.issuer || sdk.options.url,\n      ignoreSignature: sdk.options.ignoreSignature\n    };\n\n    util.extend(validationOptions, validationParams);\n\n    // Standard claim validation\n    oauthUtil.validateClaims(sdk, jwt.payload, validationOptions);\n\n    // If the browser doesn't support native crypto or we choose not\n    // to verify the signature, bail early\n    if (validationOptions.ignoreSignature == true || !sdk.features.isTokenVerifySupported()) {\n      return token;\n    }\n\n    return oauthUtil.getKey(sdk, token.issuer, jwt.header.kid)\n    .then(function(key) {\n      return sdkCrypto.verifyToken(token.idToken, key);\n    })\n    .then(function(valid) {\n      if (!valid) {\n        throw new AuthSdkError('The token signature is not valid');\n      }\n      return token;\n    });\n  });\n}\n\nfunction addPostMessageListener(sdk, timeout, state) {\n  var deferred = Q.defer();\n\n  function responseHandler(e) {\n    if (!e.data || e.data.state !== state) {\n      // A message not meant for us\n      return;\n    }\n\n    // Configuration mismatch between saved token and current app instance\n    // This may happen if apps with different issuers are running on the same host url\n    // If they share the same storage key, they may read and write tokens in the same location.\n    // Common when developing against http://localhost\n    if (e.origin !== sdk.options.url) {\n      return deferred.reject(new AuthSdkError('The request does not match client configuration'));\n    }\n\n    deferred.resolve(e.data);\n  }\n\n  oauthUtil.addListener(window, 'message', responseHandler);\n\n  return deferred.promise.timeout(timeout || 120000, new AuthSdkError('OAuth flow timed out'))\n    .fin(function() {\n      oauthUtil.removeListener(window, 'message', responseHandler);\n    });\n}\n\nfunction addFragmentListener(sdk, windowEl, timeout) {\n  var deferred = Q.defer();\n\n  function hashChangeHandler() {\n    /*\n      We are only able to access window.location.hash on a window\n      that has the same domain. A try/catch is necessary because\n      there's no other way to determine that the popup is in\n      another domain. When we try to access a window on another\n      domain, an error is thrown.\n    */\n    try {\n      if (windowEl &&\n          windowEl.location &&\n          windowEl.location.hash) {\n        deferred.resolve(oauthUtil.hashToObject(windowEl.location.hash));\n      } else if (windowEl && !windowEl.closed) {\n        setTimeout(hashChangeHandler, 500);\n      }\n    } catch (err) {\n      setTimeout(hashChangeHandler, 500);\n    }\n  }\n\n  hashChangeHandler();\n\n  return deferred.promise.timeout(timeout || 120000, new AuthSdkError('OAuth flow timed out'));\n}\n\nfunction exchangeCodeForToken(sdk, oauthParams, authorizationCode, urls) {\n  // PKCE authorization_code flow\n  // Retrieve saved values and build oauthParams for call to /token\n  var meta = PKCE.loadMeta(sdk);\n  var getTokenParams = {\n    clientId: oauthParams.clientId,\n    authorizationCode: authorizationCode,\n    codeVerifier: meta.codeVerifier,\n    redirectUri: meta.redirectUri\n  };\n  return PKCE.getToken(sdk, getTokenParams, urls)\n  .then(function(res) {\n    validateResponse(res, getTokenParams);\n    return res;\n  })\n  .fin(function() {\n    PKCE.clearMeta(sdk);\n  });\n}\n\nfunction validateResponse(res, oauthParams) {\n  if (res['error'] || res['error_description']) {\n    throw new OAuthError(res['error'], res['error_description']);\n  }\n\n  if (res.state !== oauthParams.state) {\n    throw new AuthSdkError('OAuth flow response state doesn\\'t match request state');\n  }\n}\n\nfunction handleOAuthResponse(sdk, oauthParams, res, urls) {\n  urls = urls || {};\n\n  var responseType = oauthParams.responseType;\n  var scopes = util.clone(oauthParams.scopes);\n  var clientId = oauthParams.clientId || sdk.options.clientId;\n\n  return new Q()\n  .then(function() {\n    validateResponse(res, oauthParams);\n\n    // We do not support \"hybrid\" scenarios where the response includes both a code and a token.\n    // If the response contains a code it is used immediately to obtain new tokens.\n    if (res['code']) {\n      responseType = ['token', 'id_token']; // what we expect the code to provide us\n      return exchangeCodeForToken(sdk, oauthParams, res['code'], urls);\n    }\n    return res;\n  }).then(function(res) {\n    var tokenDict = {};\n\n    if (res['access_token']) {\n      tokenDict['token'] = {\n        accessToken: res['access_token'],\n        expiresAt: Number(res['expires_in']) + Math.floor(Date.now()/1000),\n        tokenType: res['token_type'],\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        userinfoUrl: urls.userinfoUrl\n      };\n    }\n\n    if (res['id_token']) {\n      var jwt = sdk.token.decode(res['id_token']);\n\n      var idToken = {\n        idToken: res['id_token'],\n        claims: jwt.payload,\n        expiresAt: jwt.payload.exp,\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        issuer: urls.issuer,\n        clientId: clientId\n      };\n\n      var validationParams = {\n        clientId: clientId,\n        issuer: urls.issuer,\n        nonce: oauthParams.nonce\n      };\n\n      if (oauthParams.ignoreSignature !== undefined) {\n        validationParams.ignoreSignature = oauthParams.ignoreSignature;\n      }\n\n      return verifyToken(sdk, idToken, validationParams)\n      .then(function() {\n        tokenDict['id_token'] = idToken;\n        return tokenDict;\n      });\n    }\n\n    return tokenDict;\n  })\n  .then(function(tokenDict) {\n    if (!Array.isArray(responseType)) {\n      return tokenDict[responseType];\n    }\n\n    // Validate response against tokenTypes\n    var validateTokenTypes =  ['token', 'id_token'];\n    validateTokenTypes.filter(function(key) {\n      return (responseType.indexOf(key) !== -1);\n    }).forEach(function(key) {\n      if (!tokenDict[key]) {\n        throw new AuthSdkError('Unable to parse OAuth flow response: ' + key + ' was not returned.');\n      }     \n    });\n\n    // Create token array in the order of the responseType array\n    return responseType.map(function(item) {\n      return tokenDict[item];\n    });\n  });\n}\n\nfunction getDefaultOAuthParams(sdk) {\n  return {\n    pkce: sdk.options.pkce || false,\n    clientId: sdk.options.clientId,\n    redirectUri: sdk.options.redirectUri || window.location.href,\n    responseType: 'id_token',\n    responseMode: 'okta_post_message',\n    state: oauthUtil.generateState(),\n    nonce: oauthUtil.generateNonce(),\n    scopes: ['openid', 'email'],\n    ignoreSignature: sdk.options.ignoreSignature\n  };\n}\n\nfunction convertOAuthParamsToQueryParams(oauthParams) {\n  // Quick validation\n  if (!oauthParams.clientId) {\n    throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n  }\n\n  if (util.isString(oauthParams.responseType) && oauthParams.responseType.indexOf(' ') !== -1) {\n    throw new AuthSdkError('Multiple OAuth responseTypes must be defined as an array');\n  }\n\n  // Convert our params to their actual OAuth equivalents\n  var oauthQueryParams = util.removeNils({\n    'client_id': oauthParams.clientId,\n    'code_challenge': oauthParams.codeChallenge,\n    'code_challenge_method': oauthParams.codeChallengeMethod,\n    'display': oauthParams.display,\n    'idp': oauthParams.idp,\n    'idp_scope': oauthParams.idpScope,\n    'login_hint': oauthParams.loginHint,\n    'max_age': oauthParams.maxAge,\n    'nonce': oauthParams.nonce,\n    'prompt': oauthParams.prompt,\n    'redirect_uri': oauthParams.redirectUri,\n    'response_mode': oauthParams.responseMode,\n    'response_type': oauthParams.responseType,\n    'sessionToken': oauthParams.sessionToken,\n    'state': oauthParams.state,\n  });\n\n  ['idp_scope', 'response_type'].forEach( function( mayBeArray ) { \n    if (Array.isArray(oauthQueryParams[mayBeArray])) {\n      oauthQueryParams[mayBeArray] = oauthQueryParams[mayBeArray].join(' ');\n    }\n  });\n\n  if (oauthParams.responseType.indexOf('id_token') !== -1 &&\n      oauthParams.scopes.indexOf('openid') === -1) {\n    throw new AuthSdkError('openid scope must be specified in the scopes argument when requesting an id_token');\n  } else {\n    oauthQueryParams.scope = oauthParams.scopes.join(' ');\n  }\n\n  return oauthQueryParams;\n}\n\nfunction buildAuthorizeParams(oauthParams) {\n  var oauthQueryParams = convertOAuthParamsToQueryParams(oauthParams);\n  return util.toQueryParams(oauthQueryParams);\n}\n\n/*\n * Retrieve an idToken from an Okta or a third party idp\n *\n * Two main flows:\n *\n *  1) Exchange a sessionToken for a token\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *      sessionToken: 'yourtoken'\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *\n *    Forced:\n *      prompt: 'none'\n *      responseMode: 'okta_post_message'\n *      display: undefined\n *\n *  2) Get a token from an idp\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *      idp: defaults to Okta as an idp\n *      prompt: no default. Pass 'none' to throw an error if user is not signed in\n *\n *    Forced:\n *      display: 'popup'\n *\n *  Only common optional params shown. Any OAuth parameters not explicitly forced are available to override\n *\n * @param {Object} oauthOptions\n * @param {String} [oauthOptions.clientId] ID of this client\n * @param {String} [oauthOptions.redirectUri] URI that the iframe or popup will go to once authenticated\n * @param {String[]} [oauthOptions.scopes] OAuth 2.0 scopes to request (openid must be specified)\n * @param {String} [oauthOptions.idp] ID of an external IdP to use for user authentication\n * @param {String} [oauthOptions.sessionToken] Bootstrap Session Token returned by the Okta Authentication API\n * @param {String} [oauthOptions.prompt] Determines whether the Okta login will be displayed on failure.\n *                                       Use 'none' to prevent this behavior\n *\n * @param {Object} options\n * @param {Integer} [options.timeout] Time in ms before the flow is automatically terminated. Defaults to 120000\n * @param {String} [options.popupTitle] Title dispayed in the popup.\n *                                      Defaults to 'External Identity Provider User Authentication'\n */\nfunction getToken(sdk, oauthOptions, options) {\n  oauthOptions = oauthOptions || {};\n  options = options || {};\n\n  return prepareOauthParams(sdk, oauthOptions)\n  .then(function(oauthParams) {\n\n    // Start overriding any options that don't make sense\n    var sessionTokenOverrides = {\n      prompt: 'none',\n      responseMode: 'okta_post_message',\n      display: null\n    };\n\n    var idpOverrides = {\n      display: 'popup'\n    };\n\n    if (oauthOptions.sessionToken) {\n      util.extend(oauthParams, sessionTokenOverrides);\n    } else if (oauthOptions.idp) {\n      util.extend(oauthParams, idpOverrides);\n    }\n\n    // Use the query params to build the authorize url\n    var requestUrl,\n        endpoint,\n        urls;\n    try {\n      // Get authorizeUrl and issuer\n      urls = oauthUtil.getOAuthUrls(sdk, oauthParams, options);\n      endpoint = oauthOptions.codeVerifier ? urls.tokenUrl : urls.authorizeUrl;\n      requestUrl = endpoint + buildAuthorizeParams(oauthParams);\n    } catch (e) {\n      return Q.reject(e);\n    }\n\n    // Determine the flow type\n    var flowType;\n    if (oauthParams.sessionToken || oauthParams.display === null) {\n      flowType = 'IFRAME';\n    } else if (oauthParams.display === 'popup') {\n      flowType = 'POPUP';\n    } else {\n      flowType = 'IMPLICIT';\n    }\n\n    function getOrigin(url) {\n      /* eslint-disable-next-line no-useless-escape */\n      var originRegex = /^(https?\\:\\/\\/)?([^:\\/?#]*(?:\\:[0-9]+)?)/;\n      return originRegex.exec(url)[0];\n    }\n\n    // Execute the flow type\n    switch (flowType) {\n      case 'IFRAME':\n        var iframePromise = addPostMessageListener(sdk, options.timeout, oauthParams.state);\n        var iframeEl = oauthUtil.loadFrame(requestUrl);\n        return iframePromise\n          .then(function(res) {\n            return handleOAuthResponse(sdk, oauthParams, res, urls);\n          })\n          .fin(function() {\n            if (document.body.contains(iframeEl)) {\n              iframeEl.parentElement.removeChild(iframeEl);\n            }\n          });\n\n      case 'POPUP': // eslint-disable-line no-case-declarations\n        var popupPromise;\n\n        // Add listener on postMessage before window creation, so\n        // postMessage isn't triggered before we're listening\n        if (oauthParams.responseMode === 'okta_post_message') {\n          if (!sdk.features.isPopupPostMessageSupported()) {\n            return Q.reject(new AuthSdkError('This browser doesn\\'t have full postMessage support'));\n          }\n          popupPromise = addPostMessageListener(sdk, options.timeout, oauthParams.state);\n        }\n\n        // Create the window\n        var windowOptions = {\n          popupTitle: options.popupTitle\n        };\n        var windowEl = oauthUtil.loadPopup(requestUrl, windowOptions);\n\n        // Poll until we get a valid hash fragment\n        if (oauthParams.responseMode === 'fragment') {\n          var windowOrigin = getOrigin(sdk.idToken.authorize._getLocationHref());\n          var redirectUriOrigin = getOrigin(oauthParams.redirectUri);\n          if (windowOrigin !== redirectUriOrigin) {\n            return Q.reject(new AuthSdkError('Using fragment, the redirectUri origin (' + redirectUriOrigin +\n              ') must match the origin of this page (' + windowOrigin + ')'));\n          }\n          popupPromise = addFragmentListener(sdk, windowEl, options.timeout);\n        }\n\n        // Both postMessage and fragment require a poll to see if the popup closed\n        var popupDeferred = Q.defer();\n        /* eslint-disable-next-line no-case-declarations, no-inner-declarations */\n        function hasClosed(win) {\n          if (!win || win.closed) {\n            popupDeferred.reject(new AuthSdkError('Unable to parse OAuth flow response'));\n            return true;\n          }\n        }\n        var closePoller = setInterval(function() {\n          if (hasClosed(windowEl)) {\n            clearInterval(closePoller);\n          }\n        }, 500);\n\n        // Proxy the promise results into the deferred\n        popupPromise\n        .then(function(res) {\n          popupDeferred.resolve(res);\n        })\n        .fail(function(err) {\n          popupDeferred.reject(err);\n        });\n\n        return popupDeferred.promise\n          .then(function(res) {\n            return handleOAuthResponse(sdk, oauthParams, res, urls);\n          })\n          .fin(function() {\n            clearInterval(closePoller);\n            if (windowEl && !windowEl.closed) {\n              windowEl.close();\n            }\n          });\n\n      default:\n        return Q.reject(new AuthSdkError('The full page redirect flow is not supported'));\n    }\n  });\n}\n\nfunction getWithoutPrompt(sdk, oauthOptions, options) {\n  var oauthParams = util.clone(oauthOptions) || {};\n  util.extend(oauthParams, {\n    prompt: 'none',\n    responseMode: 'okta_post_message',\n    display: null\n  });\n  return getToken(sdk, oauthParams, options);\n}\n\nfunction getWithPopup(sdk, oauthOptions, options) {\n  var oauthParams = util.clone(oauthOptions) || {};\n  util.extend(oauthParams, {\n    display: 'popup',\n    responseMode: 'okta_post_message'\n  });\n  return getToken(sdk, oauthParams, options);\n}\n\nfunction prepareOauthParams(sdk, oauthOptions) {\n  // clone and prepare options\n  oauthOptions = util.clone(oauthOptions) || {};\n\n  // OKTA-242989: support for grantType will be removed in 3.0 \n  if (oauthOptions.grantType === 'authorization_code') {\n    oauthOptions.pkce = true;\n  }\n\n  // build params using defaults + options\n  var oauthParams = getDefaultOAuthParams(sdk);\n  util.extend(oauthParams, oauthOptions);\n\n  if (oauthParams.pkce !== true) {\n    return Q.resolve(oauthParams);\n  }\n\n  // PKCE flow\n  if (!sdk.features.isPKCESupported()) {\n    return Q.reject(new AuthSdkError('This browser doesn\\'t support PKCE'));\n  }\n\n  // set default code challenge method, if none provided\n  if (!oauthParams.codeChallengeMethod) {\n    oauthParams.codeChallengeMethod = PKCE.DEFAULT_CODE_CHALLENGE_METHOD;\n  }\n\n  // responseType is forced\n  oauthParams.responseType = 'code';\n\n  return oauthUtil.getWellKnown(sdk, null)\n    .then(function(res) {\n      var methods = res['code_challenge_methods_supported'] || [];\n      if (methods.indexOf(oauthParams.codeChallengeMethod) === -1) {\n        throw new AuthSdkError('Invalid code_challenge_method');\n      }\n    })\n    .then(function() {\n      // PKCE authorization_code flow\n      var codeVerifier = PKCE.generateVerifier(oauthParams.codeVerifier);\n\n      // We will need these values after redirect when we call /token\n      var meta = {\n        codeVerifier: codeVerifier,\n        redirectUri: oauthParams.redirectUri\n      };\n      PKCE.saveMeta(sdk, meta);\n\n      return PKCE.computeChallenge(codeVerifier);\n    })\n    .then(function(codeChallenge) {\n\n      // Clone/copy the params. Set codeChallenge\n      var clonedParams = util.clone(oauthParams) || {};\n      util.extend(clonedParams, oauthParams, {\n        codeChallenge: codeChallenge,\n      });\n      return clonedParams;\n    });\n}\n\nfunction getWithRedirect(sdk, oauthOptions, options) {\n  oauthOptions = util.clone(oauthOptions) || {};\n\n  return prepareOauthParams(sdk, oauthOptions)\n    .then(function(oauthParams) {\n\n      // Dynamically set the responseMode unless the user has provided one\n      // Server-side flow requires query. Client-side apps usually prefer fragment.\n      if (!oauthOptions.responseMode) {\n        if (oauthParams.responseType.includes('code') && !oauthParams.pkce) {\n          // server-side flows using authorization_code\n          oauthParams.responseMode = 'query';\n        } else {\n          // Client-side flow can use fragment or query. This can be configured on the SDK instance.\n          oauthParams.responseMode = sdk.options.responseMode || 'fragment';\n        }\n      }\n\n      var urls = oauthUtil.getOAuthUrls(sdk, oauthParams, options);\n      var requestUrl = urls.authorizeUrl + buildAuthorizeParams(oauthParams);\n\n      // Chrome >= 80 will block cookies with SameSite=None unless they are also Secure\n      // If the application is running on HTTPS, we can relax 3rd party cookie settings.\n      // This will allow embedding the app in an iframe (only if it is running on HTTPS protocol)\n      var isSecure = window.location.protocol === 'https:';\n      var cookieSettings = {\n        secure: isSecure,\n        sameSite: isSecure ? 'none' : 'lax'\n      };\n\n      // Set session cookie to store the oauthParams\n      cookies.set(constants.REDIRECT_OAUTH_PARAMS_COOKIE_NAME, JSON.stringify({\n        responseType: oauthParams.responseType,\n        state: oauthParams.state,\n        nonce: oauthParams.nonce,\n        scopes: oauthParams.scopes,\n        clientId: oauthParams.clientId,\n        urls: urls,\n        ignoreSignature: oauthParams.ignoreSignature\n      }), null, cookieSettings);\n\n      // Set nonce cookie for servers to validate nonce in id_token\n      cookies.set(constants.REDIRECT_NONCE_COOKIE_NAME, oauthParams.nonce, null, cookieSettings);\n\n      // Set state cookie for servers to validate state\n      cookies.set(constants.REDIRECT_STATE_COOKIE_NAME, oauthParams.state, null, cookieSettings);\n\n      sdk.token.getWithRedirect._setLocation(requestUrl);\n    });\n}\n\nfunction renewToken(sdk, token) {\n  if (!oauthUtil.isToken(token)) {\n    return Q.reject(new AuthSdkError('Renew must be passed a token with ' +\n      'an array of scopes and an accessToken or idToken'));\n  }\n\n  var responseType;\n  if (sdk.options.pkce) {\n    responseType = 'code';\n  } else if (token.accessToken) {\n    responseType = 'token';\n  } else {\n    responseType = 'id_token';\n  }\n\n  return sdk.token.getWithoutPrompt({\n    responseType: responseType,\n    scopes: token.scopes\n  }, {\n    authorizeUrl: token.authorizeUrl,\n    userinfoUrl: token.userinfoUrl,\n    issuer: token.issuer\n  });\n}\n\nfunction removeHash(sdk) {\n  var nativeHistory = sdk.token.parseFromUrl._getHistory();\n  var nativeDoc = sdk.token.parseFromUrl._getDocument();\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n  if (nativeHistory && nativeHistory.replaceState) {\n    nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.search);\n  } else {\n    nativeLoc.hash = '';\n  }\n}\n\nfunction removeSearch(sdk) {\n  var nativeHistory = sdk.token.parseFromUrl._getHistory();\n  var nativeDoc = sdk.token.parseFromUrl._getDocument();\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n  if (nativeHistory && nativeHistory.replaceState) {\n    nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.hash);\n  } else {\n    nativeLoc.search = '';\n  }\n}\n\nfunction parseFromUrl(sdk, options) {\n  options = options || {};\n  if (util.isString(options)) {\n    options = { url: options };\n  }\n\n  var url = options.url;\n  var responseMode = options.responseMode || sdk.options.responseMode || 'fragment';\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n  var paramStr;\n\n  if (responseMode === 'query') {\n    paramStr = url ? url.substring(url.indexOf('?')) : nativeLoc.search;\n  } else {\n    paramStr = url ? url.substring(url.indexOf('#')) : nativeLoc.hash;\n  }\n\n  if (!paramStr) {\n    return Q.reject(new AuthSdkError('Unable to parse a token from the url'));\n  }\n\n  var oauthParamsCookie = cookies.get(constants.REDIRECT_OAUTH_PARAMS_COOKIE_NAME);\n  if (!oauthParamsCookie) {\n    return Q.reject(new AuthSdkError('Unable to retrieve OAuth redirect params cookie'));\n  }\n\n  try {\n    var oauthParams = JSON.parse(oauthParamsCookie);\n    var urls = oauthParams.urls;\n    delete oauthParams.urls;\n    cookies.delete(constants.REDIRECT_OAUTH_PARAMS_COOKIE_NAME);\n  } catch(e) {\n    return Q.reject(new AuthSdkError('Unable to parse the ' +\n    constants.REDIRECT_OAUTH_PARAMS_COOKIE_NAME + ' cookie: ' + e.message));\n  }\n\n  return Q.resolve(oauthUtil.urlParamsToObject(paramStr))\n    .then(function(res) {\n      if (!url) {\n        // Clean hash or search from the url\n        responseMode === 'query' ? removeSearch(sdk) : removeHash(sdk);\n      }\n      return handleOAuthResponse(sdk, oauthParams, res, urls);\n    });\n}\n\nfunction getUserInfo(sdk, accessTokenObject) {\n  if (!accessTokenObject ||\n      (!oauthUtil.isToken(accessTokenObject) && !accessTokenObject.accessToken && !accessTokenObject.userinfoUrl)) {\n    return Q.reject(new AuthSdkError('getUserInfo requires an access token object'));\n  }\n  return http.httpRequest(sdk, {\n    url: accessTokenObject.userinfoUrl,\n    method: 'GET',\n    accessToken: accessTokenObject.accessToken\n  })\n  .fail(function(err) {\n    if (err.xhr && (err.xhr.status === 401 || err.xhr.status === 403)) {\n      var authenticateHeader;\n      if (err.xhr.headers && util.isFunction(err.xhr.headers.get) && err.xhr.headers.get('WWW-Authenticate')) {\n        authenticateHeader = err.xhr.headers.get('WWW-Authenticate');\n      } else if (util.isFunction(err.xhr.getResponseHeader)) {\n        authenticateHeader = err.xhr.getResponseHeader('WWW-Authenticate');\n      }\n      if (authenticateHeader) {\n        var errorMatches = authenticateHeader.match(/error=\"(.*?)\"/) || [];\n        var errorDescriptionMatches = authenticateHeader.match(/error_description=\"(.*?)\"/) || [];\n        var error = errorMatches[1];\n        var errorDescription = errorDescriptionMatches[1];\n        if (error && errorDescription) {\n          err = new OAuthError(error, errorDescription);\n        }\n      }\n    }\n    throw err;\n  });\n}\n\nmodule.exports = {\n  revokeToken: revokeToken,\n  getToken: getToken,\n  getWithoutPrompt: getWithoutPrompt,\n  getWithPopup: getWithPopup,\n  getWithRedirect: getWithRedirect,\n  parseFromUrl: parseFromUrl,\n  decodeToken: decodeToken,\n  renewToken: renewToken,\n  getUserInfo: getUserInfo,\n  verifyToken: verifyToken,\n  handleOAuthResponse: handleOAuthResponse,\n  prepareOauthParams: prepareOauthParams\n};\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nvar util = __webpack_require__(0);\n\nfunction verifyToken(idToken, key) {\n  key = util.clone(key);\n\n  var format = 'jwk';\n  var algo = {\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: { name: 'SHA-256' }\n  };\n  var extractable = true;\n  var usages = ['verify'];\n\n  // https://connect.microsoft.com/IE/feedback/details/2242108/webcryptoapi-importing-jwk-with-use-field-fails\n  // This is a metadata tag that specifies the intent of how the key should be used.\n  // It's not necessary to properly verify the jwt's signature.\n  delete key.use;\n\n  return crypto.subtle.importKey(\n    format,\n    key,\n    algo,\n    extractable,\n    usages\n  )\n  .then(function(cryptoKey) {\n    var jwt = idToken.split('.');\n    var payload = util.stringToBuffer(jwt[0] + '.' + jwt[1]);\n    var b64Signature = util.base64UrlDecode(jwt[2]);\n    var signature = util.stringToBuffer(b64Signature);\n\n    return crypto.subtle.verify(\n      algo,\n      cryptoKey,\n      signature,\n      payload\n    );\n  });\n}\n\nmodule.exports = {\n  verifyToken: verifyToken\n};\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction OAuthError(errorCode, summary) {\n  this.name = 'OAuthError';\n  this.message = summary;\n\n  this.errorCode = errorCode;\n  this.errorSummary = summary;\n}\nOAuthError.prototype = new Error();\n\nmodule.exports = OAuthError;\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2019-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n /* eslint-disable complexity, max-statements */\nvar AuthSdkError  = __webpack_require__(1);\nvar http          = __webpack_require__(3);\nvar util          = __webpack_require__(0);\n\n// Code verifier: Random URL-safe string with a minimum length of 43 characters.\n// Code challenge: Base64 URL-encoded SHA-256 hash of the code verifier.\nvar MIN_VERIFIER_LENGTH = 43;\nvar MAX_VERIFIER_LENGTH = 128;\nvar DEFAULT_CODE_CHALLENGE_METHOD = 'S256';\n\nfunction dec2hex (dec) {\n  return ('0' + dec.toString(16)).substr(-2);\n}\n\nfunction getRandomString(length) {\n  var a = new Uint8Array(Math.ceil(length / 2));\n  crypto.getRandomValues(a);\n  var str = Array.from(a, dec2hex).join('');\n  return str.slice(0, length);\n}\n\nfunction generateVerifier(prefix) {\n  var verifier = prefix || '';\n  if (verifier.length < MIN_VERIFIER_LENGTH) {\n    verifier = verifier + getRandomString(MIN_VERIFIER_LENGTH - verifier.length);\n  }\n  return encodeURIComponent(verifier).slice(0, MAX_VERIFIER_LENGTH);\n}\n\nfunction saveMeta(sdk, meta) {\n  var storage = sdk.options.storageUtil.getPKCEStorage();\n  storage.setStorage(meta);\n}\n\nfunction loadMeta(sdk) {\n  var storage = sdk.options.storageUtil.getPKCEStorage();\n  var obj = storage.getStorage();\n  return obj;\n}\n\nfunction clearMeta(sdk) {\n  var storage = sdk.options.storageUtil.getPKCEStorage();\n  storage.clearStorage();\n}\n\n/* global Uint8Array, TextEncoder */\nfunction computeChallenge(str) {  \n  var buffer = new TextEncoder().encode(str);\n  return crypto.subtle.digest('SHA-256', buffer).then(function(arrayBuffer) {\n    var hash = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n    var b64u = util.stringToBase64Url(hash); // url-safe base64 variant\n    return b64u;\n  });\n}\n\n\nfunction validateOptions(oauthOptions) {\n  // Quick validation\n  if (!oauthOptions.clientId) {\n    throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n  }\n\n  if (!oauthOptions.redirectUri) {\n    throw new AuthSdkError('The redirectUri passed to /authorize must also be passed to /token');\n  }\n\n  if (!oauthOptions.authorizationCode) {\n    throw new AuthSdkError('An authorization code (returned from /authorize) must be passed to /token');\n  }\n\n  if (!oauthOptions.codeVerifier) {\n    throw new AuthSdkError('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n  }\n}\n\nfunction getPostData(options) {\n  // Convert options to OAuth params\n  var params = util.removeNils({\n    'client_id': options.clientId,\n    'redirect_uri': options.redirectUri,\n    'grant_type': 'authorization_code',\n    'code': options.authorizationCode,\n    'code_verifier': options.codeVerifier\n  });\n  // Encode as URL string\n  return util.toQueryParams(params).slice(1);\n}\n\n// exchange authorization code for an access token\nfunction getToken(sdk, oauthOptions, urls) {\n  validateOptions(oauthOptions);\n  var data = getPostData(oauthOptions);\n\n  return http.httpRequest(sdk, {\n    url: urls.tokenUrl,\n    method: 'POST',\n    args: data,\n    withCredentials: false,\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n}\n\nmodule.exports = {\n  DEFAULT_CODE_CHALLENGE_METHOD: DEFAULT_CODE_CHALLENGE_METHOD,\n  generateVerifier: generateVerifier,\n  clearMeta: clearMeta,\n  saveMeta: saveMeta,\n  loadMeta: loadMeta,\n  computeChallenge: computeChallenge,\n  getToken: getToken\n};\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint complexity:[0,8] max-statements:[0,21] */\nvar util = __webpack_require__(0);\nvar AuthSdkError = __webpack_require__(1);\nvar storageUtil = __webpack_require__(4);\nvar Q = __webpack_require__(5);\nvar constants = __webpack_require__(2);\nvar storageBuilder = __webpack_require__(6);\nvar SdkClock = __webpack_require__(30);\n\nvar DEFAULT_OPTIONS = {\n  autoRenew: true,\n  storage: 'localStorage',\n  expireEarlySeconds: 30\n};\n\nfunction getExpireTime(tokenMgmtRef, token) {\n  var expireTime = token.expiresAt - tokenMgmtRef.options.expireEarlySeconds;\n  return expireTime;\n}\n\nfunction hasExpired(tokenMgmtRef, token) {\n  var expireTime = getExpireTime(tokenMgmtRef, token);\n  return expireTime <= tokenMgmtRef.clock.now();\n}\n\nfunction emitExpired(tokenMgmtRef, key, token) {\n  tokenMgmtRef.emitter.emit('expired', key, token);\n}\n\nfunction emitError(tokenMgmtRef, error) {\n  tokenMgmtRef.emitter.emit('error', error);\n}\n\nfunction clearExpireEventTimeout(tokenMgmtRef, key) {\n  clearTimeout(tokenMgmtRef.expireTimeouts[key]);\n  delete tokenMgmtRef.expireTimeouts[key];\n\n  // Remove the renew promise (if it exists)\n  delete tokenMgmtRef.renewPromise[key];\n}\n\nfunction clearExpireEventTimeoutAll(tokenMgmtRef) {\n  var expireTimeouts = tokenMgmtRef.expireTimeouts;\n  for (var key in expireTimeouts) {\n    if (!expireTimeouts.hasOwnProperty(key)) {\n      continue;\n    }\n    clearExpireEventTimeout(tokenMgmtRef, key);\n  }\n}\n\nfunction setExpireEventTimeout(sdk, tokenMgmtRef, key, token) {\n  var expireTime = getExpireTime(tokenMgmtRef, token);\n  var expireEventWait = Math.max(expireTime - tokenMgmtRef.clock.now(), 0) * 1000;\n\n  // Clear any existing timeout\n  clearExpireEventTimeout(tokenMgmtRef, key);\n\n  var expireEventTimeout = setTimeout(function() {\n    emitExpired(tokenMgmtRef, key, token);\n  }, expireEventWait);\n\n  // Add a new timeout\n  tokenMgmtRef.expireTimeouts[key] = expireEventTimeout;\n}\n\nfunction setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage) {\n  try {\n    var tokenStorage = storage.getStorage();\n  } catch(e) {\n    // Any errors thrown on instantiation will not be caught,\n    // because there are no listeners yet\n    emitError(tokenMgmtRef, e);\n    return;\n  }\n\n  for(var key in tokenStorage) {\n    if (!tokenStorage.hasOwnProperty(key)) {\n      continue;\n    }\n    var token = tokenStorage[key];\n    setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n  }\n}\n\nfunction add(sdk, tokenMgmtRef, storage, key, token) {\n  var tokenStorage = storage.getStorage();\n  if (!util.isObject(token) ||\n      !token.scopes ||\n      (!token.expiresAt && token.expiresAt !== 0) ||\n      (!token.idToken && !token.accessToken)) {\n    throw new AuthSdkError('Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties');\n  }\n  tokenStorage[key] = token;\n  storage.setStorage(tokenStorage);\n  setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n}\n\nfunction get(storage, key) {\n  var tokenStorage = storage.getStorage();\n  return tokenStorage[key];\n}\n\nfunction getAsync(sdk, tokenMgmtRef, storage, key) {\n  return Q.Promise(function(resolve) {\n    var token = get(storage, key);\n    if (!token || !hasExpired(tokenMgmtRef, token)) {\n      return resolve(token);\n    }\n\n    var tokenPromise = tokenMgmtRef.options.autoRenew\n      ? renew(sdk, tokenMgmtRef, storage, key)\n      : remove(tokenMgmtRef, storage, key);\n\n    return resolve(tokenPromise);\n  });\n}\n\nfunction remove(tokenMgmtRef, storage, key) {\n  // Clear any listener for this token\n  clearExpireEventTimeout(tokenMgmtRef, key);\n\n  // Remove it from storage\n  var tokenStorage = storage.getStorage();\n  delete tokenStorage[key];\n  storage.setStorage(tokenStorage);\n}\n\nfunction renew(sdk, tokenMgmtRef, storage, key) {\n  // Multiple callers may receive the same promise. They will all resolve or reject from the same request.\n  var existingPromise = tokenMgmtRef.renewPromise[key];\n  if (existingPromise) {\n    return existingPromise;\n  }\n\n  try {\n    var token = get(storage, key);\n    if (!token) {\n      throw new AuthSdkError('The tokenManager has no token for the key: ' + key);\n    }\n  } catch (e) {\n    return Q.reject(e);\n  }\n\n  // Remove existing autoRenew timeout for this key\n  clearExpireEventTimeout(tokenMgmtRef, key);\n\n  // Store the renew promise state, to avoid renewing again\n  tokenMgmtRef.renewPromise[key] = sdk.token.renew(token)\n    .then(function(freshTokens) {\n      var freshToken = freshTokens;\n      // With PKCE flow we will receive multiple tokens. Find the one we are looking for\n      if (freshTokens instanceof Array) {\n        freshToken = freshTokens.find(function(freshToken) {\n          return (freshToken.idToken && token.idToken) || (freshToken.accessToken && token.accessToken);\n        });\n      }\n\n      var oldToken = get(storage, key);\n      if (!oldToken) {\n        // It is possible to enter a state where the tokens have been cleared\n        // after a renewal request was triggered. To ensure we do not store a\n        // renewed token, we verify the promise key doesn't exist and return.\n        return;\n      }\n      add(sdk, tokenMgmtRef, storage, key, freshToken);\n      tokenMgmtRef.emitter.emit('renewed', key, freshToken, oldToken);\n      return freshToken;\n    })\n    .catch(function(err) {\n      if (err.name === 'OAuthError' || err.name === 'AuthSdkError') {\n        remove(tokenMgmtRef, storage, key);\n        err.tokenKey = key;\n        err.accessToken = !!token.accessToken;\n        emitError(tokenMgmtRef, err);\n      }\n      throw err;\n    })\n    .finally(function() {\n      // Remove existing promise key\n      delete tokenMgmtRef.renewPromise[key];\n    });\n\n  return tokenMgmtRef.renewPromise[key];\n}\n\nfunction clear(tokenMgmtRef, storage) {\n  clearExpireEventTimeoutAll(tokenMgmtRef);\n  storage.clearStorage();\n}\n\nfunction TokenManager(sdk, options) {\n  options = util.extend({}, DEFAULT_OPTIONS, util.removeNils(options));\n\n  if (options.storage === 'localStorage' && !storageUtil.browserHasLocalStorage()) {\n    util.warn('This browser doesn\\'t support localStorage. Switching to sessionStorage.');\n    options.storage = 'sessionStorage';\n  }\n\n  if (options.storage === 'sessionStorage' && !storageUtil.browserHasSessionStorage()) {\n    util.warn('This browser doesn\\'t support sessionStorage. Switching to cookie-based storage.');\n    options.storage = 'cookie';\n  }\n\n  var storageProvider;\n  if (typeof options.storage === 'object') {\n    // A custom storage provider must implement getItem(key) and setItem(key, val)\n    storageProvider = options.storage;\n  } else {\n    switch(options.storage) {\n      case 'localStorage':\n        storageProvider = localStorage;\n        break;\n      case 'sessionStorage':\n        storageProvider = sessionStorage;\n        break;\n      case 'cookie':\n        storageProvider = storageUtil.getCookieStorage(options);\n        break;\n      case 'memory':\n        storageProvider = storageUtil.getInMemoryStorage();\n        break;\n      default:\n        throw new AuthSdkError('Unrecognized storage option');\n    }\n  }\n  var storageKey = options.storageKey || constants.TOKEN_STORAGE_NAME;\n  var storage = storageBuilder(storageProvider, storageKey);\n  var clock = SdkClock.create(sdk, options);\n  var tokenMgmtRef = {\n    clock: clock,\n    options: options,\n    emitter: sdk.emitter,\n    expireTimeouts: {},\n    renewPromise: {}\n  };\n\n  this.add = util.bind(add, this, sdk, tokenMgmtRef, storage);\n  this.get = util.bind(getAsync, this, sdk, tokenMgmtRef, storage);\n  this.remove = util.bind(remove, this, tokenMgmtRef, storage);\n  this.clear = util.bind(clear, this, tokenMgmtRef, storage);\n  this.renew = util.bind(renew, this, sdk, tokenMgmtRef, storage);\n  this.on = util.bind(tokenMgmtRef.emitter.on, tokenMgmtRef.emitter);\n  this.off = util.bind(tokenMgmtRef.emitter.off, tokenMgmtRef.emitter);\n\n  setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage);\n}\n\nmodule.exports = TokenManager;\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\n\nfunction SdkClock(localOffset) {\n  // Calculated local clock offset from server time (in milliseconds). Can be positive or negative.\n  this.localOffset = parseInt(localOffset || 0);\n}\n\nutil.extend(SdkClock.prototype, {\n  // Return the current time (in seconds)\n  now: function() {\n    var now = (Date.now() + this.localOffset) / 1000;\n    return now;\n  }\n});\n\n// factory method. Create an instance of a clock from current context.\nSdkClock.create = function(/* sdk, options */) {\n  // TODO: calculate localOffset\n  var localOffset = 0;\n  return new SdkClock(localOffset);\n};\n\nmodule.exports = SdkClock;\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// okta-auth-js.min.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* eslint-env es6 */\nvar util = module.exports;\n\n// converts a string to base64 (url/filename safe variant)\nutil.stringToBase64Url = function(str) {\n  var b64 = btoa(str);\n  return util.base64ToBase64Url(b64);\n};\n\n// converts a standard base64-encoded string to a \"url/filename safe\" variant\nutil.base64ToBase64Url = function(b64) {\n  return b64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n};\n\n// converts a \"url/filename safe\" base64 string to a \"standard\" base64 string\nutil.base64UrlToBase64 = function(b64u) {\n  return b64u.replace(/-/g, '+').replace(/_/g, '/');\n};\n\nutil.base64UrlToString = function(b64u) {\n  var b64 = util.base64UrlToBase64(b64u);\n  switch (b64.length % 4) {\n    case 0:\n      break;\n    case 2:\n      b64 += '==';\n      break;\n    case 3:\n      b64 += '=';\n      break;\n    default:\n      throw 'Not a valid Base64Url';\n  }\n  var utf8 = atob(b64);\n  try {\n    return decodeURIComponent(escape(utf8));\n  } catch (e) {\n    return utf8;\n  }\n};\n\nutil.stringToBuffer = function(str) {\n  var buffer = new Uint8Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    buffer[i] = str.charCodeAt(i);\n  }\n  return buffer;\n};\n\nutil.base64UrlDecode = function(str) {\n  return atob(util.base64UrlToBase64(str));\n};\n\nutil.bind = function(fn, ctx) {\n  var additionalArgs = Array.prototype.slice.call(arguments, 2);\n  return function() {\n    var args = Array.prototype.slice.call(arguments);\n    args = additionalArgs.concat(args);\n    return fn.apply(ctx, args);\n  };\n};\n\nutil.isAbsoluteUrl = function(url) {\n  return /^(?:[a-z]+:)?\\/\\//i.test(url);\n};\n\nutil.isString = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object String]';\n};\n\nutil.isObject = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n};\n\nutil.isNumber = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Number]';\n};\n\nutil.isArray = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\n\nutil.isoToUTCString = function(str) {\n  var parts = str.match(/\\d+/g),\n      isoTime = Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5]),\n      isoDate = new Date(isoTime);\n\n  return isoDate.toUTCString();\n};\n\nutil.toQueryParams = function(obj) {\n  var str = [];\n  if (obj !== null) {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) &&\n          obj[key] !== undefined &&\n          obj[key] !== null) {\n        str.push(key + '=' + encodeURIComponent(obj[key]));\n      }\n    }\n  }\n  if (str.length) {\n    return '?' + str.join('&');\n  } else {\n    return '';\n  }\n};\n\nutil.genRandomString = function(length) {\n  var randomCharset = 'abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  var random = '';\n  for (var c = 0, cl = randomCharset.length; c < length; ++c) {\n    random += randomCharset[Math.floor(Math.random() * cl)];\n  }\n  return random;\n};\n\nutil.extend = function() {\n  // First object will be modified!\n  var obj1 = arguments[0];\n  // Properties from other objects will be copied over\n  var objArray = [].slice.call(arguments, 1);\n  objArray.forEach(function(obj) {\n    for (var prop in obj) {\n      // copy over all properties with defined values\n      if (obj.hasOwnProperty(prop) && obj[prop] !== undefined) {\n        obj1[prop] = obj[prop];\n      }\n    }\n  });\n  return obj1; // return the modified object\n};\n\nutil.removeNils = function(obj) {\n  var cleaned = {};\n  for (var prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      var value = obj[prop];\n      if (value !== null && value !== undefined) {\n        cleaned[prop] = value;\n      }\n    }\n  }\n  return cleaned;\n};\n\nutil.clone = function(obj) {\n  if (obj) {\n    var str = JSON.stringify(obj);\n    if (str) {\n      return JSON.parse(str);\n    }\n  }\n  return obj;\n};\n\n// Analogous to _.omit\nutil.omit = function(obj) {\n  var props = Array.prototype.slice.call(arguments, 1);\n  var newobj = {};\n  for (var p in obj) {\n    if (obj.hasOwnProperty(p) && props.indexOf(p) == -1) {\n      newobj[p] = obj[p];\n    }\n  }\n  return util.clone(newobj);\n};\n\nutil.find = function(collection, searchParams) {\n  var c = collection.length;\n  while (c--) {\n    var item = collection[c];\n    var found = true;\n    for (var prop in searchParams) {\n      if (!searchParams.hasOwnProperty(prop)) {\n        continue;\n      }\n      if (item[prop] !== searchParams[prop]) {\n        found = false;\n        break;\n      }\n    }\n    if (found) {\n      return item;\n    }\n  }\n};\n\nutil.getLink = function(obj, linkName, altName) {\n  if (!obj || !obj._links) {\n    return;\n  }\n\n  var link = util.clone(obj._links[linkName]);\n\n  // If a link has a name and we have an altName, return if they match\n  if (link && link.name && altName) {\n    if (link.name === altName) {\n      return link;\n    }\n  } else {\n    return link;\n  }\n};\n\nutil.getNativeConsole = function() {\n  if (typeof window !== 'undefined') {\n    return window.console;\n  } else if (typeof console !== 'undefined') {\n    return console;\n  } else {\n    return undefined;\n  }\n};\n\nutil.getConsole = function() {\n  var nativeConsole = util.getNativeConsole();\n  if (nativeConsole && nativeConsole.log) {\n    return nativeConsole;\n  }\n  return {\n    log: function() {}\n  };\n};\n\nutil.warn = function(text) {\n  /* eslint-disable no-console */\n  util.getConsole().log('[okta-auth-sdk] WARN: ' + text);\n  /* eslint-enable */\n};\n\nutil.deprecate = function(text) {\n  /* eslint-disable no-console */\n  util.getConsole().log('[okta-auth-sdk] DEPRECATION: ' + text);\n  /* eslint-enable */\n};\n\nutil.deprecateWrap = function(text, fn) {\n  return function() {\n    util.deprecate(text);\n    return fn.apply(null, arguments);\n  };\n};\n\nutil.removeTrailingSlash = function(path) {\n  if (!path) {\n    return;\n  }\n  // Remove any whitespace before or after string\n  var trimmed = path.replace(/^\\s+|\\s+$/gm,'');\n  // Remove trailing slash(es)\n  trimmed = trimmed.replace(/\\/+$/, '');\n\n  return trimmed;\n};\n\nutil.isIE11OrLess = function() {\n  return !!document.documentMode && document.documentMode <= 11;\n};\n\nutil.isFunction = function(fn) {\n  return !!fn && {}.toString.call(fn) === '[object Function]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/util.js\n// module id = 0\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction AuthSdkError(msg, xhr) {\n  this.name = 'AuthSdkError';\n  this.message = msg;\n\n  this.errorCode = 'INTERNAL';\n  this.errorSummary = msg;\n  this.errorLink = 'INTERNAL';\n  this.errorId = 'INTERNAL';\n  this.errorCauses = [];\n  if (xhr) {\n    this.xhr = xhr;\n  }\n}\nAuthSdkError.prototype = new Error();\n\nmodule.exports = AuthSdkError;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/errors/AuthSdkError.js\n// module id = 1\n// module chunks = 0","module.exports = {\n  'STATE_TOKEN_KEY_NAME': 'oktaStateToken',\n  'DEFAULT_POLLING_DELAY': 500,\n  'DEFAULT_MAX_CLOCK_SKEW': 300,\n  'DEFAULT_CACHE_DURATION': 86400,\n  'REDIRECT_OAUTH_PARAMS_COOKIE_NAME': 'okta-oauth-redirect-params',\n  'REDIRECT_STATE_COOKIE_NAME': 'okta-oauth-state',\n  'REDIRECT_NONCE_COOKIE_NAME': 'okta-oauth-nonce',\n  'TOKEN_STORAGE_NAME': 'okta-token-storage',\n  'CACHE_STORAGE_NAME': 'okta-cache-storage',\n  'PKCE_STORAGE_NAME': 'okta-pkce-storage'\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/constants.js\n// module id = 2\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity */\nvar util = require('./util');\nvar Q = require('q');\nvar AuthApiError = require('./errors/AuthApiError');\nvar constants = require('./constants');\n\nfunction httpRequest(sdk, options) {\n  options = options || {};\n  var url = options.url,\n      method = options.method,\n      args = options.args,\n      saveAuthnState = options.saveAuthnState,\n      accessToken = options.accessToken,\n      withCredentials = options.withCredentials !== false, // default value is true\n      storageUtil = sdk.options.storageUtil,\n      storage = storageUtil.storage,\n      httpCache = storageUtil.getHttpCache();\n\n  if (options.cacheResponse) {\n    var cacheContents = httpCache.getStorage();\n    var cachedResponse = cacheContents[url];\n    if (cachedResponse && Date.now()/1000 < cachedResponse.expiresAt) {\n      return Q.resolve(cachedResponse.response);\n    }\n  }\n\n  var headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'X-Okta-User-Agent-Extended': sdk.userAgent\n  };\n  util.extend(headers, sdk.options.headers, options.headers);\n\n  if (accessToken && util.isString(accessToken)) {\n    headers['Authorization'] = 'Bearer ' + accessToken;\n  }\n\n  var ajaxOptions = {\n    headers: headers,\n    data: args || undefined,\n    withCredentials: withCredentials\n  };\n\n  var err, res;\n  return new Q(sdk.options.httpRequestClient(method, url, ajaxOptions))\n    .then(function(resp) {\n      res = resp.responseText;\n      if (res && util.isString(res)) {\n        res = JSON.parse(res);\n      }\n\n      if (saveAuthnState) {\n        if (!res.stateToken) {\n          storage.delete(constants.STATE_TOKEN_KEY_NAME);\n        }\n      }\n\n      if (res && res.stateToken && res.expiresAt) {\n        storage.set(constants.STATE_TOKEN_KEY_NAME, res.stateToken, res.expiresAt);\n      }\n\n      if (res && options.cacheResponse) {\n        httpCache.updateStorage(url, {\n          expiresAt: Math.floor(Date.now()/1000) + constants.DEFAULT_CACHE_DURATION,\n          response: res\n        });\n      }\n\n      return res;\n    })\n    .fail(function(resp) {\n      var serverErr = resp.responseText || {};\n      if (util.isString(serverErr)) {\n        try {\n          serverErr = JSON.parse(serverErr);\n        } catch (e) {\n          serverErr = {\n            errorSummary: 'Unknown error'\n          };\n        }\n      }\n\n      if (resp.status >= 500) {\n        serverErr.errorSummary = 'Unknown error';\n      }\n\n      if (sdk.options.transformErrorXHR) {\n        resp = sdk.options.transformErrorXHR(util.clone(resp));\n      }\n\n      err = new AuthApiError(serverErr, resp);\n\n      if (err.errorCode === 'E0000011') {\n        storage.delete(constants.STATE_TOKEN_KEY_NAME);\n      }\n\n      throw err;\n    });\n}\n\nfunction get(sdk, url, options) {\n  url = util.isAbsoluteUrl(url) ? url : sdk.options.url + url;\n  var getOptions = {\n    url: url,\n    method: 'GET'\n  };\n  util.extend(getOptions, options);\n  return httpRequest(sdk, getOptions);\n}\n\nfunction post(sdk, url, args, options) {\n  url = util.isAbsoluteUrl(url) ? url : sdk.options.url + url;\n  var postOptions = {\n    url: url,\n    method: 'POST',\n    args: args,\n    saveAuthnState: true\n  };\n  util.extend(postOptions, options);\n  return httpRequest(sdk, postOptions);\n}\n\nmodule.exports = {\n  get: get,\n  post: post,\n  httpRequest: httpRequest\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/http.js\n// module id = 3\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar Cookies = require('js-cookie');\nvar storageBuilder = require('../storageBuilder');\nvar constants = require('../constants');\n\n// Building this as an object allows us to mock the functions in our tests\nvar storageUtil = {};\n\n// IE11 bug that Microsoft doesn't plan to fix\n// https://connect.microsoft.com/IE/Feedback/Details/1496040\nstorageUtil.browserHasLocalStorage = function() {\n  try {\n    var storage = storageUtil.getLocalStorage();\n    return storageUtil.testStorage(storage);\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.browserHasSessionStorage = function() {\n  try {\n    var storage = storageUtil.getSessionStorage();\n    return storageUtil.testStorage(storage);\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.getPKCEStorage = function() {\n  if (storageUtil.browserHasLocalStorage()) {\n    return storageBuilder(storageUtil.getLocalStorage(), constants.PKCE_STORAGE_NAME);\n  } else if (storageUtil.browserHasSessionStorage()) {\n    return storageBuilder(storageUtil.getSessionStorage(), constants.PKCE_STORAGE_NAME);\n  } else {\n    return storageBuilder(storageUtil.getCookieStorage({\n      secure: window.location.protocol === 'https:'\n    }), constants.PKCE_STORAGE_NAME);\n  }\n};\n\nstorageUtil.getHttpCache = function() {\n  if (storageUtil.browserHasLocalStorage()) {\n    return storageBuilder(storageUtil.getLocalStorage(), constants.CACHE_STORAGE_NAME);\n  } else if (storageUtil.browserHasSessionStorage()) {\n    return storageBuilder(storageUtil.getSessionStorage(), constants.CACHE_STORAGE_NAME);\n  } else {\n    return storageBuilder(storageUtil.getCookieStorage({\n      secure: window.location.protocol === 'https:'\n    }), constants.CACHE_STORAGE_NAME);\n  }\n};\n\nstorageUtil.getLocalStorage = function() {\n  return localStorage;\n};\n\nstorageUtil.getSessionStorage = function() {\n  return sessionStorage;\n};\n\n// Provides webStorage-like interface for cookies\nstorageUtil.getCookieStorage = function(options) {\n  options = options || {};\n  var secure = options.secure || false; // currently opt-in\n  var sameSite = options.sameSite || (secure ? 'none' : 'lax');\n  return {\n    getItem: storageUtil.storage.get,\n    setItem: function(key, value) {\n      // Cookie shouldn't expire\n      storageUtil.storage.set(key, value, '2200-01-01T00:00:00.000Z', {\n        secure: secure, \n        sameSite: sameSite\n      });\n    }\n  };\n};\n\n// Provides an in-memory solution\nstorageUtil.getInMemoryStorage = function() {\n  var store = {};\n  return {\n    getItem: function(key) {\n      return store[key];\n    },\n    setItem: function(key, value) {\n      store[key] = value;\n    }\n  };\n};\n\nstorageUtil.testStorage = function(storage) {\n  var key = 'okta-test-storage';\n  try {\n    storage.setItem(key, key);\n    storage.removeItem(key);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.storage = {\n  set: function(name, value, expiresAt, options) {\n    options = options || {};\n    var cookieOptions = {\n      path: options.path || '/',\n      secure: options.secure,\n      sameSite: options.sameSite\n    };\n\n    // eslint-disable-next-line no-extra-boolean-cast\n    if (!!(Date.parse(expiresAt))) {\n      // Expires value can be converted to a Date object.\n      //\n      // If the 'expiresAt' value is not provided, or the value cannot be\n      // parsed as a Date object, the cookie will set as a session cookie.\n      cookieOptions.expires = new Date(expiresAt);\n    }\n\n    Cookies.set(name, value, cookieOptions);\n    return storageUtil.storage.get(name);\n  },\n\n  get: function(name) {\n    return Cookies.get(name);\n  },\n\n  delete: function(name) {\n    return Cookies.remove(name, { path: '/' });\n  }\n};\n\nmodule.exports = storageUtil;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/browser/browserStorage.js\n// module id = 4\n// module chunks = 0","// vim:ts=4:sts=4:sw=4:\n/*!\n *\n * Copyright 2009-2012 Kris Kowal under the terms of the MIT\n * license found at http://github.com/kriskowal/q/raw/master/LICENSE\n *\n * With parts by Tyler Close\n * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n * at http://www.opensource.org/licenses/mit-license.html\n * Forked at ref_send.js version: 2009-05-11\n *\n * With parts by Mark Miller\n * Copyright (C) 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n(function (definition) {\n    \"use strict\";\n\n    // This file will function properly as a <script> tag, or a module\n    // using CommonJS and NodeJS or RequireJS module formats.  In\n    // Common/Node/RequireJS, the module exports the Q API and when\n    // executed as a simple <script>, it creates a Q global instead.\n\n    // Montage Require\n    if (typeof bootstrap === \"function\") {\n        bootstrap(\"promise\", definition);\n\n    // CommonJS\n    } else if (typeof exports === \"object\" && typeof module === \"object\") {\n        module.exports = definition();\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n        define(definition);\n\n    // SES (Secure EcmaScript)\n    } else if (typeof ses !== \"undefined\") {\n        if (!ses.ok()) {\n            return;\n        } else {\n            ses.makeQ = definition;\n        }\n\n    // <script>\n    } else if (typeof window !== \"undefined\" || typeof self !== \"undefined\") {\n        // Prefer window over self for add-on scripts. Use self for\n        // non-windowed contexts.\n        var global = typeof window !== \"undefined\" ? window : self;\n\n        // Get the `window` object, save the previous Q global\n        // and initialize Q as a global.\n        var previousQ = global.Q;\n        global.Q = definition();\n\n        // Add a noConflict function so Q can be removed from the\n        // global namespace.\n        global.Q.noConflict = function () {\n            global.Q = previousQ;\n            return this;\n        };\n\n    } else {\n        throw new Error(\"This environment was not anticipated by Q. Please file a bug.\");\n    }\n\n})(function () {\n\"use strict\";\n\nvar hasStacks = false;\ntry {\n    throw new Error();\n} catch (e) {\n    hasStacks = !!e.stack;\n}\n\n// All code after this point will be filtered from stack traces reported\n// by Q.\nvar qStartingLine = captureLine();\nvar qFileName;\n\n// shims\n\n// used for fallback in \"allResolved\"\nvar noop = function () {};\n\n// Use the fastest possible means to execute a task in a future turn\n// of the event loop.\nvar nextTick =(function () {\n    // linked list of tasks (single, with head node)\n    var head = {task: void 0, next: null};\n    var tail = head;\n    var flushing = false;\n    var requestTick = void 0;\n    var isNodeJS = false;\n    // queue for late tasks, used by unhandled rejection tracking\n    var laterQueue = [];\n\n    function flush() {\n        /* jshint loopfunc: true */\n        var task, domain;\n\n        while (head.next) {\n            head = head.next;\n            task = head.task;\n            head.task = void 0;\n            domain = head.domain;\n\n            if (domain) {\n                head.domain = void 0;\n                domain.enter();\n            }\n            runSingle(task, domain);\n\n        }\n        while (laterQueue.length) {\n            task = laterQueue.pop();\n            runSingle(task);\n        }\n        flushing = false;\n    }\n    // runs a single function in the async queue\n    function runSingle(task, domain) {\n        try {\n            task();\n\n        } catch (e) {\n            if (isNodeJS) {\n                // In node, uncaught exceptions are considered fatal errors.\n                // Re-throw them synchronously to interrupt flushing!\n\n                // Ensure continuation if the uncaught exception is suppressed\n                // listening \"uncaughtException\" events (as domains does).\n                // Continue in next event to avoid tick recursion.\n                if (domain) {\n                    domain.exit();\n                }\n                setTimeout(flush, 0);\n                if (domain) {\n                    domain.enter();\n                }\n\n                throw e;\n\n            } else {\n                // In browsers, uncaught exceptions are not fatal.\n                // Re-throw them asynchronously to avoid slow-downs.\n                setTimeout(function () {\n                    throw e;\n                }, 0);\n            }\n        }\n\n        if (domain) {\n            domain.exit();\n        }\n    }\n\n    nextTick = function (task) {\n        tail = tail.next = {\n            task: task,\n            domain: isNodeJS && process.domain,\n            next: null\n        };\n\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n\n    if (typeof process === \"object\" &&\n        process.toString() === \"[object process]\" && process.nextTick) {\n        // Ensure Q is in a real Node environment, with a `process.nextTick`.\n        // To see through fake Node environments:\n        // * Mocha test runner - exposes a `process` global without a `nextTick`\n        // * Browserify - exposes a `process.nexTick` function that uses\n        //   `setTimeout`. In this case `setImmediate` is preferred because\n        //    it is faster. Browserify's `process.toString()` yields\n        //   \"[object Object]\", while in a real Node environment\n        //   `process.nextTick()` yields \"[object process]\".\n        isNodeJS = true;\n\n        requestTick = function () {\n            process.nextTick(flush);\n        };\n\n    } else if (typeof setImmediate === \"function\") {\n        // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n        if (typeof window !== \"undefined\") {\n            requestTick = setImmediate.bind(window, flush);\n        } else {\n            requestTick = function () {\n                setImmediate(flush);\n            };\n        }\n\n    } else if (typeof MessageChannel !== \"undefined\") {\n        // modern browsers\n        // http://www.nonblocking.io/2011/06/windownexttick.html\n        var channel = new MessageChannel();\n        // At least Safari Version 6.0.5 (8536.30.1) intermittently cannot create\n        // working message ports the first time a page loads.\n        channel.port1.onmessage = function () {\n            requestTick = requestPortTick;\n            channel.port1.onmessage = flush;\n            flush();\n        };\n        var requestPortTick = function () {\n            // Opera requires us to provide a message payload, regardless of\n            // whether we use it.\n            channel.port2.postMessage(0);\n        };\n        requestTick = function () {\n            setTimeout(flush, 0);\n            requestPortTick();\n        };\n\n    } else {\n        // old browsers\n        requestTick = function () {\n            setTimeout(flush, 0);\n        };\n    }\n    // runs a task after all other tasks have been run\n    // this is useful for unhandled rejection tracking that needs to happen\n    // after all `then`d tasks have been run.\n    nextTick.runAfter = function (task) {\n        laterQueue.push(task);\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n    return nextTick;\n})();\n\n// Attempt to make generics safe in the face of downstream\n// modifications.\n// There is no situation where this is necessary.\n// If you need a security guarantee, these primordials need to be\n// deeply frozen anyway, and if you don’t need a security guarantee,\n// this is just plain paranoid.\n// However, this **might** have the nice side-effect of reducing the size of\n// the minified code by reducing x.call() to merely x()\n// See Mark Miller’s explanation of what this does.\n// http://wiki.ecmascript.org/doku.php?id=conventions:safe_meta_programming\nvar call = Function.call;\nfunction uncurryThis(f) {\n    return function () {\n        return call.apply(f, arguments);\n    };\n}\n// This is equivalent, but slower:\n// uncurryThis = Function_bind.bind(Function_bind.call);\n// http://jsperf.com/uncurrythis\n\nvar array_slice = uncurryThis(Array.prototype.slice);\n\nvar array_reduce = uncurryThis(\n    Array.prototype.reduce || function (callback, basis) {\n        var index = 0,\n            length = this.length;\n        // concerning the initial value, if one is not provided\n        if (arguments.length === 1) {\n            // seek to the first value in the array, accounting\n            // for the possibility that is is a sparse array\n            do {\n                if (index in this) {\n                    basis = this[index++];\n                    break;\n                }\n                if (++index >= length) {\n                    throw new TypeError();\n                }\n            } while (1);\n        }\n        // reduce\n        for (; index < length; index++) {\n            // account for the possibility that the array is sparse\n            if (index in this) {\n                basis = callback(basis, this[index], index);\n            }\n        }\n        return basis;\n    }\n);\n\nvar array_indexOf = uncurryThis(\n    Array.prototype.indexOf || function (value) {\n        // not a very good shim, but good enough for our one use of it\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    }\n);\n\nvar array_map = uncurryThis(\n    Array.prototype.map || function (callback, thisp) {\n        var self = this;\n        var collect = [];\n        array_reduce(self, function (undefined, value, index) {\n            collect.push(callback.call(thisp, value, index, self));\n        }, void 0);\n        return collect;\n    }\n);\n\nvar object_create = Object.create || function (prototype) {\n    function Type() { }\n    Type.prototype = prototype;\n    return new Type();\n};\n\nvar object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n\nvar object_keys = Object.keys || function (object) {\n    var keys = [];\n    for (var key in object) {\n        if (object_hasOwnProperty(object, key)) {\n            keys.push(key);\n        }\n    }\n    return keys;\n};\n\nvar object_toString = uncurryThis(Object.prototype.toString);\n\nfunction isObject(value) {\n    return value === Object(value);\n}\n\n// generator related shims\n\n// FIXME: Remove this function once ES6 generators are in SpiderMonkey.\nfunction isStopIteration(exception) {\n    return (\n        object_toString(exception) === \"[object StopIteration]\" ||\n        exception instanceof QReturnValue\n    );\n}\n\n// FIXME: Remove this helper and Q.return once ES6 generators are in\n// SpiderMonkey.\nvar QReturnValue;\nif (typeof ReturnValue !== \"undefined\") {\n    QReturnValue = ReturnValue;\n} else {\n    QReturnValue = function (value) {\n        this.value = value;\n    };\n}\n\n// long stack traces\n\nvar STACK_JUMP_SEPARATOR = \"From previous event:\";\n\nfunction makeStackTraceLong(error, promise) {\n    // If possible, transform the error stack trace by removing Node and Q\n    // cruft, then concatenating with the stack trace of `promise`. See #57.\n    if (hasStacks &&\n        promise.stack &&\n        typeof error === \"object\" &&\n        error !== null &&\n        error.stack &&\n        error.stack.indexOf(STACK_JUMP_SEPARATOR) === -1\n    ) {\n        var stacks = [];\n        for (var p = promise; !!p; p = p.source) {\n            if (p.stack) {\n                stacks.unshift(p.stack);\n            }\n        }\n        stacks.unshift(error.stack);\n\n        var concatedStacks = stacks.join(\"\\n\" + STACK_JUMP_SEPARATOR + \"\\n\");\n        error.stack = filterStackString(concatedStacks);\n    }\n}\n\nfunction filterStackString(stackString) {\n    var lines = stackString.split(\"\\n\");\n    var desiredLines = [];\n    for (var i = 0; i < lines.length; ++i) {\n        var line = lines[i];\n\n        if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\n            desiredLines.push(line);\n        }\n    }\n    return desiredLines.join(\"\\n\");\n}\n\nfunction isNodeFrame(stackLine) {\n    return stackLine.indexOf(\"(module.js:\") !== -1 ||\n           stackLine.indexOf(\"(node.js:\") !== -1;\n}\n\nfunction getFileNameAndLineNumber(stackLine) {\n    // Named functions: \"at functionName (filename:lineNumber:columnNumber)\"\n    // In IE10 function name can have spaces (\"Anonymous function\") O_o\n    var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n    if (attempt1) {\n        return [attempt1[1], Number(attempt1[2])];\n    }\n\n    // Anonymous functions: \"at filename:lineNumber:columnNumber\"\n    var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n    if (attempt2) {\n        return [attempt2[1], Number(attempt2[2])];\n    }\n\n    // Firefox style: \"function@filename:lineNumber or @filename:lineNumber\"\n    var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n    if (attempt3) {\n        return [attempt3[1], Number(attempt3[2])];\n    }\n}\n\nfunction isInternalFrame(stackLine) {\n    var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n\n    if (!fileNameAndLineNumber) {\n        return false;\n    }\n\n    var fileName = fileNameAndLineNumber[0];\n    var lineNumber = fileNameAndLineNumber[1];\n\n    return fileName === qFileName &&\n        lineNumber >= qStartingLine &&\n        lineNumber <= qEndingLine;\n}\n\n// discover own file name and line number range for filtering stack\n// traces\nfunction captureLine() {\n    if (!hasStacks) {\n        return;\n    }\n\n    try {\n        throw new Error();\n    } catch (e) {\n        var lines = e.stack.split(\"\\n\");\n        var firstLine = lines[0].indexOf(\"@\") > 0 ? lines[1] : lines[2];\n        var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n        if (!fileNameAndLineNumber) {\n            return;\n        }\n\n        qFileName = fileNameAndLineNumber[0];\n        return fileNameAndLineNumber[1];\n    }\n}\n\nfunction deprecate(callback, name, alternative) {\n    return function () {\n        if (typeof console !== \"undefined\" &&\n            typeof console.warn === \"function\") {\n            console.warn(name + \" is deprecated, use \" + alternative +\n                         \" instead.\", new Error(\"\").stack);\n        }\n        return callback.apply(callback, arguments);\n    };\n}\n\n// end of shims\n// beginning of real work\n\n/**\n * Constructs a promise for an immediate reference, passes promises through, or\n * coerces promises from different systems.\n * @param value immediate reference or promise\n */\nfunction Q(value) {\n    // If the object is already a Promise, return it directly.  This enables\n    // the resolve function to both be used to created references from objects,\n    // but to tolerably coerce non-promises to promises.\n    if (value instanceof Promise) {\n        return value;\n    }\n\n    // assimilate thenables\n    if (isPromiseAlike(value)) {\n        return coerce(value);\n    } else {\n        return fulfill(value);\n    }\n}\nQ.resolve = Q;\n\n/**\n * Performs a task in a future turn of the event loop.\n * @param {Function} task\n */\nQ.nextTick = nextTick;\n\n/**\n * Controls whether or not long stack traces will be on\n */\nQ.longStackSupport = false;\n\n// enable long stacks if Q_DEBUG is set\nif (typeof process === \"object\" && process && process.env && process.env.Q_DEBUG) {\n    Q.longStackSupport = true;\n}\n\n/**\n * Constructs a {promise, resolve, reject} object.\n *\n * `resolve` is a callback to invoke with a more resolved value for the\n * promise. To fulfill the promise, invoke `resolve` with any value that is\n * not a thenable. To reject the promise, invoke `resolve` with a rejected\n * thenable, or invoke `reject` with the reason directly. To resolve the\n * promise to another thenable, thus putting it in the same state, invoke\n * `resolve` with that other thenable.\n */\nQ.defer = defer;\nfunction defer() {\n    // if \"messages\" is an \"Array\", that indicates that the promise has not yet\n    // been resolved.  If it is \"undefined\", it has been resolved.  Each\n    // element of the messages array is itself an array of complete arguments to\n    // forward to the resolved promise.  We coerce the resolution value to a\n    // promise using the `resolve` function because it handles both fully\n    // non-thenable values and other thenables gracefully.\n    var messages = [], progressListeners = [], resolvedPromise;\n\n    var deferred = object_create(defer.prototype);\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, operands) {\n        var args = array_slice(arguments);\n        if (messages) {\n            messages.push(args);\n            if (op === \"when\" && operands[1]) { // progress operand\n                progressListeners.push(operands[1]);\n            }\n        } else {\n            Q.nextTick(function () {\n                resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\n            });\n        }\n    };\n\n    // XXX deprecated\n    promise.valueOf = function () {\n        if (messages) {\n            return promise;\n        }\n        var nearerValue = nearer(resolvedPromise);\n        if (isPromise(nearerValue)) {\n            resolvedPromise = nearerValue; // shorten chain\n        }\n        return nearerValue;\n    };\n\n    promise.inspect = function () {\n        if (!resolvedPromise) {\n            return { state: \"pending\" };\n        }\n        return resolvedPromise.inspect();\n    };\n\n    if (Q.longStackSupport && hasStacks) {\n        try {\n            throw new Error();\n        } catch (e) {\n            // NOTE: don't try to use `Error.captureStackTrace` or transfer the\n            // accessor around; that causes memory leaks as per GH-111. Just\n            // reify the stack trace as a string ASAP.\n            //\n            // At the same time, cut off the first line; it's always just\n            // \"[object Promise]\\n\", as per the `toString`.\n            promise.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\n        }\n    }\n\n    // NOTE: we do the checks for `resolvedPromise` in each method, instead of\n    // consolidating them into `become`, since otherwise we'd create new\n    // promises with the lines `become(whatever(value))`. See e.g. GH-252.\n\n    function become(newPromise) {\n        resolvedPromise = newPromise;\n        promise.source = newPromise;\n\n        array_reduce(messages, function (undefined, message) {\n            Q.nextTick(function () {\n                newPromise.promiseDispatch.apply(newPromise, message);\n            });\n        }, void 0);\n\n        messages = void 0;\n        progressListeners = void 0;\n    }\n\n    deferred.promise = promise;\n    deferred.resolve = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(Q(value));\n    };\n\n    deferred.fulfill = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(fulfill(value));\n    };\n    deferred.reject = function (reason) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(reject(reason));\n    };\n    deferred.notify = function (progress) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        array_reduce(progressListeners, function (undefined, progressListener) {\n            Q.nextTick(function () {\n                progressListener(progress);\n            });\n        }, void 0);\n    };\n\n    return deferred;\n}\n\n/**\n * Creates a Node-style callback that will resolve or reject the deferred\n * promise.\n * @returns a nodeback\n */\ndefer.prototype.makeNodeResolver = function () {\n    var self = this;\n    return function (error, value) {\n        if (error) {\n            self.reject(error);\n        } else if (arguments.length > 2) {\n            self.resolve(array_slice(arguments, 1));\n        } else {\n            self.resolve(value);\n        }\n    };\n};\n\n/**\n * @param resolver {Function} a function that returns nothing and accepts\n * the resolve, reject, and notify functions for a deferred.\n * @returns a promise that may be resolved with the given resolve and reject\n * functions, or rejected by a thrown exception in resolver\n */\nQ.Promise = promise; // ES6\nQ.promise = promise;\nfunction promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"resolver must be a function.\");\n    }\n    var deferred = defer();\n    try {\n        resolver(deferred.resolve, deferred.reject, deferred.notify);\n    } catch (reason) {\n        deferred.reject(reason);\n    }\n    return deferred.promise;\n}\n\npromise.race = race; // ES6\npromise.all = all; // ES6\npromise.reject = reject; // ES6\npromise.resolve = Q; // ES6\n\n// XXX experimental.  This method is a way to denote that a local value is\n// serializable and should be immediately dispatched to a remote upon request,\n// instead of passing a reference.\nQ.passByCopy = function (object) {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return object;\n};\n\nPromise.prototype.passByCopy = function () {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return this;\n};\n\n/**\n * If two promises eventually fulfill to the same value, promises that value,\n * but otherwise rejects.\n * @param x {Any*}\n * @param y {Any*}\n * @returns {Any*} a promise for x and y if they are the same, but a rejection\n * otherwise.\n *\n */\nQ.join = function (x, y) {\n    return Q(x).join(y);\n};\n\nPromise.prototype.join = function (that) {\n    return Q([this, that]).spread(function (x, y) {\n        if (x === y) {\n            // TODO: \"===\" should be Object.is or equiv\n            return x;\n        } else {\n            throw new Error(\"Can't join: not the same: \" + x + \" \" + y);\n        }\n    });\n};\n\n/**\n * Returns a promise for the first of an array of promises to become settled.\n * @param answers {Array[Any*]} promises to race\n * @returns {Any*} the first promise to be settled\n */\nQ.race = race;\nfunction race(answerPs) {\n    return promise(function (resolve, reject) {\n        // Switch to this once we can assume at least ES5\n        // answerPs.forEach(function (answerP) {\n        //     Q(answerP).then(resolve, reject);\n        // });\n        // Use this in the meantime\n        for (var i = 0, len = answerPs.length; i < len; i++) {\n            Q(answerPs[i]).then(resolve, reject);\n        }\n    });\n}\n\nPromise.prototype.race = function () {\n    return this.then(Q.race);\n};\n\n/**\n * Constructs a Promise with a promise descriptor object and optional fallback\n * function.  The descriptor contains methods like when(rejected), get(name),\n * set(name, value), post(name, args), and delete(name), which all\n * return either a value, a promise for a value, or a rejection.  The fallback\n * accepts the operation name, a resolver, and any further arguments that would\n * have been forwarded to the appropriate method above had a method been\n * provided with the proper name.  The API makes no guarantees about the nature\n * of the returned object, apart from that it is usable whereever promises are\n * bought and sold.\n */\nQ.makePromise = Promise;\nfunction Promise(descriptor, fallback, inspect) {\n    if (fallback === void 0) {\n        fallback = function (op) {\n            return reject(new Error(\n                \"Promise does not support operation: \" + op\n            ));\n        };\n    }\n    if (inspect === void 0) {\n        inspect = function () {\n            return {state: \"unknown\"};\n        };\n    }\n\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, args) {\n        var result;\n        try {\n            if (descriptor[op]) {\n                result = descriptor[op].apply(promise, args);\n            } else {\n                result = fallback.call(promise, op, args);\n            }\n        } catch (exception) {\n            result = reject(exception);\n        }\n        if (resolve) {\n            resolve(result);\n        }\n    };\n\n    promise.inspect = inspect;\n\n    // XXX deprecated `valueOf` and `exception` support\n    if (inspect) {\n        var inspected = inspect();\n        if (inspected.state === \"rejected\") {\n            promise.exception = inspected.reason;\n        }\n\n        promise.valueOf = function () {\n            var inspected = inspect();\n            if (inspected.state === \"pending\" ||\n                inspected.state === \"rejected\") {\n                return promise;\n            }\n            return inspected.value;\n        };\n    }\n\n    return promise;\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.then = function (fulfilled, rejected, progressed) {\n    var self = this;\n    var deferred = defer();\n    var done = false;   // ensure the untrusted promise makes at most a\n                        // single call to one of the callbacks\n\n    function _fulfilled(value) {\n        try {\n            return typeof fulfilled === \"function\" ? fulfilled(value) : value;\n        } catch (exception) {\n            return reject(exception);\n        }\n    }\n\n    function _rejected(exception) {\n        if (typeof rejected === \"function\") {\n            makeStackTraceLong(exception, self);\n            try {\n                return rejected(exception);\n            } catch (newException) {\n                return reject(newException);\n            }\n        }\n        return reject(exception);\n    }\n\n    function _progressed(value) {\n        return typeof progressed === \"function\" ? progressed(value) : value;\n    }\n\n    Q.nextTick(function () {\n        self.promiseDispatch(function (value) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_fulfilled(value));\n        }, \"when\", [function (exception) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_rejected(exception));\n        }]);\n    });\n\n    // Progress propagator need to be attached in the current tick.\n    self.promiseDispatch(void 0, \"when\", [void 0, function (value) {\n        var newValue;\n        var threw = false;\n        try {\n            newValue = _progressed(value);\n        } catch (e) {\n            threw = true;\n            if (Q.onerror) {\n                Q.onerror(e);\n            } else {\n                throw e;\n            }\n        }\n\n        if (!threw) {\n            deferred.notify(newValue);\n        }\n    }]);\n\n    return deferred.promise;\n};\n\nQ.tap = function (promise, callback) {\n    return Q(promise).tap(callback);\n};\n\n/**\n * Works almost like \"finally\", but not called for rejections.\n * Original resolution value is passed through callback unaffected.\n * Callback may return a promise that will be awaited for.\n * @param {Function} callback\n * @returns {Q.Promise}\n * @example\n * doSomething()\n *   .then(...)\n *   .tap(console.log)\n *   .then(...);\n */\nPromise.prototype.tap = function (callback) {\n    callback = Q(callback);\n\n    return this.then(function (value) {\n        return callback.fcall(value).thenResolve(value);\n    });\n};\n\n/**\n * Registers an observer on a promise.\n *\n * Guarantees:\n *\n * 1. that fulfilled and rejected will be called only once.\n * 2. that either the fulfilled callback or the rejected callback will be\n *    called, but not both.\n * 3. that fulfilled and rejected will not be called in this turn.\n *\n * @param value      promise or immediate reference to observe\n * @param fulfilled  function to be called with the fulfilled value\n * @param rejected   function to be called with the rejection exception\n * @param progressed function to be called on any progress notifications\n * @return promise for the return value from the invoked callback\n */\nQ.when = when;\nfunction when(value, fulfilled, rejected, progressed) {\n    return Q(value).then(fulfilled, rejected, progressed);\n}\n\nPromise.prototype.thenResolve = function (value) {\n    return this.then(function () { return value; });\n};\n\nQ.thenResolve = function (promise, value) {\n    return Q(promise).thenResolve(value);\n};\n\nPromise.prototype.thenReject = function (reason) {\n    return this.then(function () { throw reason; });\n};\n\nQ.thenReject = function (promise, reason) {\n    return Q(promise).thenReject(reason);\n};\n\n/**\n * If an object is not a promise, it is as \"near\" as possible.\n * If a promise is rejected, it is as \"near\" as possible too.\n * If it’s a fulfilled promise, the fulfillment value is nearer.\n * If it’s a deferred promise and the deferred has been resolved, the\n * resolution is \"nearer\".\n * @param object\n * @returns most resolved (nearest) form of the object\n */\n\n// XXX should we re-do this?\nQ.nearer = nearer;\nfunction nearer(value) {\n    if (isPromise(value)) {\n        var inspected = value.inspect();\n        if (inspected.state === \"fulfilled\") {\n            return inspected.value;\n        }\n    }\n    return value;\n}\n\n/**\n * @returns whether the given object is a promise.\n * Otherwise it is a fulfilled value.\n */\nQ.isPromise = isPromise;\nfunction isPromise(object) {\n    return object instanceof Promise;\n}\n\nQ.isPromiseAlike = isPromiseAlike;\nfunction isPromiseAlike(object) {\n    return isObject(object) && typeof object.then === \"function\";\n}\n\n/**\n * @returns whether the given object is a pending promise, meaning not\n * fulfilled or rejected.\n */\nQ.isPending = isPending;\nfunction isPending(object) {\n    return isPromise(object) && object.inspect().state === \"pending\";\n}\n\nPromise.prototype.isPending = function () {\n    return this.inspect().state === \"pending\";\n};\n\n/**\n * @returns whether the given object is a value or fulfilled\n * promise.\n */\nQ.isFulfilled = isFulfilled;\nfunction isFulfilled(object) {\n    return !isPromise(object) || object.inspect().state === \"fulfilled\";\n}\n\nPromise.prototype.isFulfilled = function () {\n    return this.inspect().state === \"fulfilled\";\n};\n\n/**\n * @returns whether the given object is a rejected promise.\n */\nQ.isRejected = isRejected;\nfunction isRejected(object) {\n    return isPromise(object) && object.inspect().state === \"rejected\";\n}\n\nPromise.prototype.isRejected = function () {\n    return this.inspect().state === \"rejected\";\n};\n\n//// BEGIN UNHANDLED REJECTION TRACKING\n\n// This promise library consumes exceptions thrown in handlers so they can be\n// handled by a subsequent promise.  The exceptions get added to this array when\n// they are created, and removed when they are handled.  Note that in ES6 or\n// shimmed environments, this would naturally be a `Set`.\nvar unhandledReasons = [];\nvar unhandledRejections = [];\nvar reportedUnhandledRejections = [];\nvar trackUnhandledRejections = true;\n\nfunction resetUnhandledRejections() {\n    unhandledReasons.length = 0;\n    unhandledRejections.length = 0;\n\n    if (!trackUnhandledRejections) {\n        trackUnhandledRejections = true;\n    }\n}\n\nfunction trackRejection(promise, reason) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n    if (typeof process === \"object\" && typeof process.emit === \"function\") {\n        Q.nextTick.runAfter(function () {\n            if (array_indexOf(unhandledRejections, promise) !== -1) {\n                process.emit(\"unhandledRejection\", reason, promise);\n                reportedUnhandledRejections.push(promise);\n            }\n        });\n    }\n\n    unhandledRejections.push(promise);\n    if (reason && typeof reason.stack !== \"undefined\") {\n        unhandledReasons.push(reason.stack);\n    } else {\n        unhandledReasons.push(\"(no stack) \" + reason);\n    }\n}\n\nfunction untrackRejection(promise) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    var at = array_indexOf(unhandledRejections, promise);\n    if (at !== -1) {\n        if (typeof process === \"object\" && typeof process.emit === \"function\") {\n            Q.nextTick.runAfter(function () {\n                var atReport = array_indexOf(reportedUnhandledRejections, promise);\n                if (atReport !== -1) {\n                    process.emit(\"rejectionHandled\", unhandledReasons[at], promise);\n                    reportedUnhandledRejections.splice(atReport, 1);\n                }\n            });\n        }\n        unhandledRejections.splice(at, 1);\n        unhandledReasons.splice(at, 1);\n    }\n}\n\nQ.resetUnhandledRejections = resetUnhandledRejections;\n\nQ.getUnhandledReasons = function () {\n    // Make a copy so that consumers can't interfere with our internal state.\n    return unhandledReasons.slice();\n};\n\nQ.stopUnhandledRejectionTracking = function () {\n    resetUnhandledRejections();\n    trackUnhandledRejections = false;\n};\n\nresetUnhandledRejections();\n\n//// END UNHANDLED REJECTION TRACKING\n\n/**\n * Constructs a rejected promise.\n * @param reason value describing the failure\n */\nQ.reject = reject;\nfunction reject(reason) {\n    var rejection = Promise({\n        \"when\": function (rejected) {\n            // note that the error has been handled\n            if (rejected) {\n                untrackRejection(this);\n            }\n            return rejected ? rejected(reason) : this;\n        }\n    }, function fallback() {\n        return this;\n    }, function inspect() {\n        return { state: \"rejected\", reason: reason };\n    });\n\n    // Note that the reason has not been handled.\n    trackRejection(rejection, reason);\n\n    return rejection;\n}\n\n/**\n * Constructs a fulfilled promise for an immediate reference.\n * @param value immediate reference\n */\nQ.fulfill = fulfill;\nfunction fulfill(value) {\n    return Promise({\n        \"when\": function () {\n            return value;\n        },\n        \"get\": function (name) {\n            return value[name];\n        },\n        \"set\": function (name, rhs) {\n            value[name] = rhs;\n        },\n        \"delete\": function (name) {\n            delete value[name];\n        },\n        \"post\": function (name, args) {\n            // Mark Miller proposes that post with no name should apply a\n            // promised function.\n            if (name === null || name === void 0) {\n                return value.apply(void 0, args);\n            } else {\n                return value[name].apply(value, args);\n            }\n        },\n        \"apply\": function (thisp, args) {\n            return value.apply(thisp, args);\n        },\n        \"keys\": function () {\n            return object_keys(value);\n        }\n    }, void 0, function inspect() {\n        return { state: \"fulfilled\", value: value };\n    });\n}\n\n/**\n * Converts thenables to Q promises.\n * @param promise thenable promise\n * @returns a Q promise\n */\nfunction coerce(promise) {\n    var deferred = defer();\n    Q.nextTick(function () {\n        try {\n            promise.then(deferred.resolve, deferred.reject, deferred.notify);\n        } catch (exception) {\n            deferred.reject(exception);\n        }\n    });\n    return deferred.promise;\n}\n\n/**\n * Annotates an object such that it will never be\n * transferred away from this process over any promise\n * communication channel.\n * @param object\n * @returns promise a wrapping of that object that\n * additionally responds to the \"isDef\" message\n * without a rejection.\n */\nQ.master = master;\nfunction master(object) {\n    return Promise({\n        \"isDef\": function () {}\n    }, function fallback(op, args) {\n        return dispatch(object, op, args);\n    }, function () {\n        return Q(object).inspect();\n    });\n}\n\n/**\n * Spreads the values of a promised array of arguments into the\n * fulfillment callback.\n * @param fulfilled callback that receives variadic arguments from the\n * promised array\n * @param rejected callback that receives the exception if the promise\n * is rejected.\n * @returns a promise for the return value or thrown exception of\n * either callback.\n */\nQ.spread = spread;\nfunction spread(value, fulfilled, rejected) {\n    return Q(value).spread(fulfilled, rejected);\n}\n\nPromise.prototype.spread = function (fulfilled, rejected) {\n    return this.all().then(function (array) {\n        return fulfilled.apply(void 0, array);\n    }, rejected);\n};\n\n/**\n * The async function is a decorator for generator functions, turning\n * them into asynchronous generators.  Although generators are only part\n * of the newest ECMAScript 6 drafts, this code does not cause syntax\n * errors in older engines.  This code should continue to work and will\n * in fact improve over time as the language improves.\n *\n * ES6 generators are currently part of V8 version 3.19 with the\n * --harmony-generators runtime flag enabled.  SpiderMonkey has had them\n * for longer, but under an older Python-inspired form.  This function\n * works on both kinds of generators.\n *\n * Decorates a generator function such that:\n *  - it may yield promises\n *  - execution will continue when that promise is fulfilled\n *  - the value of the yield expression will be the fulfilled value\n *  - it returns a promise for the return value (when the generator\n *    stops iterating)\n *  - the decorated function returns a promise for the return value\n *    of the generator or the first rejected promise among those\n *    yielded.\n *  - if an error is thrown in the generator, it propagates through\n *    every following yield until it is caught, or until it escapes\n *    the generator function altogether, and is translated into a\n *    rejection for the promise returned by the decorated generator.\n */\nQ.async = async;\nfunction async(makeGenerator) {\n    return function () {\n        // when verb is \"send\", arg is a value\n        // when verb is \"throw\", arg is an exception\n        function continuer(verb, arg) {\n            var result;\n\n            // Until V8 3.19 / Chromium 29 is released, SpiderMonkey is the only\n            // engine that has a deployed base of browsers that support generators.\n            // However, SM's generators use the Python-inspired semantics of\n            // outdated ES6 drafts.  We would like to support ES6, but we'd also\n            // like to make it possible to use generators in deployed browsers, so\n            // we also support Python-style generators.  At some point we can remove\n            // this block.\n\n            if (typeof StopIteration === \"undefined\") {\n                // ES6 Generators\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    return reject(exception);\n                }\n                if (result.done) {\n                    return Q(result.value);\n                } else {\n                    return when(result.value, callback, errback);\n                }\n            } else {\n                // SpiderMonkey Generators\n                // FIXME: Remove this case when SM does ES6 generators.\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    if (isStopIteration(exception)) {\n                        return Q(exception.value);\n                    } else {\n                        return reject(exception);\n                    }\n                }\n                return when(result, callback, errback);\n            }\n        }\n        var generator = makeGenerator.apply(this, arguments);\n        var callback = continuer.bind(continuer, \"next\");\n        var errback = continuer.bind(continuer, \"throw\");\n        return callback();\n    };\n}\n\n/**\n * The spawn function is a small wrapper around async that immediately\n * calls the generator and also ends the promise chain, so that any\n * unhandled errors are thrown instead of forwarded to the error\n * handler. This is useful because it's extremely common to run\n * generators at the top-level to work with libraries.\n */\nQ.spawn = spawn;\nfunction spawn(makeGenerator) {\n    Q.done(Q.async(makeGenerator)());\n}\n\n// FIXME: Remove this interface once ES6 generators are in SpiderMonkey.\n/**\n * Throws a ReturnValue exception to stop an asynchronous generator.\n *\n * This interface is a stop-gap measure to support generator return\n * values in older Firefox/SpiderMonkey.  In browsers that support ES6\n * generators like Chromium 29, just use \"return\" in your generator\n * functions.\n *\n * @param value the return value for the surrounding generator\n * @throws ReturnValue exception with the value.\n * @example\n * // ES6 style\n * Q.async(function* () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      return foo + bar;\n * })\n * // Older SpiderMonkey style\n * Q.async(function () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      Q.return(foo + bar);\n * })\n */\nQ[\"return\"] = _return;\nfunction _return(value) {\n    throw new QReturnValue(value);\n}\n\n/**\n * The promised function decorator ensures that any promise arguments\n * are settled and passed as values (`this` is also settled and passed\n * as a value).  It will also ensure that the result of a function is\n * always a promise.\n *\n * @example\n * var add = Q.promised(function (a, b) {\n *     return a + b;\n * });\n * add(Q(a), Q(B));\n *\n * @param {function} callback The function to decorate\n * @returns {function} a function that has been decorated.\n */\nQ.promised = promised;\nfunction promised(callback) {\n    return function () {\n        return spread([this, all(arguments)], function (self, args) {\n            return callback.apply(self, args);\n        });\n    };\n}\n\n/**\n * sends a message to a value in a future turn\n * @param object* the recipient\n * @param op the name of the message operation, e.g., \"when\",\n * @param args further arguments to be forwarded to the operation\n * @returns result {Promise} a promise for the result of the operation\n */\nQ.dispatch = dispatch;\nfunction dispatch(object, op, args) {\n    return Q(object).dispatch(op, args);\n}\n\nPromise.prototype.dispatch = function (op, args) {\n    var self = this;\n    var deferred = defer();\n    Q.nextTick(function () {\n        self.promiseDispatch(deferred.resolve, op, args);\n    });\n    return deferred.promise;\n};\n\n/**\n * Gets the value of a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to get\n * @return promise for the property value\n */\nQ.get = function (object, key) {\n    return Q(object).dispatch(\"get\", [key]);\n};\n\nPromise.prototype.get = function (key) {\n    return this.dispatch(\"get\", [key]);\n};\n\n/**\n * Sets the value of a property in a future turn.\n * @param object    promise or immediate reference for object object\n * @param name      name of property to set\n * @param value     new value of property\n * @return promise for the return value\n */\nQ.set = function (object, key, value) {\n    return Q(object).dispatch(\"set\", [key, value]);\n};\n\nPromise.prototype.set = function (key, value) {\n    return this.dispatch(\"set\", [key, value]);\n};\n\n/**\n * Deletes a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to delete\n * @return promise for the return value\n */\nQ.del = // XXX legacy\nQ[\"delete\"] = function (object, key) {\n    return Q(object).dispatch(\"delete\", [key]);\n};\n\nPromise.prototype.del = // XXX legacy\nPromise.prototype[\"delete\"] = function (key) {\n    return this.dispatch(\"delete\", [key]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param value     a value to post, typically an array of\n *                  invocation arguments for promises that\n *                  are ultimately backed with `resolve` values,\n *                  as opposed to those backed with URLs\n *                  wherein the posted value can be any\n *                  JSON serializable object.\n * @return promise for the return value\n */\n// bound locally because it is used by other methods\nQ.mapply = // XXX As proposed by \"Redsandro\"\nQ.post = function (object, name, args) {\n    return Q(object).dispatch(\"post\", [name, args]);\n};\n\nPromise.prototype.mapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.post = function (name, args) {\n    return this.dispatch(\"post\", [name, args]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param ...args   array of invocation arguments\n * @return promise for the return value\n */\nQ.send = // XXX Mark Miller's proposed parlance\nQ.mcall = // XXX As proposed by \"Redsandro\"\nQ.invoke = function (object, name /*...args*/) {\n    return Q(object).dispatch(\"post\", [name, array_slice(arguments, 2)]);\n};\n\nPromise.prototype.send = // XXX Mark Miller's proposed parlance\nPromise.prototype.mcall = // XXX As proposed by \"Redsandro\"\nPromise.prototype.invoke = function (name /*...args*/) {\n    return this.dispatch(\"post\", [name, array_slice(arguments, 1)]);\n};\n\n/**\n * Applies the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param args      array of application arguments\n */\nQ.fapply = function (object, args) {\n    return Q(object).dispatch(\"apply\", [void 0, args]);\n};\n\nPromise.prototype.fapply = function (args) {\n    return this.dispatch(\"apply\", [void 0, args]);\n};\n\n/**\n * Calls the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ[\"try\"] =\nQ.fcall = function (object /* ...args*/) {\n    return Q(object).dispatch(\"apply\", [void 0, array_slice(arguments, 1)]);\n};\n\nPromise.prototype.fcall = function (/*...args*/) {\n    return this.dispatch(\"apply\", [void 0, array_slice(arguments)]);\n};\n\n/**\n * Binds the promised function, transforming return values into a fulfilled\n * promise and thrown errors into a rejected one.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ.fbind = function (object /*...args*/) {\n    var promise = Q(object);\n    var args = array_slice(arguments, 1);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\nPromise.prototype.fbind = function (/*...args*/) {\n    var promise = this;\n    var args = array_slice(arguments);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\n\n/**\n * Requests the names of the owned properties of a promised\n * object in a future turn.\n * @param object    promise or immediate reference for target object\n * @return promise for the keys of the eventually settled object\n */\nQ.keys = function (object) {\n    return Q(object).dispatch(\"keys\", []);\n};\n\nPromise.prototype.keys = function () {\n    return this.dispatch(\"keys\", []);\n};\n\n/**\n * Turns an array of promises into a promise for an array.  If any of\n * the promises gets rejected, the whole array is rejected immediately.\n * @param {Array*} an array (or promise for an array) of values (or\n * promises for values)\n * @returns a promise for an array of the corresponding values\n */\n// By Mark Miller\n// http://wiki.ecmascript.org/doku.php?id=strawman:concurrency&rev=1308776521#allfulfilled\nQ.all = all;\nfunction all(promises) {\n    return when(promises, function (promises) {\n        var pendingCount = 0;\n        var deferred = defer();\n        array_reduce(promises, function (undefined, promise, index) {\n            var snapshot;\n            if (\n                isPromise(promise) &&\n                (snapshot = promise.inspect()).state === \"fulfilled\"\n            ) {\n                promises[index] = snapshot.value;\n            } else {\n                ++pendingCount;\n                when(\n                    promise,\n                    function (value) {\n                        promises[index] = value;\n                        if (--pendingCount === 0) {\n                            deferred.resolve(promises);\n                        }\n                    },\n                    deferred.reject,\n                    function (progress) {\n                        deferred.notify({ index: index, value: progress });\n                    }\n                );\n            }\n        }, void 0);\n        if (pendingCount === 0) {\n            deferred.resolve(promises);\n        }\n        return deferred.promise;\n    });\n}\n\nPromise.prototype.all = function () {\n    return all(this);\n};\n\n/**\n * Returns the first resolved promise of an array. Prior rejected promises are\n * ignored.  Rejects only if all promises are rejected.\n * @param {Array*} an array containing values or promises for values\n * @returns a promise fulfilled with the value of the first resolved promise,\n * or a rejected promise if all promises are rejected.\n */\nQ.any = any;\n\nfunction any(promises) {\n    if (promises.length === 0) {\n        return Q.resolve();\n    }\n\n    var deferred = Q.defer();\n    var pendingCount = 0;\n    array_reduce(promises, function (prev, current, index) {\n        var promise = promises[index];\n\n        pendingCount++;\n\n        when(promise, onFulfilled, onRejected, onProgress);\n        function onFulfilled(result) {\n            deferred.resolve(result);\n        }\n        function onRejected() {\n            pendingCount--;\n            if (pendingCount === 0) {\n                deferred.reject(new Error(\n                    \"Can't get fulfillment value from any promise, all \" +\n                    \"promises were rejected.\"\n                ));\n            }\n        }\n        function onProgress(progress) {\n            deferred.notify({\n                index: index,\n                value: progress\n            });\n        }\n    }, undefined);\n\n    return deferred.promise;\n}\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n/**\n * Waits for all promises to be settled, either fulfilled or\n * rejected.  This is distinct from `all` since that would stop\n * waiting at the first rejection.  The promise returned by\n * `allResolved` will never be rejected.\n * @param promises a promise for an array (or an array) of promises\n * (or values)\n * @return a promise for an array of promises\n */\nQ.allResolved = deprecate(allResolved, \"allResolved\", \"allSettled\");\nfunction allResolved(promises) {\n    return when(promises, function (promises) {\n        promises = array_map(promises, Q);\n        return when(all(array_map(promises, function (promise) {\n            return when(promise, noop, noop);\n        })), function () {\n            return promises;\n        });\n    });\n}\n\nPromise.prototype.allResolved = function () {\n    return allResolved(this);\n};\n\n/**\n * @see Promise#allSettled\n */\nQ.allSettled = allSettled;\nfunction allSettled(promises) {\n    return Q(promises).allSettled();\n}\n\n/**\n * Turns an array of promises into a promise for an array of their states (as\n * returned by `inspect`) when they have all settled.\n * @param {Array[Any*]} values an array (or promise for an array) of values (or\n * promises for values)\n * @returns {Array[State]} an array of states for the respective values.\n */\nPromise.prototype.allSettled = function () {\n    return this.then(function (promises) {\n        return all(array_map(promises, function (promise) {\n            promise = Q(promise);\n            function regardless() {\n                return promise.inspect();\n            }\n            return promise.then(regardless, regardless);\n        }));\n    });\n};\n\n/**\n * Captures the failure of a promise, giving an oportunity to recover\n * with a callback.  If the given promise is fulfilled, the returned\n * promise is fulfilled.\n * @param {Any*} promise for something\n * @param {Function} callback to fulfill the returned promise if the\n * given promise is rejected\n * @returns a promise for the return value of the callback\n */\nQ.fail = // XXX legacy\nQ[\"catch\"] = function (object, rejected) {\n    return Q(object).then(void 0, rejected);\n};\n\nPromise.prototype.fail = // XXX legacy\nPromise.prototype[\"catch\"] = function (rejected) {\n    return this.then(void 0, rejected);\n};\n\n/**\n * Attaches a listener that can respond to progress notifications from a\n * promise's originating deferred. This listener receives the exact arguments\n * passed to ``deferred.notify``.\n * @param {Any*} promise for something\n * @param {Function} callback to receive any progress notifications\n * @returns the given promise, unchanged\n */\nQ.progress = progress;\nfunction progress(object, progressed) {\n    return Q(object).then(void 0, void 0, progressed);\n}\n\nPromise.prototype.progress = function (progressed) {\n    return this.then(void 0, void 0, progressed);\n};\n\n/**\n * Provides an opportunity to observe the settling of a promise,\n * regardless of whether the promise is fulfilled or rejected.  Forwards\n * the resolution to the returned promise when the callback is done.\n * The callback can return a promise to defer completion.\n * @param {Any*} promise\n * @param {Function} callback to observe the resolution of the given\n * promise, takes no arguments.\n * @returns a promise for the resolution of the given promise when\n * ``fin`` is done.\n */\nQ.fin = // XXX legacy\nQ[\"finally\"] = function (object, callback) {\n    return Q(object)[\"finally\"](callback);\n};\n\nPromise.prototype.fin = // XXX legacy\nPromise.prototype[\"finally\"] = function (callback) {\n    callback = Q(callback);\n    return this.then(function (value) {\n        return callback.fcall().then(function () {\n            return value;\n        });\n    }, function (reason) {\n        // TODO attempt to recycle the rejection with \"this\".\n        return callback.fcall().then(function () {\n            throw reason;\n        });\n    });\n};\n\n/**\n * Terminates a chain of promises, forcing rejections to be\n * thrown as exceptions.\n * @param {Any*} promise at the end of a chain of promises\n * @returns nothing\n */\nQ.done = function (object, fulfilled, rejected, progress) {\n    return Q(object).done(fulfilled, rejected, progress);\n};\n\nPromise.prototype.done = function (fulfilled, rejected, progress) {\n    var onUnhandledError = function (error) {\n        // forward to a future turn so that ``when``\n        // does not catch it and turn it into a rejection.\n        Q.nextTick(function () {\n            makeStackTraceLong(error, promise);\n            if (Q.onerror) {\n                Q.onerror(error);\n            } else {\n                throw error;\n            }\n        });\n    };\n\n    // Avoid unnecessary `nextTick`ing via an unnecessary `when`.\n    var promise = fulfilled || rejected || progress ?\n        this.then(fulfilled, rejected, progress) :\n        this;\n\n    if (typeof process === \"object\" && process && process.domain) {\n        onUnhandledError = process.domain.bind(onUnhandledError);\n    }\n\n    promise.then(void 0, onUnhandledError);\n};\n\n/**\n * Causes a promise to be rejected if it does not get fulfilled before\n * some milliseconds time out.\n * @param {Any*} promise\n * @param {Number} milliseconds timeout\n * @param {Any*} custom error message or Error object (optional)\n * @returns a promise for the resolution of the given promise if it is\n * fulfilled before the timeout, otherwise rejected.\n */\nQ.timeout = function (object, ms, error) {\n    return Q(object).timeout(ms, error);\n};\n\nPromise.prototype.timeout = function (ms, error) {\n    var deferred = defer();\n    var timeoutId = setTimeout(function () {\n        if (!error || \"string\" === typeof error) {\n            error = new Error(error || \"Timed out after \" + ms + \" ms\");\n            error.code = \"ETIMEDOUT\";\n        }\n        deferred.reject(error);\n    }, ms);\n\n    this.then(function (value) {\n        clearTimeout(timeoutId);\n        deferred.resolve(value);\n    }, function (exception) {\n        clearTimeout(timeoutId);\n        deferred.reject(exception);\n    }, deferred.notify);\n\n    return deferred.promise;\n};\n\n/**\n * Returns a promise for the given value (or promised value), some\n * milliseconds after it resolved. Passes rejections immediately.\n * @param {Any*} promise\n * @param {Number} milliseconds\n * @returns a promise for the resolution of the given promise after milliseconds\n * time has elapsed since the resolution of the given promise.\n * If the given promise rejects, that is passed immediately.\n */\nQ.delay = function (object, timeout) {\n    if (timeout === void 0) {\n        timeout = object;\n        object = void 0;\n    }\n    return Q(object).delay(timeout);\n};\n\nPromise.prototype.delay = function (timeout) {\n    return this.then(function (value) {\n        var deferred = defer();\n        setTimeout(function () {\n            deferred.resolve(value);\n        }, timeout);\n        return deferred.promise;\n    });\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided as an array, and returns a promise.\n *\n *      Q.nfapply(FS.readFile, [__filename])\n *      .then(function (content) {\n *      })\n *\n */\nQ.nfapply = function (callback, args) {\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfapply = function (args) {\n    var deferred = defer();\n    var nodeArgs = array_slice(args);\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided individually, and returns a promise.\n * @example\n * Q.nfcall(FS.readFile, __filename)\n * .then(function (content) {\n * })\n *\n */\nQ.nfcall = function (callback /*...args*/) {\n    var args = array_slice(arguments, 1);\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfcall = function (/*...args*/) {\n    var nodeArgs = array_slice(arguments);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Wraps a NodeJS continuation passing function and returns an equivalent\n * version that returns a promise.\n * @example\n * Q.nfbind(FS.readFile, __filename)(\"utf-8\")\n * .then(console.log)\n * .done()\n */\nQ.nfbind =\nQ.denodeify = function (callback /*...args*/) {\n    var baseArgs = array_slice(arguments, 1);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(callback).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nfbind =\nPromise.prototype.denodeify = function (/*...args*/) {\n    var args = array_slice(arguments);\n    args.unshift(this);\n    return Q.denodeify.apply(void 0, args);\n};\n\nQ.nbind = function (callback, thisp /*...args*/) {\n    var baseArgs = array_slice(arguments, 2);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        function bound() {\n            return callback.apply(thisp, arguments);\n        }\n        Q(bound).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nbind = function (/*thisp, ...args*/) {\n    var args = array_slice(arguments, 0);\n    args.unshift(this);\n    return Q.nbind.apply(void 0, args);\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback with a given array of arguments, plus a provided callback.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param {Array} args arguments to pass to the method; the callback\n * will be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nmapply = // XXX As proposed by \"Redsandro\"\nQ.npost = function (object, name, args) {\n    return Q(object).npost(name, args);\n};\n\nPromise.prototype.nmapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.npost = function (name, args) {\n    var nodeArgs = array_slice(args || []);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback, forwarding the given variadic arguments, plus a provided\n * callback argument.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param ...args arguments to pass to the method; the callback will\n * be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nsend = // XXX Based on Mark Miller's proposed \"send\"\nQ.nmcall = // XXX Based on \"Redsandro's\" proposal\nQ.ninvoke = function (object, name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 2);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    Q(object).dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\nPromise.prototype.nsend = // XXX Based on Mark Miller's proposed \"send\"\nPromise.prototype.nmcall = // XXX Based on \"Redsandro's\" proposal\nPromise.prototype.ninvoke = function (name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 1);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * If a function would like to support both Node continuation-passing-style and\n * promise-returning-style, it can end its internal promise chain with\n * `nodeify(nodeback)`, forwarding the optional nodeback argument.  If the user\n * elects to use a nodeback, the result will be sent there.  If they do not\n * pass a nodeback, they will receive the result promise.\n * @param object a result (or a promise for a result)\n * @param {Function} nodeback a Node.js-style callback\n * @returns either the promise or nothing\n */\nQ.nodeify = nodeify;\nfunction nodeify(object, nodeback) {\n    return Q(object).nodeify(nodeback);\n}\n\nPromise.prototype.nodeify = function (nodeback) {\n    if (nodeback) {\n        this.then(function (value) {\n            Q.nextTick(function () {\n                nodeback(null, value);\n            });\n        }, function (error) {\n            Q.nextTick(function () {\n                nodeback(error);\n            });\n        });\n    } else {\n        return this;\n    }\n};\n\nQ.noConflict = function() {\n    throw new Error(\"Q.noConflict only works when Q is used as a global\");\n};\n\n// All code before this point will be filtered from stack traces.\nvar qEndingLine = captureLine();\n\nreturn Q;\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/q/q.js\n// module id = 5\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar AuthSdkError = require('./errors/AuthSdkError');\n\n// storage must have getItem and setItem\nfunction storageBuilder(webstorage, storageName) {\n  if (typeof storageName !== 'string' || !storageName.length) {\n    throw new AuthSdkError('\"storageName\" is required');\n  }\n\n  function getStorage() {\n    var storageString = webstorage.getItem(storageName);\n    storageString = storageString || '{}';\n    try {\n      return JSON.parse(storageString);\n    } catch(e) {\n      throw new AuthSdkError('Unable to parse storage string: ' + storageName);\n    }\n  }\n\n  function setStorage(storage) {\n    try {\n      var storageString = JSON.stringify(storage);\n      webstorage.setItem(storageName, storageString);\n    } catch(e) {\n      throw new AuthSdkError('Unable to set storage: ' + storageName);\n    }\n  }\n\n  function clearStorage(key) {\n    if (!key) {\n      setStorage({});\n    }\n    var storage = getStorage();\n    delete storage[key];\n    setStorage(storage);\n  }\n\n  function updateStorage(key, value) {\n    var storage = getStorage();\n    storage[key] = value;\n    setStorage(storage);\n  }\n\n  return {\n    getStorage: getStorage,\n    setStorage: setStorage,\n    clearStorage: clearStorage,\n    updateStorage: updateStorage\n  };\n}\n\nmodule.exports = storageBuilder;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/storageBuilder.js\n// module id = 6\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity, max-statements */\nvar http              = require('./http');\nvar util              = require('./util');\nvar Q                 = require('q');\nvar AuthSdkError      = require('./errors/AuthSdkError');\nvar AuthPollStopError = require('./errors/AuthPollStopError');\nvar constants         = require('./constants');\n\nfunction addStateToken(res, options) {\n  var builtArgs = {};\n  util.extend(builtArgs, options);\n\n  // Add the stateToken if one isn't passed and we have one\n  if (!builtArgs.stateToken && res.stateToken) {\n    builtArgs.stateToken = res.stateToken;\n  }\n\n  return builtArgs;\n}\n\nfunction getStateToken(res) {\n  return addStateToken(res);\n}\n\nfunction transactionStatus(sdk, args) {\n  args = addStateToken(sdk, args);\n  return http.post(sdk, sdk.options.url + '/api/v1/authn', args);\n}\n\nfunction resumeTransaction(sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Q.reject(new AuthSdkError('No transaction to resume'));\n    }\n  }\n  return sdk.tx.status(args)\n    .then(function(res) {\n      return new AuthTransaction(sdk, res);\n    });\n}\n\nfunction introspect (sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Q.reject(new AuthSdkError('No transaction to evaluate'));\n    }\n  }\n  return transactionStep(sdk, args)\n    .then(function (res) {\n      return new AuthTransaction(sdk, res);\n    });\n}\n\nfunction transactionStep(sdk, args) {\n  args = addStateToken(sdk, args);\n  // v1 pipeline introspect API\n  return http.post(sdk, sdk.options.url + '/api/v1/authn/introspect', args);\n}\n\nfunction transactionExists(sdk) {\n  // We have a cookie state token\n  return !!sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n}\n\nfunction postToTransaction(sdk, url, args, options) {\n  return http.post(sdk, url, args, options)\n    .then(function(res) {\n      return new AuthTransaction(sdk, res);\n    });\n}\n\nfunction getPollFn(sdk, res, ref) {\n  return function (options) {\n    var delay;\n    var rememberDevice;\n    var autoPush;\n    var transactionCallBack;\n\n    if (util.isNumber(options)) {\n      delay = options;\n    } else if (util.isObject(options)) {\n      delay = options.delay;\n      rememberDevice = options.rememberDevice;\n      autoPush = options.autoPush;\n      transactionCallBack = options.transactionCallBack;\n    }\n\n    if (!delay && delay !== 0) {\n      delay = constants.DEFAULT_POLLING_DELAY;\n    }\n\n    // Get the poll function\n    var pollLink = util.getLink(res, 'next', 'poll');\n    function pollFn() {\n      var opts = {};\n      if (typeof autoPush === 'function') {\n        try {\n          opts.autoPush = !!autoPush();\n        }\n        catch (e) {\n          return Q.reject(new AuthSdkError('AutoPush resulted in an error.'));\n        }\n      }\n      else if (autoPush !== undefined && autoPush !== null) {\n        opts.autoPush = !!autoPush;\n      }\n      if (typeof rememberDevice === 'function') {\n        try {\n          opts.rememberDevice = !!rememberDevice();\n        }\n        catch (e) {\n          return Q.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n        }\n      }\n      else if (rememberDevice !== undefined && rememberDevice !== null) {\n        opts.rememberDevice = !!rememberDevice;\n      }\n\n      var href = pollLink.href + util.toQueryParams(opts);\n      return http.post(sdk, href, getStateToken(res), {\n        saveAuthnState: false  \n      });\n    }\n\n    ref.isPolling = true;\n\n    var retryCount = 0;\n    var recursivePoll = function () {\n      // If the poll was manually stopped during the delay\n      if (!ref.isPolling) {\n        return Q.reject(new AuthPollStopError());\n      }\n      return pollFn()\n        .then(function (pollRes) {\n          // Reset our retry counter on success\n          retryCount = 0;\n\n          // If we're still waiting\n          if (pollRes.factorResult && pollRes.factorResult === 'WAITING') {\n\n            // If the poll was manually stopped while the pollFn was called\n            if (!ref.isPolling) {\n              throw new AuthPollStopError();\n            }\n\n            if (typeof transactionCallBack === 'function') {\n              transactionCallBack(pollRes);\n            }\n\n            // Continue poll\n            return Q.delay(delay)\n              .then(recursivePoll);\n\n          } else {\n            // Any non-waiting result, even if polling was stopped\n            // during a request, will return\n            ref.isPolling = false;\n            return new AuthTransaction(sdk, pollRes);\n          }\n        })\n        .fail(function(err) {\n          // Exponential backoff, up to 16 seconds\n          if (err.xhr &&\n              (err.xhr.status === 0 || err.xhr.status === 429) &&\n              retryCount <= 4) {\n            var delayLength = Math.pow(2, retryCount) * 1000;\n            retryCount++;\n            return Q.delay(delayLength)\n              .then(recursivePoll);\n          }\n          throw err;\n        });\n    };\n    return recursivePoll()\n      .fail(function(err) {\n        ref.isPolling = false;\n        throw err;\n      });\n  };\n}\n\nfunction link2fn(sdk, res, obj, link, ref) {\n  if (Array.isArray(link)) {\n    return function(name, opts) {\n      if (!name) {\n        throw new AuthSdkError('Must provide a link name');\n      }\n\n      var lk = util.find(link, {name: name});\n      if (!lk) {\n        throw new AuthSdkError('No link found for that name');\n      }\n\n      return link2fn(sdk, res, obj, lk, ref)(opts);\n    };\n\n  } else if (link.hints &&\n      link.hints.allow &&\n      link.hints.allow.length === 1) {\n    var method = link.hints.allow[0];\n    switch (method) {\n\n      case 'GET':\n        return function() {\n          return http.get(sdk, link.href);\n        };\n\n      case 'POST':\n        return function(opts) {\n          if (ref && ref.isPolling) {\n            ref.isPolling = false;\n          }\n\n          var data = addStateToken(res, opts);\n\n          if (res.status === 'MFA_ENROLL' || res.status === 'FACTOR_ENROLL') {\n            // Add factorType and provider\n            util.extend(data, {\n              factorType: obj.factorType,\n              provider: obj.provider\n            });\n          }\n\n          var params = {};\n          var autoPush = data.autoPush;\n          if (autoPush !== undefined) {\n            if (typeof autoPush === 'function') {\n              try {\n                params.autoPush = !!autoPush();\n              }\n              catch (e) {\n                return Q.reject(new AuthSdkError('AutoPush resulted in an error.'));\n              }\n            }\n            else if (autoPush !== null) {\n              params.autoPush = !!autoPush;\n            }\n            data = util.omit(data, 'autoPush');\n          }\n\n          var rememberDevice = data.rememberDevice;\n          if (rememberDevice !== undefined) {\n            if (typeof rememberDevice === 'function') {\n              try {\n                params.rememberDevice = !!rememberDevice();\n              }\n              catch (e) {\n                return Q.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n              }\n            }\n            else if (rememberDevice !== null) {\n              params.rememberDevice = !!rememberDevice;\n            }\n            data = util.omit(data, 'rememberDevice');\n\n          } else if (data.profile &&\n                    data.profile.updatePhone !== undefined) {\n            if (data.profile.updatePhone) {\n              params.updatePhone = true;\n            }\n            data.profile = util.omit(data.profile, 'updatePhone');\n          }\n          var href = link.href + util.toQueryParams(params);\n          return postToTransaction(sdk, href, data);\n        };\n    }\n  }\n}\n\nfunction links2fns(sdk, res, obj, ref) {\n  var fns = {};\n  for (var linkName in obj._links) {\n    if (!obj._links.hasOwnProperty(linkName)) {\n      continue;\n    }\n\n    var link = obj._links[linkName];\n    \n    if (linkName === 'next') {\n      linkName = link.name;\n    }\n\n    if (link.type) {\n      fns[linkName] = link;\n      continue;\n    }\n\n    switch (linkName) {\n      // poll is only found at the transaction\n      // level, so we don't need to pass the link\n      case 'poll':\n        fns.poll = getPollFn(sdk, res, ref);\n        break;\n\n      default:\n        var fn = link2fn(sdk, res, obj, link, ref);\n        if (fn) {\n          fns[linkName] = fn;\n        }\n    }\n  }\n  return fns;\n}\n\nfunction flattenEmbedded(sdk, res, obj, ref) {\n  obj = obj || res;\n  obj = util.clone(obj);\n\n  if (Array.isArray(obj)) {\n    var objArr = [];\n    for (var o = 0, ol = obj.length; o < ol; o++) {\n      objArr.push(flattenEmbedded(sdk, res, obj[o], ref));\n    }\n    return objArr;\n  }\n\n  var embedded = obj._embedded || {};\n\n  for (var key in embedded) {\n    if (!embedded.hasOwnProperty(key)) {\n      continue;\n    }\n\n    // Flatten any nested _embedded objects\n    if (util.isObject(embedded[key]) || Array.isArray(embedded[key])) {\n      embedded[key] = flattenEmbedded(sdk, res, embedded[key], ref);\n    }\n  }\n\n  // Convert any links on the embedded object\n  var fns = links2fns(sdk, res, obj, ref);\n  util.extend(embedded, fns);\n\n  obj = util.omit(obj, '_embedded', '_links');\n  util.extend(obj, embedded);\n  return obj;\n}\n\nfunction AuthTransaction(sdk, res) {\n  if (res) {\n    this.data = res;\n    util.extend(this, flattenEmbedded(sdk, res, res, {}));\n    delete this.stateToken;\n\n    // RECOVERY_CHALLENGE has some responses without _links.\n    // Without _links, we emulate cancel to make it intuitive\n    // to return to the starting state. We may remove this\n    // when OKTA-75434 is resolved\n    if (res.status === 'RECOVERY_CHALLENGE' && !res._links) {\n      this.cancel = function() {\n        return new Q(new AuthTransaction(sdk));\n      };\n    }\n  }\n}\n\nmodule.exports = {\n  transactionStatus: transactionStatus,\n  resumeTransaction: resumeTransaction,\n  transactionExists: transactionExists,\n  postToTransaction: postToTransaction,\n  introspect: introspect,\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/tx.js\n// module id = 7\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/process/browser.js\n// module id = 8\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 9\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity, max-statements */\nvar http = require('./http');\nvar util = require('./util');\nvar storageUtil = require('./browser/browserStorage');\nvar AuthSdkError = require('./errors/AuthSdkError');\n\nvar httpCache = storageUtil.getHttpCache();\n\nfunction generateState() {\n  return util.genRandomString(64);\n}\n\nfunction generateNonce() {\n  return util.genRandomString(64);\n}\n\nfunction isToken(obj) {\n  if (obj &&\n      (obj.accessToken || obj.idToken) &&\n      Array.isArray(obj.scopes)) {\n    return true;\n  }\n  return false;\n}\n\nfunction addListener(eventTarget, name, fn) {\n  if (eventTarget.addEventListener) {\n    eventTarget.addEventListener(name, fn);\n  } else {\n    eventTarget.attachEvent('on' + name, fn);\n  }\n}\n\nfunction removeListener(eventTarget, name, fn) {\n  if (eventTarget.removeEventListener) {\n    eventTarget.removeEventListener(name, fn);\n  } else {\n    eventTarget.detachEvent('on' + name, fn);\n  }\n}\n\nfunction loadFrame(src) {\n  var iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n  iframe.src = src;\n\n  return document.body.appendChild(iframe);\n}\n\nfunction loadPopup(src, options) {\n  var title = options.popupTitle || 'External Identity Provider User Authentication';\n  var appearance = 'toolbar=no, scrollbars=yes, resizable=yes, ' +\n    'top=100, left=500, width=600, height=600';\n\n  if (util.isIE11OrLess()) {\n    // IE<=11 doesn't fully support postMessage at time of writting.\n    // the following simple solution happened to solve the issue\n    // without adding another proxy layer which makes flow more complecated.\n    var winEl = window.open('/', title, appearance);\n    winEl.location.href = src;\n    return winEl;\n  } else {\n    return window.open(src, title, appearance);\n  }\n}\n\nfunction getWellKnown(sdk, issuer) {\n  var authServerUri = (issuer || sdk.options.issuer || sdk.options.url);\n  return http.get(sdk, authServerUri + '/.well-known/openid-configuration', {\n    cacheResponse: true\n  });\n}\n\nfunction getKey(sdk, issuer, kid) {\n  return getWellKnown(sdk, issuer)\n  .then(function(wellKnown) {\n    var jwksUri = wellKnown['jwks_uri'];\n\n    // Check our kid against the cached version (if it exists and isn't expired)\n    var cacheContents = httpCache.getStorage();\n    var cachedResponse = cacheContents[jwksUri];\n    if (cachedResponse && Date.now()/1000 < cachedResponse.expiresAt) {\n      var cachedKey = util.find(cachedResponse.response.keys, {\n        kid: kid\n      });\n\n      if (cachedKey) {\n        return cachedKey;\n      }\n    }\n\n    // Remove cache for the key\n    httpCache.clearStorage(jwksUri);\n\n    // Pull the latest keys if the key wasn't in the cache\n    return http.get(sdk, jwksUri, {\n      cacheResponse: true\n    })\n    .then(function(res) {\n      var key = util.find(res.keys, {\n        kid: kid\n      });\n\n      if (key) {\n        return key;\n      }\n\n      throw new AuthSdkError('The key id, ' + kid + ', was not found in the server\\'s keys');\n    });\n  });\n}\n\nfunction validateClaims(sdk, claims, validationParams) {\n  var aud = validationParams.clientId;\n  var iss = validationParams.issuer;\n  var nonce = validationParams.nonce;\n\n  if (!claims || !iss || !aud) {\n    throw new AuthSdkError('The jwt, iss, and aud arguments are all required');\n  }\n\n  if (nonce && claims.nonce !== nonce) {\n    throw new AuthSdkError('OAuth flow response nonce doesn\\'t match request nonce');\n  }\n\n  var now = Math.floor(Date.now()/1000);\n\n  if (claims.iss !== iss) {\n    throw new AuthSdkError('The issuer [' + claims.iss + '] ' +\n      'does not match [' + iss + ']');\n  }\n\n  if (claims.aud !== aud) {\n    throw new AuthSdkError('The audience [' + claims.aud + '] ' +\n      'does not match [' + aud + ']');\n  }\n\n  if (claims.iat > claims.exp) {\n    throw new AuthSdkError('The JWT expired before it was issued');\n  }\n\n  if ((now - sdk.options.maxClockSkew) > claims.exp) {\n    throw new AuthSdkError('The JWT expired and is no longer valid');\n  }\n\n  if (claims.iat > (now + sdk.options.maxClockSkew)) {\n    throw new AuthSdkError('The JWT was issued in the future');\n  }\n}\n\nfunction getOAuthUrls(sdk, oauthParams, options) {\n  options = options || {};\n\n  // Get user-supplied arguments\n  var authorizeUrl = util.removeTrailingSlash(options.authorizeUrl) || sdk.options.authorizeUrl;\n  var issuer = util.removeTrailingSlash(options.issuer) || sdk.options.issuer;\n  var userinfoUrl = util.removeTrailingSlash(options.userinfoUrl) || sdk.options.userinfoUrl;\n  var tokenUrl = util.removeTrailingSlash(options.tokenUrl) || sdk.options.tokenUrl;\n  var logoutUrl = util.removeTrailingSlash(options.logoutUrl) || sdk.options.logoutUrl;\n  var revokeUrl = util.removeTrailingSlash(options.revokeUrl) || sdk.options.revokeUrl;\n\n  // If an issuer exists but it's not a url, assume it's an authServerId\n  if (issuer && !(/^https?:/.test(issuer))) {\n    // Make it a url\n    issuer = sdk.options.url + '/oauth2/' + issuer;\n  }\n\n  // If an authorizeUrl is supplied without an issuer, and an id_token is requested\n  if (!issuer && authorizeUrl &&\n      oauthParams.responseType.indexOf('id_token') !== -1) {\n    // The issuer is ambiguous, so we won't be able to validate the id_token jwt\n    throw new AuthSdkError('Cannot request idToken with an authorizeUrl without an issuer');\n  }\n\n  // If a token is requested without an issuer\n  if (!issuer && oauthParams && oauthParams.responseType.indexOf('token') !== -1) {\n    // If an authorizeUrl is supplied without a userinfoUrl\n    if (authorizeUrl && !userinfoUrl) {\n      // The userinfoUrl is ambiguous, so we won't be able to call getUserInfo\n      throw new AuthSdkError('Cannot request accessToken with an authorizeUrl without an issuer or userinfoUrl');\n    }\n\n    // If a userinfoUrl is supplied without a authorizeUrl\n    if (userinfoUrl && !authorizeUrl) {\n      // The authorizeUrl is ambiguous, so we won't be able to call the authorize endpoint\n      throw new AuthSdkError('Cannot request token with an userinfoUrl without an issuer or authorizeUrl');\n    }\n  }\n\n  // Default the issuer to our baseUrl\n  issuer = issuer || sdk.options.url;\n\n  // Trim trailing slashes\n  issuer = util.removeTrailingSlash(issuer);\n\n  var baseUrl = issuer;\n  // A custom auth server issuer looks like:\n  // https://example.okta.com/oauth2/aus8aus76q8iphupD0h7\n  // \n  // Most orgs have a \"default\" custom authorization server:\n  // https://example.okta.com/oauth2/default\n  var customAuthServerRegex = new RegExp('^https?://.*?/oauth2/.+');\n  if (!customAuthServerRegex.test(baseUrl)) {\n    // Append '/oauth2' if necessary\n    if (!baseUrl.endsWith('/oauth2')) {\n      baseUrl += '/oauth2';\n    }\n  }\n\n  authorizeUrl = authorizeUrl || baseUrl + '/v1/authorize';\n  userinfoUrl = userinfoUrl || baseUrl + '/v1/userinfo';\n  tokenUrl = tokenUrl || baseUrl + '/v1/token';\n  revokeUrl = revokeUrl || baseUrl + '/v1/revoke';\n  logoutUrl = logoutUrl || baseUrl + '/v1/logout';\n\n  return {\n    issuer: issuer,\n    authorizeUrl: authorizeUrl,\n    userinfoUrl: userinfoUrl,\n    tokenUrl: tokenUrl,\n    revokeUrl: revokeUrl,\n    logoutUrl: logoutUrl\n  };\n}\n\nfunction urlParamsToObject(hashOrSearch) {\n  // Predefine regexs for parsing hash\n  var plus2space = /\\+/g;\n  var paramSplit = /([^&=]+)=?([^&]*)/g;\n\n  // Remove the leading # or ?\n  var fragment = hashOrSearch.substring(1);\n\n  var obj = {};\n\n  // Loop until we have no more params\n  var param;\n  while (true) { // eslint-disable-line no-constant-condition\n    param = paramSplit.exec(fragment);\n    if (!param) { break; }\n\n    var key = param[1];\n    var value = param[2];\n\n    // id_token should remain base64url encoded\n    if (key === 'id_token' || key === 'access_token' || key === 'code') {\n      obj[key] = value;\n    } else {\n      obj[key] = decodeURIComponent(value.replace(plus2space, ' '));\n    }\n  }\n  return obj;\n}\n\nmodule.exports = {\n  generateState: generateState,\n  generateNonce: generateNonce,\n  getWellKnown: getWellKnown,\n  getKey: getKey,\n  validateClaims: validateClaims,\n  getOAuthUrls: getOAuthUrls,\n  loadFrame: loadFrame,\n  loadPopup: loadPopup,\n  urlParamsToObject: urlParamsToObject,\n  isToken: isToken,\n  addListener: addListener,\n  removeListener: removeListener\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/oauthUtil.js\n// module id = 10\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar fetchRequest = require('../../fetch/fetchRequest');\nvar storageUtil = require('./browserStorage');\n\nmodule.exports = require('./browser')(storageUtil, fetchRequest);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/browser/browserIndex.js\n// module id = 11\n// module chunks = 0","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nvar fetch = require('cross-fetch');\n\n/* eslint-disable complexity */\nfunction fetchRequest(method, url, args) {\n  var body = args.data;\n  var headers = args.headers || {};\n  var contentType = (headers['Content-Type'] || headers['content-type'] || '');\n\n  // JSON encode body (if appropriate)\n  if (contentType === 'application/json' && body && typeof body !== 'string') {\n    body = JSON.stringify(body);\n  }\n\n  var fetchPromise = fetch(url, {\n    method: method,\n    headers: args.headers,\n    body: body,\n    credentials: args.withCredentials === false ? 'omit' : 'include'\n  })\n  .then(function(response) {\n    var error = !response.ok;\n    var status = response.status;\n    var respHandler = function(resp) {\n      var result = {\n        responseText: resp,\n        status: status\n      };\n      if (error) {\n        // Throwing response object since error handling is done in http.js\n        throw result;\n      }\n      return result;\n    };\n    if (response.headers.get('Content-Type') &&\n        response.headers.get('Content-Type').toLowerCase().indexOf('application/json') >= 0) {\n      return response.json().then(respHandler);\n    } else {\n      return response.text().then(respHandler);\n    }\n  });\n  return fetchPromise;\n}\n\nmodule.exports = fetchRequest;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./fetch/fetchRequest.js\n// module id = 12\n// module chunks = 0","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/cross-fetch/dist/browser-ponyfill.js\n// module id = 13\n// module chunks = 0","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/js-cookie/src/js.cookie.js\n// module id = 14\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* eslint-disable complexity */\n/* eslint-disable max-statements */\n/* SDK_VERSION is defined in webpack config */ \n/* global SDK_VERSION */\n\nrequire('../vendor/polyfills');\n\nvar Emitter           = require('tiny-emitter');\nvar AuthSdkError      = require('../errors/AuthSdkError');\nvar builderUtil       = require('../builderUtil');\nvar constants         = require('../constants');\nvar cookies           = require('./browserStorage').storage;\nvar http              = require('../http');\nvar oauthUtil         = require('../oauthUtil');\nvar Q                 = require('q');\nvar session           = require('../session');\nvar token             = require('../token');\nvar TokenManager      = require('../TokenManager');\nvar tx                = require('../tx');\nvar util              = require('../util');\n\nfunction OktaAuthBuilder(args) {\n  var sdk = this;\n\n  var url = builderUtil.getValidUrl(args);\n  // OKTA-242989: support for grantType will be removed in 3.0 \n  var usePKCE = args.pkce || args.grantType === 'authorization_code';\n  this.options = {\n    url: util.removeTrailingSlash(url),\n    clientId: args.clientId,\n    issuer: util.removeTrailingSlash(args.issuer),\n    authorizeUrl: util.removeTrailingSlash(args.authorizeUrl),\n    userinfoUrl: util.removeTrailingSlash(args.userinfoUrl),\n    tokenUrl: util.removeTrailingSlash(args.tokenUrl),\n    revokeUrl: util.removeTrailingSlash(args.revokeUrl),\n    logoutUrl: util.removeTrailingSlash(args.logoutUrl),\n    pkce: usePKCE,\n    redirectUri: args.redirectUri,\n    postLogoutRedirectUri: args.postLogoutRedirectUri,\n    responseMode: args.responseMode,\n    httpRequestClient: args.httpRequestClient,\n    storageUtil: args.storageUtil,\n    transformErrorXHR: args.transformErrorXHR,\n    headers: args.headers,\n    onSessionExpired: args.onSessionExpired,\n  };\n\n  if (this.options.pkce && !sdk.features.isPKCESupported()) {\n    var errorMessage = 'PKCE requires a modern browser with encryption support running in a secure context.';\n    if (!sdk.features.isHTTPS()) {\n      errorMessage += '\\nThe current page is not being served with HTTPS protocol. Try using HTTPS.';\n    }\n    if (!sdk.features.hasTextEncoder()) {\n      errorMessage += '\\n\"TextEncoder\" is not defined. You may need a polyfill/shim for this browser.';\n    }\n    throw new AuthSdkError(errorMessage);\n  }\n\n  this.userAgent = 'okta-auth-js-' + SDK_VERSION;\n\n  // Digital clocks will drift over time, so the server\n  // can misalign with the time reported by the browser.\n  // The maxClockSkew allows relaxing the time-based\n  // validation of tokens (in seconds, not milliseconds).\n  // It currently defaults to 300, because 5 min is the\n  // default maximum tolerance allowed by Kerberos.\n  // (https://technet.microsoft.com/en-us/library/cc976357.aspx)\n  if (!args.maxClockSkew && args.maxClockSkew !== 0) {\n    this.options.maxClockSkew = constants.DEFAULT_MAX_CLOCK_SKEW;\n  } else {\n    this.options.maxClockSkew = args.maxClockSkew;\n  }\n\n  // Give the developer the ability to disable token signature\n  // validation.\n  this.options.ignoreSignature = !!args.ignoreSignature;\n\n  sdk.session = {\n    close: util.bind(session.closeSession, null, sdk),\n    exists: util.bind(session.sessionExists, null, sdk),\n    get: util.bind(session.getSession, null, sdk),\n    refresh: util.bind(session.refreshSession, null, sdk),\n    setCookieAndRedirect: util.bind(session.setCookieAndRedirect, null, sdk)\n  };\n\n  sdk.tx = {\n    status: util.bind(tx.transactionStatus, null, sdk),\n    resume: util.bind(tx.resumeTransaction, null, sdk),\n    exists: util.bind(tx.transactionExists, null, sdk),\n    introspect: util.bind(tx.introspect, null, sdk)\n  };\n\n  // This is exposed so we can mock document.cookie in our tests\n  sdk.tx.exists._get = function(name) {\n    return cookies.get(name);\n  };\n\n  // This is exposed so we can mock window.location.href in our tests\n  sdk.idToken = {\n    authorize: {\n      _getLocationHref: function() {\n        return window.location.href;\n      }\n    }\n  };\n\n  sdk.token = {\n    getWithoutPrompt: util.bind(token.getWithoutPrompt, null, sdk),\n    getWithPopup: util.bind(token.getWithPopup, null, sdk),\n    getWithRedirect: util.bind(token.getWithRedirect, null, sdk),\n    parseFromUrl: util.bind(token.parseFromUrl, null, sdk),\n    decode: token.decodeToken,\n    revoke: util.bind(token.revokeToken, null, sdk),\n    renew: util.bind(token.renewToken, null, sdk),\n    getUserInfo: util.bind(token.getUserInfo, null, sdk),\n    verify: util.bind(token.verifyToken, null, sdk)\n  };\n\n  // This is exposed so we can set window.location in our tests\n  sdk.token.getWithRedirect._setLocation = function(url) {\n    window.location = url;\n  };\n\n  // This is exposed so we can mock getting window.history in our tests\n  sdk.token.parseFromUrl._getHistory = function() {\n    return window.history;\n  };\n\n  // This is exposed so we can mock getting window.location in our tests\n  sdk.token.parseFromUrl._getLocation = function() {\n    return window.location;\n  };\n\n  // This is exposed so we can mock getting window.document in our tests\n  sdk.token.parseFromUrl._getDocument = function() {\n    return window.document;\n  };\n\n  sdk.fingerprint._getUserAgent = function() {\n    return navigator.userAgent;\n  };\n\n  var isWindowsPhone = /windows phone|iemobile|wpdesktop/i;\n  sdk.features.isFingerprintSupported = function() {\n    var agent = sdk.fingerprint._getUserAgent();\n    return agent && !isWindowsPhone.test(agent);\n  };\n\n  sdk.emitter = new Emitter();\n  sdk.tokenManager = new TokenManager(sdk, args.tokenManager);\n  sdk.tokenManager.on('error', this._onTokenManagerError, this);\n}\n\nvar proto = OktaAuthBuilder.prototype;\nproto._onTokenManagerError = function(error) {\n  var code = error.errorCode;\n  if (code === 'login_required' && error.accessToken) {\n    if (this.options.onSessionExpired) {\n      this.options.onSessionExpired();\n    } else {\n      // eslint-disable-next-line no-console\n      console.error('Session has expired or was closed outside the application.');\n    }\n  }\n};\n\nproto.features = {};\n\nproto.features.isPopupPostMessageSupported = function() {\n  var isIE8or9 = document.documentMode && document.documentMode < 10;\n  if (window.postMessage && !isIE8or9) {\n    return true;\n  }\n  return false;\n};\n\nproto.features.isTokenVerifySupported = function() {\n  return typeof crypto !== 'undefined' && crypto.subtle && typeof Uint8Array !== 'undefined';\n};\n\nproto.features.hasTextEncoder = function() {\n  return typeof TextEncoder !== 'undefined';\n};\n\nproto.features.isPKCESupported = function() {\n  return proto.features.isTokenVerifySupported() && proto.features.hasTextEncoder();\n};\n\nproto.features.isHTTPS = function() {\n  return window.location.protocol === 'https:';\n};\n\n// { username, password, (relayState), (context) }\nproto.signIn = function (opts) {\n  var sdk = this;\n  opts = util.clone(opts || {});\n  function postToTransaction(options) {\n    delete opts.sendFingerprint;\n    return tx.postToTransaction(sdk, '/api/v1/authn', opts, options);\n  }\n  if (!opts.sendFingerprint) {\n    return postToTransaction();\n  }\n  return sdk.fingerprint()\n  .then(function(fingerprint) {\n    return postToTransaction({\n      headers: {\n        'X-Device-Fingerprint': fingerprint\n      }\n    });\n  });\n};\n\n// Ends the current application session, clearing all local tokens\n// Optionally revokes the access token\n// Ends the user's Okta session using the API or redirect method\nproto.signOut = function (options) {\n  options = util.extend({}, options);\n\n  // postLogoutRedirectUri must be whitelisted in Okta Admin UI\n  var postLogoutRedirectUri = options.postLogoutRedirectUri || this.options.postLogoutRedirectUri;\n\n  var accessToken = options.accessToken;\n  var revokeAccessToken = options.revokeAccessToken;\n  var idToken = options.idToken;\n\n  var sdk = this;\n  var logoutUrl = oauthUtil.getOAuthUrls(sdk).logoutUrl;\n\n  function getAccessToken() {\n    return new Q()\n    .then(function() {\n      if (revokeAccessToken && typeof accessToken === 'undefined') {\n        return sdk.tokenManager.get('token');\n      }\n      return accessToken;\n    });\n  }\n\n  function getIdToken() {\n    return new Q()\n    .then(function() {\n      if (postLogoutRedirectUri && typeof idToken === 'undefined') {\n        return sdk.tokenManager.get('idToken');\n      }\n      return idToken;\n    });\n  }\n\n  function closeSession() {\n    return sdk.session.close() // DELETE /api/v1/sessions/me\n    .catch(function(e) {\n      if (e.name === 'AuthApiError') {\n        // Most likely cause is session does not exist or has already been closed\n        // Could also be a network error. Nothing we can do here.\n        return;\n      }\n      throw e;\n    });\n  }\n\n  return Q.allSettled([getAccessToken(), getIdToken()])\n    .then(function(tokens) {\n      accessToken = tokens[0].value;\n      idToken = tokens[1].value;\n\n      // Clear all local tokens\n      sdk.tokenManager.clear();\n\n      if (revokeAccessToken && accessToken) {\n        return sdk.token.revoke(accessToken)\n        .catch(function(e) {\n          if (e.name === 'AuthApiError') {\n            // Capture and ignore network errors\n            return;\n          }\n          throw e;\n        });\n      }\n    })\n    .then(function() {\n      // XHR signOut method\n      if (!postLogoutRedirectUri) {\n        return closeSession();\n      }\n\n      // No idToken? This can happen if the storage was cleared.\n      // Fallback to XHR signOut, then redirect to the post logout uri\n      if (!idToken) {\n        return closeSession()\n        .catch(function(err) {\n          // eslint-disable-next-line no-console\n          console.log('Unhandled exception while closing session', err);\n        })\n        .then(function() {\n          window.location.assign(postLogoutRedirectUri);\n        });\n      }\n\n      // logout redirect using the idToken.\n      var state = options.state;\n      var idTokenHint = idToken.idToken; // a string\n      var logoutUri = logoutUrl + '?id_token_hint=' + encodeURIComponent(idTokenHint) +\n        '&post_logout_redirect_uri=' + encodeURIComponent(postLogoutRedirectUri);\n    \n      // State allows option parameters to be passed to logout redirect uri\n      if (state) {\n        logoutUri += '&state=' + encodeURIComponent(state);\n      }\n      \n      window.location.assign(logoutUri);\n    });\n};\n\nbuilderUtil.addSharedPrototypes(proto);\n\n// { resource, (rel), (requestContext)}\nproto.webfinger = function (opts) {\n  var url = '/.well-known/webfinger' + util.toQueryParams(opts);\n  var options = {\n    headers: {\n      'Accept': 'application/jrd+json'\n    }\n  };\n  return http.get(this, url, options);\n};\n\nproto.fingerprint = function(options) {\n  options = options || {};\n  var sdk = this;\n  if (!sdk.features.isFingerprintSupported()) {\n    return Q.reject(new AuthSdkError('Fingerprinting is not supported on this device'));\n  }\n\n  var deferred = Q.defer();\n\n  var iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n\n  function listener(e) {\n    if (!e || !e.data || e.origin !== sdk.options.url) {\n      return;\n    }\n\n    try {\n      var msg = JSON.parse(e.data);\n    } catch (err) {\n      return deferred.reject(new AuthSdkError('Unable to parse iframe response'));\n    }\n\n    if (!msg) { return; }\n    if (msg.type === 'FingerprintAvailable') {\n      return deferred.resolve(msg.fingerprint);\n    }\n    if (msg.type === 'FingerprintServiceReady') {\n      e.source.postMessage(JSON.stringify({\n        type: 'GetFingerprint'\n      }), e.origin);\n    }\n  }\n  oauthUtil.addListener(window, 'message', listener);\n\n  iframe.src = sdk.options.url + '/auth/services/devicefingerprint';\n  document.body.appendChild(iframe);\n\n  var timeout = setTimeout(function() {\n    deferred.reject(new AuthSdkError('Fingerprinting timed out'));\n  }, options.timeout || 15000);\n\n  return deferred.promise.fin(function() {\n    clearTimeout(timeout);\n    oauthUtil.removeListener(window, 'message', listener);\n    if (document.body.contains(iframe)) {\n      iframe.parentElement.removeChild(iframe);\n    }\n  });\n};\n\nmodule.exports = builderUtil.buildOktaAuth(OktaAuthBuilder);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/browser/browser.js\n// module id = 15\n// module chunks = 0","/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nrequire('Base64');\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.14\n// Reference: http://es5.github.io/#x15.4.4.14\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf#Polyfill\nif (!Array.prototype.indexOf) {\n  Array.prototype.indexOf = function(searchElement, fromIndex) {\n\n    var k;\n\n    // 1. Let o be the result of calling ToObject passing\n    //    the this value as the argument.\n    if (this == null) {\n      throw new TypeError('\"this\" is null or not defined');\n    }\n\n    var o = Object(this);\n\n    // 2. Let lenValue be the result of calling the Get\n    //    internal method of o with the argument \"length\".\n    // 3. Let len be ToUint32(lenValue).\n    var len = o.length >>> 0;\n\n    // 4. If len is 0, return -1.\n    if (len === 0) {\n      return -1;\n    }\n\n    // 5. If argument fromIndex was passed let n be\n    //    ToInteger(fromIndex); else let n be 0.\n    var n = +fromIndex || 0;\n\n    if (Math.abs(n) === Infinity) {\n      n = 0;\n    }\n\n    // 6. If n >= len, return -1.\n    if (n >= len) {\n      return -1;\n    }\n\n    // 7. If n >= 0, then Let k be n.\n    // 8. Else, n<0, Let k be len - abs(n).\n    //    If k is less than 0, then let k be 0.\n    k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n    // 9. Repeat, while k < len\n    while (k < len) {\n      // a. Let Pk be ToString(k).\n      //   This is implicit for LHS operands of the in operator\n      // b. Let kPresent be the result of calling the\n      //    HasProperty internal method of o with argument Pk.\n      //   This step can be combined with c\n      // c. If kPresent is true, then\n      //    i.  Let elementK be the result of calling the Get\n      //        internal method of o with the argument ToString(k).\n      //   ii.  Let same be the result of applying the\n      //        Strict Equality Comparison Algorithm to\n      //        searchElement and elementK.\n      //  iii.  If same is true, return k.\n      if (k in o && o[k] === searchElement) {\n        return k;\n      }\n      k++;\n    }\n    return -1;\n  };\n}\n\nif (!Array.isArray) {\n  Array.isArray = function(obj) {\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/vendor/polyfills.js\n// module id = 16\n// module chunks = 0",";(function () {\n\n  var object = typeof exports != 'undefined' ? exports : this; // #8: web workers\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  function InvalidCharacterError(message) {\n    this.message = message;\n  }\n  InvalidCharacterError.prototype = new Error;\n  InvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n  // encoder\n  // [https://gist.github.com/999166] by [https://github.com/nignag]\n  object.btoa || (\n  object.btoa = function (input) {\n    var str = String(input);\n    for (\n      // initialize result and counter\n      var block, charCode, idx = 0, map = chars, output = '';\n      // if the next str index does not exist:\n      //   change the mapping table to \"=\"\n      //   check if d has no fractional digits\n      str.charAt(idx | 0) || (map = '=', idx % 1);\n      // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n      output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n    ) {\n      charCode = str.charCodeAt(idx += 3/4);\n      if (charCode > 0xFF) {\n        throw new InvalidCharacterError(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\n      }\n      block = block << 8 | charCode;\n    }\n    return output;\n  });\n\n  // decoder\n  // [https://gist.github.com/1020396] by [https://github.com/atk]\n  object.atob || (\n  object.atob = function (input) {\n    var str = String(input).replace(/=+$/, '');\n    if (str.length % 4 == 1) {\n      throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n    }\n    for (\n      // initialize result and counters\n      var bc = 0, bs, buffer, idx = 0, output = '';\n      // get next character\n      buffer = str.charAt(idx++);\n      // character found in table? initialize bit storage and add its ascii value;\n      ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n        // and if not first of each 4 characters,\n        // convert the first 8 bits to one ascii character\n        bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n    ) {\n      // try to find character in table (0-63, not found => -1)\n      buffer = chars.indexOf(buffer);\n    }\n    return output;\n  });\n\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/Base64/base64.js\n// module id = 17\n// module chunks = 0","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/tiny-emitter/index.js\n// module id = 18\n// module chunks = 0","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nvar AuthSdkError = require('./errors/AuthSdkError');\nvar tx = require('./tx');\nvar util = require('./util');\n\nfunction getValidUrl(args) {\n  if (!args) {\n    throw new AuthSdkError('No arguments passed to constructor. ' +\n      'Required usage: new OktaAuth(args)');\n  }\n\n  var url = args.url;\n  if (!url) {\n    var isUrlRegex = new RegExp('^http?s?://.+');\n    if (args.issuer && isUrlRegex.test(args.issuer)) {\n      // Infer the URL from the issuer URL, omitting the /oauth2/{authServerId}\n      url = args.issuer.split('/oauth2/')[0];\n    } else {\n      throw new AuthSdkError('No url passed to constructor. ' +\n      'Required usage: new OktaAuth({url: \"https://{yourOktaDomain}.com\"})');\n    }\n  }\n\n  if (url.indexOf('-admin.') !== -1) {\n    throw new AuthSdkError('URL passed to constructor contains \"-admin\" in subdomain. ' +\n      'Required usage: new OktaAuth({url: \"https://{yourOktaDomain}.com})');\n  }\n\n  return url;\n}\n\nfunction addSharedPrototypes(proto) {\n  // { username, (relayState) }\n  proto.forgotPassword = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/password', opts);\n  };\n\n  // { username, (relayState) }\n  proto.unlockAccount = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/unlock', opts);\n  };\n\n  // { recoveryToken }\n  proto.verifyRecoveryToken = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/token', opts);\n  };\n}\n\nfunction buildOktaAuth(OktaAuthBuilder) {\n  return function(storageUtil, httpRequestClient) {\n    function OktaAuth(args) {\n      if (!(this instanceof OktaAuth)) {\n        return new OktaAuth(args);\n      }\n\n      if (args) {\n        args.storageUtil = storageUtil;\n\n        if (args.ajaxRequest) {\n          util.deprecate('ajaxRequest is being deprecated, use httpRequestClient attribute instead.');\n          args.httpRequestClient = args.ajaxRequest;\n        } else if (!args.httpRequestClient) {\n          args.httpRequestClient = httpRequestClient;\n        }\n      }\n\n      util.bind(OktaAuthBuilder, this)(args);\n    }\n    OktaAuth.prototype = OktaAuthBuilder.prototype;\n    OktaAuth.prototype.constructor = OktaAuth;\n\n    // Hoist feature detection functions to static type\n    OktaAuth.features = OktaAuthBuilder.prototype.features;\n\n    return OktaAuth;\n  };\n}\n\nmodule.exports = {\n  addSharedPrototypes: addSharedPrototypes,\n  buildOktaAuth: buildOktaAuth,\n  getValidUrl: getValidUrl\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/builderUtil.js\n// module id = 19\n// module chunks = 0","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/timers-browserify/main.js\n// module id = 20\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/setimmediate/setImmediate.js\n// module id = 21\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction AuthApiError(err, xhr) {\n  this.name = 'AuthApiError';\n  this.message = err.errorSummary;\n  this.errorSummary = err.errorSummary;\n  this.errorCode = err.errorCode;\n  this.errorLink = err.errorLink;\n  this.errorId = err.errorId;\n  this.errorCauses = err.errorCauses;\n\n  if (xhr) {\n    this.xhr = xhr;\n  }\n}\nAuthApiError.prototype = new Error();\n\nmodule.exports = AuthApiError;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/errors/AuthApiError.js\n// module id = 22\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction AuthPollStopError() {\n  this.name = 'AuthPollStopError';\n  this.message = 'The poll was stopped by the sdk';\n}\nAuthPollStopError.prototype = new Error();\n\nmodule.exports = AuthPollStopError;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/errors/AuthPollStopError.js\n// module id = 23\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar util = require('./util');\nvar http = require('./http');\n\nfunction sessionExists(sdk) {\n  return sdk.session.get()\n    .then(function(res) {\n      if (res.status === 'ACTIVE') {\n        return true;\n      }\n      return false;\n    })\n    .fail(function() {\n      return false;\n    });\n}\n\nfunction getSession(sdk) { \n  return http.get(sdk, '/api/v1/sessions/me')\n  .then(function(session) {\n    var res = util.omit(session, '_links');\n\n    res.refresh = function() {\n      return http.post(sdk, util.getLink(session, 'refresh').href);\n    };\n\n    res.user = function() {\n      return http.get(sdk, util.getLink(session, 'user').href);\n    };\n\n    return res;\n  })\n  .fail(function() {\n    // Return INACTIVE status on failure\n    return {status: 'INACTIVE'};\n  });\n}\n\nfunction closeSession(sdk) {\n  return http.httpRequest(sdk, {\n    url: sdk.options.url + '/api/v1/sessions/me',\n    method: 'DELETE'\n  });\n}\n\nfunction refreshSession(sdk) {\n  return http.post(sdk, '/api/v1/sessions/me/lifecycle/refresh');\n}\n\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n  redirectUrl = redirectUrl || window.location.href;\n  window.location = sdk.options.url + '/login/sessionCookieRedirect' +\n    util.toQueryParams({\n      checkAccountSetupComplete: true,\n      token: sessionToken,\n      redirectUrl: redirectUrl\n    });\n}\n\nmodule.exports = {\n  sessionExists: sessionExists,\n  getSession: getSession,\n  closeSession: closeSession,\n  refreshSession: refreshSession,\n  setCookieAndRedirect: setCookieAndRedirect\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/session.js\n// module id = 24\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity, max-statements */\nvar http          = require('./http');\nvar util          = require('./util');\nvar oauthUtil     = require('./oauthUtil');\nvar Q             = require('q');\nvar sdkCrypto     = require('./crypto');\nvar AuthSdkError  = require('./errors/AuthSdkError');\nvar OAuthError    = require('./errors/OAuthError');\nvar constants     = require('./constants');\nvar cookies       = require('./browser/browserStorage').storage;\nvar PKCE          = require('./pkce');\n\n// Only the access token can be revoked in SPA applications\nfunction revokeToken(sdk, token) {\n  return new Q()\n  .then(function() {\n    if (!token || !token.accessToken) {\n      throw new AuthSdkError('A valid access token object is required');\n    }\n    var clientId = sdk.options.clientId;\n    if (!clientId) {\n      throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to revoke a token');\n    }\n    var revokeUrl = oauthUtil.getOAuthUrls(sdk).revokeUrl;\n    var accessToken = token.accessToken;\n    var args = util.toQueryParams({\n      // eslint-disable-next-line camelcase\n      token_type_hint: 'access_token',\n      token: accessToken\n    }).slice(1);\n    var creds = btoa(clientId);\n    return http.post(sdk, revokeUrl, args, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Authorization': 'Basic ' + creds\n      }\n    });\n  });\n}\n\nfunction decodeToken(token) {\n  var jwt = token.split('.');\n  var decodedToken;\n\n  try {\n    decodedToken = {\n      header: JSON.parse(util.base64UrlToString(jwt[0])),\n      payload: JSON.parse(util.base64UrlToString(jwt[1])),\n      signature: jwt[2]\n    };\n  } catch(e) {\n    throw new AuthSdkError('Malformed token');\n  }\n\n  return decodedToken;\n}\n\n// Verify the id token\nfunction verifyToken(sdk, token, validationParams) {\n  return new Q()\n  .then(function() {\n    if (!token || !token.idToken) {\n      throw new AuthSdkError('Only idTokens may be verified');\n    }\n\n    var jwt = decodeToken(token.idToken);\n\n    var validationOptions = {\n      clientId: sdk.options.clientId,\n      issuer: sdk.options.issuer || sdk.options.url,\n      ignoreSignature: sdk.options.ignoreSignature\n    };\n\n    util.extend(validationOptions, validationParams);\n\n    // Standard claim validation\n    oauthUtil.validateClaims(sdk, jwt.payload, validationOptions);\n\n    // If the browser doesn't support native crypto or we choose not\n    // to verify the signature, bail early\n    if (validationOptions.ignoreSignature == true || !sdk.features.isTokenVerifySupported()) {\n      return token;\n    }\n\n    return oauthUtil.getKey(sdk, token.issuer, jwt.header.kid)\n    .then(function(key) {\n      return sdkCrypto.verifyToken(token.idToken, key);\n    })\n    .then(function(valid) {\n      if (!valid) {\n        throw new AuthSdkError('The token signature is not valid');\n      }\n      return token;\n    });\n  });\n}\n\nfunction addPostMessageListener(sdk, timeout, state) {\n  var deferred = Q.defer();\n\n  function responseHandler(e) {\n    if (!e.data || e.data.state !== state) {\n      // A message not meant for us\n      return;\n    }\n\n    // Configuration mismatch between saved token and current app instance\n    // This may happen if apps with different issuers are running on the same host url\n    // If they share the same storage key, they may read and write tokens in the same location.\n    // Common when developing against http://localhost\n    if (e.origin !== sdk.options.url) {\n      return deferred.reject(new AuthSdkError('The request does not match client configuration'));\n    }\n\n    deferred.resolve(e.data);\n  }\n\n  oauthUtil.addListener(window, 'message', responseHandler);\n\n  return deferred.promise.timeout(timeout || 120000, new AuthSdkError('OAuth flow timed out'))\n    .fin(function() {\n      oauthUtil.removeListener(window, 'message', responseHandler);\n    });\n}\n\nfunction addFragmentListener(sdk, windowEl, timeout) {\n  var deferred = Q.defer();\n\n  function hashChangeHandler() {\n    /*\n      We are only able to access window.location.hash on a window\n      that has the same domain. A try/catch is necessary because\n      there's no other way to determine that the popup is in\n      another domain. When we try to access a window on another\n      domain, an error is thrown.\n    */\n    try {\n      if (windowEl &&\n          windowEl.location &&\n          windowEl.location.hash) {\n        deferred.resolve(oauthUtil.hashToObject(windowEl.location.hash));\n      } else if (windowEl && !windowEl.closed) {\n        setTimeout(hashChangeHandler, 500);\n      }\n    } catch (err) {\n      setTimeout(hashChangeHandler, 500);\n    }\n  }\n\n  hashChangeHandler();\n\n  return deferred.promise.timeout(timeout || 120000, new AuthSdkError('OAuth flow timed out'));\n}\n\nfunction exchangeCodeForToken(sdk, oauthParams, authorizationCode, urls) {\n  // PKCE authorization_code flow\n  // Retrieve saved values and build oauthParams for call to /token\n  var meta = PKCE.loadMeta(sdk);\n  var getTokenParams = {\n    clientId: oauthParams.clientId,\n    authorizationCode: authorizationCode,\n    codeVerifier: meta.codeVerifier,\n    redirectUri: meta.redirectUri\n  };\n  return PKCE.getToken(sdk, getTokenParams, urls)\n  .then(function(res) {\n    validateResponse(res, getTokenParams);\n    return res;\n  })\n  .fin(function() {\n    PKCE.clearMeta(sdk);\n  });\n}\n\nfunction validateResponse(res, oauthParams) {\n  if (res['error'] || res['error_description']) {\n    throw new OAuthError(res['error'], res['error_description']);\n  }\n\n  if (res.state !== oauthParams.state) {\n    throw new AuthSdkError('OAuth flow response state doesn\\'t match request state');\n  }\n}\n\nfunction handleOAuthResponse(sdk, oauthParams, res, urls) {\n  urls = urls || {};\n\n  var responseType = oauthParams.responseType;\n  var scopes = util.clone(oauthParams.scopes);\n  var clientId = oauthParams.clientId || sdk.options.clientId;\n\n  return new Q()\n  .then(function() {\n    validateResponse(res, oauthParams);\n\n    // We do not support \"hybrid\" scenarios where the response includes both a code and a token.\n    // If the response contains a code it is used immediately to obtain new tokens.\n    if (res['code']) {\n      responseType = ['token', 'id_token']; // what we expect the code to provide us\n      return exchangeCodeForToken(sdk, oauthParams, res['code'], urls);\n    }\n    return res;\n  }).then(function(res) {\n    var tokenDict = {};\n\n    if (res['access_token']) {\n      tokenDict['token'] = {\n        accessToken: res['access_token'],\n        expiresAt: Number(res['expires_in']) + Math.floor(Date.now()/1000),\n        tokenType: res['token_type'],\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        userinfoUrl: urls.userinfoUrl\n      };\n    }\n\n    if (res['id_token']) {\n      var jwt = sdk.token.decode(res['id_token']);\n\n      var idToken = {\n        idToken: res['id_token'],\n        claims: jwt.payload,\n        expiresAt: jwt.payload.exp,\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        issuer: urls.issuer,\n        clientId: clientId\n      };\n\n      var validationParams = {\n        clientId: clientId,\n        issuer: urls.issuer,\n        nonce: oauthParams.nonce\n      };\n\n      if (oauthParams.ignoreSignature !== undefined) {\n        validationParams.ignoreSignature = oauthParams.ignoreSignature;\n      }\n\n      return verifyToken(sdk, idToken, validationParams)\n      .then(function() {\n        tokenDict['id_token'] = idToken;\n        return tokenDict;\n      });\n    }\n\n    return tokenDict;\n  })\n  .then(function(tokenDict) {\n    if (!Array.isArray(responseType)) {\n      return tokenDict[responseType];\n    }\n\n    // Validate response against tokenTypes\n    var validateTokenTypes =  ['token', 'id_token'];\n    validateTokenTypes.filter(function(key) {\n      return (responseType.indexOf(key) !== -1);\n    }).forEach(function(key) {\n      if (!tokenDict[key]) {\n        throw new AuthSdkError('Unable to parse OAuth flow response: ' + key + ' was not returned.');\n      }     \n    });\n\n    // Create token array in the order of the responseType array\n    return responseType.map(function(item) {\n      return tokenDict[item];\n    });\n  });\n}\n\nfunction getDefaultOAuthParams(sdk) {\n  return {\n    pkce: sdk.options.pkce || false,\n    clientId: sdk.options.clientId,\n    redirectUri: sdk.options.redirectUri || window.location.href,\n    responseType: 'id_token',\n    responseMode: 'okta_post_message',\n    state: oauthUtil.generateState(),\n    nonce: oauthUtil.generateNonce(),\n    scopes: ['openid', 'email'],\n    ignoreSignature: sdk.options.ignoreSignature\n  };\n}\n\nfunction convertOAuthParamsToQueryParams(oauthParams) {\n  // Quick validation\n  if (!oauthParams.clientId) {\n    throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n  }\n\n  if (util.isString(oauthParams.responseType) && oauthParams.responseType.indexOf(' ') !== -1) {\n    throw new AuthSdkError('Multiple OAuth responseTypes must be defined as an array');\n  }\n\n  // Convert our params to their actual OAuth equivalents\n  var oauthQueryParams = util.removeNils({\n    'client_id': oauthParams.clientId,\n    'code_challenge': oauthParams.codeChallenge,\n    'code_challenge_method': oauthParams.codeChallengeMethod,\n    'display': oauthParams.display,\n    'idp': oauthParams.idp,\n    'idp_scope': oauthParams.idpScope,\n    'login_hint': oauthParams.loginHint,\n    'max_age': oauthParams.maxAge,\n    'nonce': oauthParams.nonce,\n    'prompt': oauthParams.prompt,\n    'redirect_uri': oauthParams.redirectUri,\n    'response_mode': oauthParams.responseMode,\n    'response_type': oauthParams.responseType,\n    'sessionToken': oauthParams.sessionToken,\n    'state': oauthParams.state,\n  });\n\n  ['idp_scope', 'response_type'].forEach( function( mayBeArray ) { \n    if (Array.isArray(oauthQueryParams[mayBeArray])) {\n      oauthQueryParams[mayBeArray] = oauthQueryParams[mayBeArray].join(' ');\n    }\n  });\n\n  if (oauthParams.responseType.indexOf('id_token') !== -1 &&\n      oauthParams.scopes.indexOf('openid') === -1) {\n    throw new AuthSdkError('openid scope must be specified in the scopes argument when requesting an id_token');\n  } else {\n    oauthQueryParams.scope = oauthParams.scopes.join(' ');\n  }\n\n  return oauthQueryParams;\n}\n\nfunction buildAuthorizeParams(oauthParams) {\n  var oauthQueryParams = convertOAuthParamsToQueryParams(oauthParams);\n  return util.toQueryParams(oauthQueryParams);\n}\n\n/*\n * Retrieve an idToken from an Okta or a third party idp\n *\n * Two main flows:\n *\n *  1) Exchange a sessionToken for a token\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *      sessionToken: 'yourtoken'\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *\n *    Forced:\n *      prompt: 'none'\n *      responseMode: 'okta_post_message'\n *      display: undefined\n *\n *  2) Get a token from an idp\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *      idp: defaults to Okta as an idp\n *      prompt: no default. Pass 'none' to throw an error if user is not signed in\n *\n *    Forced:\n *      display: 'popup'\n *\n *  Only common optional params shown. Any OAuth parameters not explicitly forced are available to override\n *\n * @param {Object} oauthOptions\n * @param {String} [oauthOptions.clientId] ID of this client\n * @param {String} [oauthOptions.redirectUri] URI that the iframe or popup will go to once authenticated\n * @param {String[]} [oauthOptions.scopes] OAuth 2.0 scopes to request (openid must be specified)\n * @param {String} [oauthOptions.idp] ID of an external IdP to use for user authentication\n * @param {String} [oauthOptions.sessionToken] Bootstrap Session Token returned by the Okta Authentication API\n * @param {String} [oauthOptions.prompt] Determines whether the Okta login will be displayed on failure.\n *                                       Use 'none' to prevent this behavior\n *\n * @param {Object} options\n * @param {Integer} [options.timeout] Time in ms before the flow is automatically terminated. Defaults to 120000\n * @param {String} [options.popupTitle] Title dispayed in the popup.\n *                                      Defaults to 'External Identity Provider User Authentication'\n */\nfunction getToken(sdk, oauthOptions, options) {\n  oauthOptions = oauthOptions || {};\n  options = options || {};\n\n  return prepareOauthParams(sdk, oauthOptions)\n  .then(function(oauthParams) {\n\n    // Start overriding any options that don't make sense\n    var sessionTokenOverrides = {\n      prompt: 'none',\n      responseMode: 'okta_post_message',\n      display: null\n    };\n\n    var idpOverrides = {\n      display: 'popup'\n    };\n\n    if (oauthOptions.sessionToken) {\n      util.extend(oauthParams, sessionTokenOverrides);\n    } else if (oauthOptions.idp) {\n      util.extend(oauthParams, idpOverrides);\n    }\n\n    // Use the query params to build the authorize url\n    var requestUrl,\n        endpoint,\n        urls;\n    try {\n      // Get authorizeUrl and issuer\n      urls = oauthUtil.getOAuthUrls(sdk, oauthParams, options);\n      endpoint = oauthOptions.codeVerifier ? urls.tokenUrl : urls.authorizeUrl;\n      requestUrl = endpoint + buildAuthorizeParams(oauthParams);\n    } catch (e) {\n      return Q.reject(e);\n    }\n\n    // Determine the flow type\n    var flowType;\n    if (oauthParams.sessionToken || oauthParams.display === null) {\n      flowType = 'IFRAME';\n    } else if (oauthParams.display === 'popup') {\n      flowType = 'POPUP';\n    } else {\n      flowType = 'IMPLICIT';\n    }\n\n    function getOrigin(url) {\n      /* eslint-disable-next-line no-useless-escape */\n      var originRegex = /^(https?\\:\\/\\/)?([^:\\/?#]*(?:\\:[0-9]+)?)/;\n      return originRegex.exec(url)[0];\n    }\n\n    // Execute the flow type\n    switch (flowType) {\n      case 'IFRAME':\n        var iframePromise = addPostMessageListener(sdk, options.timeout, oauthParams.state);\n        var iframeEl = oauthUtil.loadFrame(requestUrl);\n        return iframePromise\n          .then(function(res) {\n            return handleOAuthResponse(sdk, oauthParams, res, urls);\n          })\n          .fin(function() {\n            if (document.body.contains(iframeEl)) {\n              iframeEl.parentElement.removeChild(iframeEl);\n            }\n          });\n\n      case 'POPUP': // eslint-disable-line no-case-declarations\n        var popupPromise;\n\n        // Add listener on postMessage before window creation, so\n        // postMessage isn't triggered before we're listening\n        if (oauthParams.responseMode === 'okta_post_message') {\n          if (!sdk.features.isPopupPostMessageSupported()) {\n            return Q.reject(new AuthSdkError('This browser doesn\\'t have full postMessage support'));\n          }\n          popupPromise = addPostMessageListener(sdk, options.timeout, oauthParams.state);\n        }\n\n        // Create the window\n        var windowOptions = {\n          popupTitle: options.popupTitle\n        };\n        var windowEl = oauthUtil.loadPopup(requestUrl, windowOptions);\n\n        // Poll until we get a valid hash fragment\n        if (oauthParams.responseMode === 'fragment') {\n          var windowOrigin = getOrigin(sdk.idToken.authorize._getLocationHref());\n          var redirectUriOrigin = getOrigin(oauthParams.redirectUri);\n          if (windowOrigin !== redirectUriOrigin) {\n            return Q.reject(new AuthSdkError('Using fragment, the redirectUri origin (' + redirectUriOrigin +\n              ') must match the origin of this page (' + windowOrigin + ')'));\n          }\n          popupPromise = addFragmentListener(sdk, windowEl, options.timeout);\n        }\n\n        // Both postMessage and fragment require a poll to see if the popup closed\n        var popupDeferred = Q.defer();\n        /* eslint-disable-next-line no-case-declarations, no-inner-declarations */\n        function hasClosed(win) {\n          if (!win || win.closed) {\n            popupDeferred.reject(new AuthSdkError('Unable to parse OAuth flow response'));\n            return true;\n          }\n        }\n        var closePoller = setInterval(function() {\n          if (hasClosed(windowEl)) {\n            clearInterval(closePoller);\n          }\n        }, 500);\n\n        // Proxy the promise results into the deferred\n        popupPromise\n        .then(function(res) {\n          popupDeferred.resolve(res);\n        })\n        .fail(function(err) {\n          popupDeferred.reject(err);\n        });\n\n        return popupDeferred.promise\n          .then(function(res) {\n            return handleOAuthResponse(sdk, oauthParams, res, urls);\n          })\n          .fin(function() {\n            clearInterval(closePoller);\n            if (windowEl && !windowEl.closed) {\n              windowEl.close();\n            }\n          });\n\n      default:\n        return Q.reject(new AuthSdkError('The full page redirect flow is not supported'));\n    }\n  });\n}\n\nfunction getWithoutPrompt(sdk, oauthOptions, options) {\n  var oauthParams = util.clone(oauthOptions) || {};\n  util.extend(oauthParams, {\n    prompt: 'none',\n    responseMode: 'okta_post_message',\n    display: null\n  });\n  return getToken(sdk, oauthParams, options);\n}\n\nfunction getWithPopup(sdk, oauthOptions, options) {\n  var oauthParams = util.clone(oauthOptions) || {};\n  util.extend(oauthParams, {\n    display: 'popup',\n    responseMode: 'okta_post_message'\n  });\n  return getToken(sdk, oauthParams, options);\n}\n\nfunction prepareOauthParams(sdk, oauthOptions) {\n  // clone and prepare options\n  oauthOptions = util.clone(oauthOptions) || {};\n\n  // OKTA-242989: support for grantType will be removed in 3.0 \n  if (oauthOptions.grantType === 'authorization_code') {\n    oauthOptions.pkce = true;\n  }\n\n  // build params using defaults + options\n  var oauthParams = getDefaultOAuthParams(sdk);\n  util.extend(oauthParams, oauthOptions);\n\n  if (oauthParams.pkce !== true) {\n    return Q.resolve(oauthParams);\n  }\n\n  // PKCE flow\n  if (!sdk.features.isPKCESupported()) {\n    return Q.reject(new AuthSdkError('This browser doesn\\'t support PKCE'));\n  }\n\n  // set default code challenge method, if none provided\n  if (!oauthParams.codeChallengeMethod) {\n    oauthParams.codeChallengeMethod = PKCE.DEFAULT_CODE_CHALLENGE_METHOD;\n  }\n\n  // responseType is forced\n  oauthParams.responseType = 'code';\n\n  return oauthUtil.getWellKnown(sdk, null)\n    .then(function(res) {\n      var methods = res['code_challenge_methods_supported'] || [];\n      if (methods.indexOf(oauthParams.codeChallengeMethod) === -1) {\n        throw new AuthSdkError('Invalid code_challenge_method');\n      }\n    })\n    .then(function() {\n      // PKCE authorization_code flow\n      var codeVerifier = PKCE.generateVerifier(oauthParams.codeVerifier);\n\n      // We will need these values after redirect when we call /token\n      var meta = {\n        codeVerifier: codeVerifier,\n        redirectUri: oauthParams.redirectUri\n      };\n      PKCE.saveMeta(sdk, meta);\n\n      return PKCE.computeChallenge(codeVerifier);\n    })\n    .then(function(codeChallenge) {\n\n      // Clone/copy the params. Set codeChallenge\n      var clonedParams = util.clone(oauthParams) || {};\n      util.extend(clonedParams, oauthParams, {\n        codeChallenge: codeChallenge,\n      });\n      return clonedParams;\n    });\n}\n\nfunction getWithRedirect(sdk, oauthOptions, options) {\n  oauthOptions = util.clone(oauthOptions) || {};\n\n  return prepareOauthParams(sdk, oauthOptions)\n    .then(function(oauthParams) {\n\n      // Dynamically set the responseMode unless the user has provided one\n      // Server-side flow requires query. Client-side apps usually prefer fragment.\n      if (!oauthOptions.responseMode) {\n        if (oauthParams.responseType.includes('code') && !oauthParams.pkce) {\n          // server-side flows using authorization_code\n          oauthParams.responseMode = 'query';\n        } else {\n          // Client-side flow can use fragment or query. This can be configured on the SDK instance.\n          oauthParams.responseMode = sdk.options.responseMode || 'fragment';\n        }\n      }\n\n      var urls = oauthUtil.getOAuthUrls(sdk, oauthParams, options);\n      var requestUrl = urls.authorizeUrl + buildAuthorizeParams(oauthParams);\n\n      // Chrome >= 80 will block cookies with SameSite=None unless they are also Secure\n      // If the application is running on HTTPS, we can relax 3rd party cookie settings.\n      // This will allow embedding the app in an iframe (only if it is running on HTTPS protocol)\n      var isSecure = window.location.protocol === 'https:';\n      var cookieSettings = {\n        secure: isSecure,\n        sameSite: isSecure ? 'none' : 'lax'\n      };\n\n      // Set session cookie to store the oauthParams\n      cookies.set(constants.REDIRECT_OAUTH_PARAMS_COOKIE_NAME, JSON.stringify({\n        responseType: oauthParams.responseType,\n        state: oauthParams.state,\n        nonce: oauthParams.nonce,\n        scopes: oauthParams.scopes,\n        clientId: oauthParams.clientId,\n        urls: urls,\n        ignoreSignature: oauthParams.ignoreSignature\n      }), null, cookieSettings);\n\n      // Set nonce cookie for servers to validate nonce in id_token\n      cookies.set(constants.REDIRECT_NONCE_COOKIE_NAME, oauthParams.nonce, null, cookieSettings);\n\n      // Set state cookie for servers to validate state\n      cookies.set(constants.REDIRECT_STATE_COOKIE_NAME, oauthParams.state, null, cookieSettings);\n\n      sdk.token.getWithRedirect._setLocation(requestUrl);\n    });\n}\n\nfunction renewToken(sdk, token) {\n  if (!oauthUtil.isToken(token)) {\n    return Q.reject(new AuthSdkError('Renew must be passed a token with ' +\n      'an array of scopes and an accessToken or idToken'));\n  }\n\n  var responseType;\n  if (sdk.options.pkce) {\n    responseType = 'code';\n  } else if (token.accessToken) {\n    responseType = 'token';\n  } else {\n    responseType = 'id_token';\n  }\n\n  return sdk.token.getWithoutPrompt({\n    responseType: responseType,\n    scopes: token.scopes\n  }, {\n    authorizeUrl: token.authorizeUrl,\n    userinfoUrl: token.userinfoUrl,\n    issuer: token.issuer\n  });\n}\n\nfunction removeHash(sdk) {\n  var nativeHistory = sdk.token.parseFromUrl._getHistory();\n  var nativeDoc = sdk.token.parseFromUrl._getDocument();\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n  if (nativeHistory && nativeHistory.replaceState) {\n    nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.search);\n  } else {\n    nativeLoc.hash = '';\n  }\n}\n\nfunction removeSearch(sdk) {\n  var nativeHistory = sdk.token.parseFromUrl._getHistory();\n  var nativeDoc = sdk.token.parseFromUrl._getDocument();\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n  if (nativeHistory && nativeHistory.replaceState) {\n    nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.hash);\n  } else {\n    nativeLoc.search = '';\n  }\n}\n\nfunction parseFromUrl(sdk, options) {\n  options = options || {};\n  if (util.isString(options)) {\n    options = { url: options };\n  }\n\n  var url = options.url;\n  var responseMode = options.responseMode || sdk.options.responseMode || 'fragment';\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n  var paramStr;\n\n  if (responseMode === 'query') {\n    paramStr = url ? url.substring(url.indexOf('?')) : nativeLoc.search;\n  } else {\n    paramStr = url ? url.substring(url.indexOf('#')) : nativeLoc.hash;\n  }\n\n  if (!paramStr) {\n    return Q.reject(new AuthSdkError('Unable to parse a token from the url'));\n  }\n\n  var oauthParamsCookie = cookies.get(constants.REDIRECT_OAUTH_PARAMS_COOKIE_NAME);\n  if (!oauthParamsCookie) {\n    return Q.reject(new AuthSdkError('Unable to retrieve OAuth redirect params cookie'));\n  }\n\n  try {\n    var oauthParams = JSON.parse(oauthParamsCookie);\n    var urls = oauthParams.urls;\n    delete oauthParams.urls;\n    cookies.delete(constants.REDIRECT_OAUTH_PARAMS_COOKIE_NAME);\n  } catch(e) {\n    return Q.reject(new AuthSdkError('Unable to parse the ' +\n    constants.REDIRECT_OAUTH_PARAMS_COOKIE_NAME + ' cookie: ' + e.message));\n  }\n\n  return Q.resolve(oauthUtil.urlParamsToObject(paramStr))\n    .then(function(res) {\n      if (!url) {\n        // Clean hash or search from the url\n        responseMode === 'query' ? removeSearch(sdk) : removeHash(sdk);\n      }\n      return handleOAuthResponse(sdk, oauthParams, res, urls);\n    });\n}\n\nfunction getUserInfo(sdk, accessTokenObject) {\n  if (!accessTokenObject ||\n      (!oauthUtil.isToken(accessTokenObject) && !accessTokenObject.accessToken && !accessTokenObject.userinfoUrl)) {\n    return Q.reject(new AuthSdkError('getUserInfo requires an access token object'));\n  }\n  return http.httpRequest(sdk, {\n    url: accessTokenObject.userinfoUrl,\n    method: 'GET',\n    accessToken: accessTokenObject.accessToken\n  })\n  .fail(function(err) {\n    if (err.xhr && (err.xhr.status === 401 || err.xhr.status === 403)) {\n      var authenticateHeader;\n      if (err.xhr.headers && util.isFunction(err.xhr.headers.get) && err.xhr.headers.get('WWW-Authenticate')) {\n        authenticateHeader = err.xhr.headers.get('WWW-Authenticate');\n      } else if (util.isFunction(err.xhr.getResponseHeader)) {\n        authenticateHeader = err.xhr.getResponseHeader('WWW-Authenticate');\n      }\n      if (authenticateHeader) {\n        var errorMatches = authenticateHeader.match(/error=\"(.*?)\"/) || [];\n        var errorDescriptionMatches = authenticateHeader.match(/error_description=\"(.*?)\"/) || [];\n        var error = errorMatches[1];\n        var errorDescription = errorDescriptionMatches[1];\n        if (error && errorDescription) {\n          err = new OAuthError(error, errorDescription);\n        }\n      }\n    }\n    throw err;\n  });\n}\n\nmodule.exports = {\n  revokeToken: revokeToken,\n  getToken: getToken,\n  getWithoutPrompt: getWithoutPrompt,\n  getWithPopup: getWithPopup,\n  getWithRedirect: getWithRedirect,\n  parseFromUrl: parseFromUrl,\n  decodeToken: decodeToken,\n  renewToken: renewToken,\n  getUserInfo: getUserInfo,\n  verifyToken: verifyToken,\n  handleOAuthResponse: handleOAuthResponse,\n  prepareOauthParams: prepareOauthParams\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/token.js\n// module id = 25\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nvar util = require('./util');\n\nfunction verifyToken(idToken, key) {\n  key = util.clone(key);\n\n  var format = 'jwk';\n  var algo = {\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: { name: 'SHA-256' }\n  };\n  var extractable = true;\n  var usages = ['verify'];\n\n  // https://connect.microsoft.com/IE/feedback/details/2242108/webcryptoapi-importing-jwk-with-use-field-fails\n  // This is a metadata tag that specifies the intent of how the key should be used.\n  // It's not necessary to properly verify the jwt's signature.\n  delete key.use;\n\n  return crypto.subtle.importKey(\n    format,\n    key,\n    algo,\n    extractable,\n    usages\n  )\n  .then(function(cryptoKey) {\n    var jwt = idToken.split('.');\n    var payload = util.stringToBuffer(jwt[0] + '.' + jwt[1]);\n    var b64Signature = util.base64UrlDecode(jwt[2]);\n    var signature = util.stringToBuffer(b64Signature);\n\n    return crypto.subtle.verify(\n      algo,\n      cryptoKey,\n      signature,\n      payload\n    );\n  });\n}\n\nmodule.exports = {\n  verifyToken: verifyToken\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/crypto.js\n// module id = 26\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction OAuthError(errorCode, summary) {\n  this.name = 'OAuthError';\n  this.message = summary;\n\n  this.errorCode = errorCode;\n  this.errorSummary = summary;\n}\nOAuthError.prototype = new Error();\n\nmodule.exports = OAuthError;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/errors/OAuthError.js\n// module id = 27\n// module chunks = 0","/*!\n * Copyright (c) 2019-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n /* eslint-disable complexity, max-statements */\nvar AuthSdkError  = require('./errors/AuthSdkError');\nvar http          = require('./http');\nvar util          = require('./util');\n\n// Code verifier: Random URL-safe string with a minimum length of 43 characters.\n// Code challenge: Base64 URL-encoded SHA-256 hash of the code verifier.\nvar MIN_VERIFIER_LENGTH = 43;\nvar MAX_VERIFIER_LENGTH = 128;\nvar DEFAULT_CODE_CHALLENGE_METHOD = 'S256';\n\nfunction dec2hex (dec) {\n  return ('0' + dec.toString(16)).substr(-2);\n}\n\nfunction getRandomString(length) {\n  var a = new Uint8Array(Math.ceil(length / 2));\n  crypto.getRandomValues(a);\n  var str = Array.from(a, dec2hex).join('');\n  return str.slice(0, length);\n}\n\nfunction generateVerifier(prefix) {\n  var verifier = prefix || '';\n  if (verifier.length < MIN_VERIFIER_LENGTH) {\n    verifier = verifier + getRandomString(MIN_VERIFIER_LENGTH - verifier.length);\n  }\n  return encodeURIComponent(verifier).slice(0, MAX_VERIFIER_LENGTH);\n}\n\nfunction saveMeta(sdk, meta) {\n  var storage = sdk.options.storageUtil.getPKCEStorage();\n  storage.setStorage(meta);\n}\n\nfunction loadMeta(sdk) {\n  var storage = sdk.options.storageUtil.getPKCEStorage();\n  var obj = storage.getStorage();\n  return obj;\n}\n\nfunction clearMeta(sdk) {\n  var storage = sdk.options.storageUtil.getPKCEStorage();\n  storage.clearStorage();\n}\n\n/* global Uint8Array, TextEncoder */\nfunction computeChallenge(str) {  \n  var buffer = new TextEncoder().encode(str);\n  return crypto.subtle.digest('SHA-256', buffer).then(function(arrayBuffer) {\n    var hash = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n    var b64u = util.stringToBase64Url(hash); // url-safe base64 variant\n    return b64u;\n  });\n}\n\n\nfunction validateOptions(oauthOptions) {\n  // Quick validation\n  if (!oauthOptions.clientId) {\n    throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n  }\n\n  if (!oauthOptions.redirectUri) {\n    throw new AuthSdkError('The redirectUri passed to /authorize must also be passed to /token');\n  }\n\n  if (!oauthOptions.authorizationCode) {\n    throw new AuthSdkError('An authorization code (returned from /authorize) must be passed to /token');\n  }\n\n  if (!oauthOptions.codeVerifier) {\n    throw new AuthSdkError('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n  }\n}\n\nfunction getPostData(options) {\n  // Convert options to OAuth params\n  var params = util.removeNils({\n    'client_id': options.clientId,\n    'redirect_uri': options.redirectUri,\n    'grant_type': 'authorization_code',\n    'code': options.authorizationCode,\n    'code_verifier': options.codeVerifier\n  });\n  // Encode as URL string\n  return util.toQueryParams(params).slice(1);\n}\n\n// exchange authorization code for an access token\nfunction getToken(sdk, oauthOptions, urls) {\n  validateOptions(oauthOptions);\n  var data = getPostData(oauthOptions);\n\n  return http.httpRequest(sdk, {\n    url: urls.tokenUrl,\n    method: 'POST',\n    args: data,\n    withCredentials: false,\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n}\n\nmodule.exports = {\n  DEFAULT_CODE_CHALLENGE_METHOD: DEFAULT_CODE_CHALLENGE_METHOD,\n  generateVerifier: generateVerifier,\n  clearMeta: clearMeta,\n  saveMeta: saveMeta,\n  loadMeta: loadMeta,\n  computeChallenge: computeChallenge,\n  getToken: getToken\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/pkce.js\n// module id = 28\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint complexity:[0,8] max-statements:[0,21] */\nvar util = require('./util');\nvar AuthSdkError = require('./errors/AuthSdkError');\nvar storageUtil = require('./browser/browserStorage');\nvar Q = require('q');\nvar constants = require('./constants');\nvar storageBuilder = require('./storageBuilder');\nvar SdkClock = require('./clock');\n\nvar DEFAULT_OPTIONS = {\n  autoRenew: true,\n  storage: 'localStorage',\n  expireEarlySeconds: 30\n};\n\nfunction getExpireTime(tokenMgmtRef, token) {\n  var expireTime = token.expiresAt - tokenMgmtRef.options.expireEarlySeconds;\n  return expireTime;\n}\n\nfunction hasExpired(tokenMgmtRef, token) {\n  var expireTime = getExpireTime(tokenMgmtRef, token);\n  return expireTime <= tokenMgmtRef.clock.now();\n}\n\nfunction emitExpired(tokenMgmtRef, key, token) {\n  tokenMgmtRef.emitter.emit('expired', key, token);\n}\n\nfunction emitError(tokenMgmtRef, error) {\n  tokenMgmtRef.emitter.emit('error', error);\n}\n\nfunction clearExpireEventTimeout(tokenMgmtRef, key) {\n  clearTimeout(tokenMgmtRef.expireTimeouts[key]);\n  delete tokenMgmtRef.expireTimeouts[key];\n\n  // Remove the renew promise (if it exists)\n  delete tokenMgmtRef.renewPromise[key];\n}\n\nfunction clearExpireEventTimeoutAll(tokenMgmtRef) {\n  var expireTimeouts = tokenMgmtRef.expireTimeouts;\n  for (var key in expireTimeouts) {\n    if (!expireTimeouts.hasOwnProperty(key)) {\n      continue;\n    }\n    clearExpireEventTimeout(tokenMgmtRef, key);\n  }\n}\n\nfunction setExpireEventTimeout(sdk, tokenMgmtRef, key, token) {\n  var expireTime = getExpireTime(tokenMgmtRef, token);\n  var expireEventWait = Math.max(expireTime - tokenMgmtRef.clock.now(), 0) * 1000;\n\n  // Clear any existing timeout\n  clearExpireEventTimeout(tokenMgmtRef, key);\n\n  var expireEventTimeout = setTimeout(function() {\n    emitExpired(tokenMgmtRef, key, token);\n  }, expireEventWait);\n\n  // Add a new timeout\n  tokenMgmtRef.expireTimeouts[key] = expireEventTimeout;\n}\n\nfunction setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage) {\n  try {\n    var tokenStorage = storage.getStorage();\n  } catch(e) {\n    // Any errors thrown on instantiation will not be caught,\n    // because there are no listeners yet\n    emitError(tokenMgmtRef, e);\n    return;\n  }\n\n  for(var key in tokenStorage) {\n    if (!tokenStorage.hasOwnProperty(key)) {\n      continue;\n    }\n    var token = tokenStorage[key];\n    setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n  }\n}\n\nfunction add(sdk, tokenMgmtRef, storage, key, token) {\n  var tokenStorage = storage.getStorage();\n  if (!util.isObject(token) ||\n      !token.scopes ||\n      (!token.expiresAt && token.expiresAt !== 0) ||\n      (!token.idToken && !token.accessToken)) {\n    throw new AuthSdkError('Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties');\n  }\n  tokenStorage[key] = token;\n  storage.setStorage(tokenStorage);\n  setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n}\n\nfunction get(storage, key) {\n  var tokenStorage = storage.getStorage();\n  return tokenStorage[key];\n}\n\nfunction getAsync(sdk, tokenMgmtRef, storage, key) {\n  return Q.Promise(function(resolve) {\n    var token = get(storage, key);\n    if (!token || !hasExpired(tokenMgmtRef, token)) {\n      return resolve(token);\n    }\n\n    var tokenPromise = tokenMgmtRef.options.autoRenew\n      ? renew(sdk, tokenMgmtRef, storage, key)\n      : remove(tokenMgmtRef, storage, key);\n\n    return resolve(tokenPromise);\n  });\n}\n\nfunction remove(tokenMgmtRef, storage, key) {\n  // Clear any listener for this token\n  clearExpireEventTimeout(tokenMgmtRef, key);\n\n  // Remove it from storage\n  var tokenStorage = storage.getStorage();\n  delete tokenStorage[key];\n  storage.setStorage(tokenStorage);\n}\n\nfunction renew(sdk, tokenMgmtRef, storage, key) {\n  // Multiple callers may receive the same promise. They will all resolve or reject from the same request.\n  var existingPromise = tokenMgmtRef.renewPromise[key];\n  if (existingPromise) {\n    return existingPromise;\n  }\n\n  try {\n    var token = get(storage, key);\n    if (!token) {\n      throw new AuthSdkError('The tokenManager has no token for the key: ' + key);\n    }\n  } catch (e) {\n    return Q.reject(e);\n  }\n\n  // Remove existing autoRenew timeout for this key\n  clearExpireEventTimeout(tokenMgmtRef, key);\n\n  // Store the renew promise state, to avoid renewing again\n  tokenMgmtRef.renewPromise[key] = sdk.token.renew(token)\n    .then(function(freshTokens) {\n      var freshToken = freshTokens;\n      // With PKCE flow we will receive multiple tokens. Find the one we are looking for\n      if (freshTokens instanceof Array) {\n        freshToken = freshTokens.find(function(freshToken) {\n          return (freshToken.idToken && token.idToken) || (freshToken.accessToken && token.accessToken);\n        });\n      }\n\n      var oldToken = get(storage, key);\n      if (!oldToken) {\n        // It is possible to enter a state where the tokens have been cleared\n        // after a renewal request was triggered. To ensure we do not store a\n        // renewed token, we verify the promise key doesn't exist and return.\n        return;\n      }\n      add(sdk, tokenMgmtRef, storage, key, freshToken);\n      tokenMgmtRef.emitter.emit('renewed', key, freshToken, oldToken);\n      return freshToken;\n    })\n    .catch(function(err) {\n      if (err.name === 'OAuthError' || err.name === 'AuthSdkError') {\n        remove(tokenMgmtRef, storage, key);\n        err.tokenKey = key;\n        err.accessToken = !!token.accessToken;\n        emitError(tokenMgmtRef, err);\n      }\n      throw err;\n    })\n    .finally(function() {\n      // Remove existing promise key\n      delete tokenMgmtRef.renewPromise[key];\n    });\n\n  return tokenMgmtRef.renewPromise[key];\n}\n\nfunction clear(tokenMgmtRef, storage) {\n  clearExpireEventTimeoutAll(tokenMgmtRef);\n  storage.clearStorage();\n}\n\nfunction TokenManager(sdk, options) {\n  options = util.extend({}, DEFAULT_OPTIONS, util.removeNils(options));\n\n  if (options.storage === 'localStorage' && !storageUtil.browserHasLocalStorage()) {\n    util.warn('This browser doesn\\'t support localStorage. Switching to sessionStorage.');\n    options.storage = 'sessionStorage';\n  }\n\n  if (options.storage === 'sessionStorage' && !storageUtil.browserHasSessionStorage()) {\n    util.warn('This browser doesn\\'t support sessionStorage. Switching to cookie-based storage.');\n    options.storage = 'cookie';\n  }\n\n  var storageProvider;\n  if (typeof options.storage === 'object') {\n    // A custom storage provider must implement getItem(key) and setItem(key, val)\n    storageProvider = options.storage;\n  } else {\n    switch(options.storage) {\n      case 'localStorage':\n        storageProvider = localStorage;\n        break;\n      case 'sessionStorage':\n        storageProvider = sessionStorage;\n        break;\n      case 'cookie':\n        storageProvider = storageUtil.getCookieStorage(options);\n        break;\n      case 'memory':\n        storageProvider = storageUtil.getInMemoryStorage();\n        break;\n      default:\n        throw new AuthSdkError('Unrecognized storage option');\n    }\n  }\n  var storageKey = options.storageKey || constants.TOKEN_STORAGE_NAME;\n  var storage = storageBuilder(storageProvider, storageKey);\n  var clock = SdkClock.create(sdk, options);\n  var tokenMgmtRef = {\n    clock: clock,\n    options: options,\n    emitter: sdk.emitter,\n    expireTimeouts: {},\n    renewPromise: {}\n  };\n\n  this.add = util.bind(add, this, sdk, tokenMgmtRef, storage);\n  this.get = util.bind(getAsync, this, sdk, tokenMgmtRef, storage);\n  this.remove = util.bind(remove, this, tokenMgmtRef, storage);\n  this.clear = util.bind(clear, this, tokenMgmtRef, storage);\n  this.renew = util.bind(renew, this, sdk, tokenMgmtRef, storage);\n  this.on = util.bind(tokenMgmtRef.emitter.on, tokenMgmtRef.emitter);\n  this.off = util.bind(tokenMgmtRef.emitter.off, tokenMgmtRef.emitter);\n\n  setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage);\n}\n\nmodule.exports = TokenManager;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/TokenManager.js\n// module id = 29\n// module chunks = 0","var util = require('./util');\n\nfunction SdkClock(localOffset) {\n  // Calculated local clock offset from server time (in milliseconds). Can be positive or negative.\n  this.localOffset = parseInt(localOffset || 0);\n}\n\nutil.extend(SdkClock.prototype, {\n  // Return the current time (in seconds)\n  now: function() {\n    var now = (Date.now() + this.localOffset) / 1000;\n    return now;\n  }\n});\n\n// factory method. Create an instance of a clock from current context.\nSdkClock.create = function(/* sdk, options */) {\n  // TODO: calculate localOffset\n  var localOffset = 0;\n  return new SdkClock(localOffset);\n};\n\nmodule.exports = SdkClock;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/clock.js\n// module id = 30\n// module chunks = 0"],"sourceRoot":""},"metadata":{},"sourceType":"script"}